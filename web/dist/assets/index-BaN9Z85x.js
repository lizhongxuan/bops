(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Go(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ge={},Qn=[],en=()=>{},ka=()=>!1,Rl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yo=e=>e.startsWith("onUpdate:"),St=Object.assign,zo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_u=Object.prototype.hasOwnProperty,Ke=(e,t)=>_u.call(e,t),xe=Array.isArray,Xn=e=>js(e)==="[object Map]",cs=e=>js(e)==="[object Set]",Ei=e=>js(e)==="[object Date]",Ae=e=>typeof e=="function",it=e=>typeof e=="string",tn=e=>typeof e=="symbol",Ye=e=>e!==null&&typeof e=="object",$a=e=>(Ye(e)||Ae(e))&&Ae(e.then)&&Ae(e.catch),Sa=Object.prototype.toString,js=e=>Sa.call(e),bu=e=>js(e).slice(8,-1),xa=e=>js(e)==="[object Object]",Zo=e=>it(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cs=Go(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Il=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},wu=/-\w/g,Ft=Il(e=>e.replace(wu,t=>t.slice(1).toUpperCase())),ku=/\B([A-Z])/g,Tn=Il(e=>e.replace(ku,"-$1").toLowerCase()),Al=Il(e=>e.charAt(0).toUpperCase()+e.slice(1)),ho=Il(e=>e?`on${Al(e)}`:""),Rn=(e,t)=>!Object.is(e,t),pl=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ea=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Tl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ci;const Ml=()=>Ci||(Ci=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hs(e){if(xe(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=it(s)?Eu(s):Hs(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(it(e)||Ye(e))return e}const $u=/;(?![^(]*\))/g,Su=/:([^]+)/,xu=/\/\*[^]*?\*\//g;function Eu(e){const t={};return e.replace(xu,"").split($u).forEach(n=>{if(n){const s=n.split(Su);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ie(e){let t="";if(it(e))t=e;else if(xe(e))for(let n=0;n<e.length;n++){const s=Ie(e[n]);s&&(t+=s+" ")}else if(Ye(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Cu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ru=Go(Cu);function Ca(e){return!!e||e===""}function Iu(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Hn(e[s],t[s]);return n}function Hn(e,t){if(e===t)return!0;let n=Ei(e),s=Ei(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=tn(e),s=tn(t),n||s)return e===t;if(n=xe(e),s=xe(t),n||s)return n&&s?Iu(e,t):!1;if(n=Ye(e),s=Ye(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const r in e){const c=e.hasOwnProperty(r),a=t.hasOwnProperty(r);if(c&&!a||!c&&a||!Hn(e[r],t[r]))return!1}}return String(e)===String(t)}function Jo(e,t){return e.findIndex(n=>Hn(n,t))}const Ra=e=>!!(e&&e.__v_isRef===!0),T=e=>it(e)?e:e==null?"":xe(e)||Ye(e)&&(e.toString===Sa||!Ae(e.toString))?Ra(e)?T(e.value):JSON.stringify(e,Ia,2):String(e),Ia=(e,t)=>Ra(t)?Ia(e,t.value):Xn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[mo(s,i)+" =>"]=o,n),{})}:cs(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mo(n))}:tn(t)?mo(t):Ye(t)&&!xe(t)&&!xa(t)?String(t):t,mo=(e,t="")=>{var n;return tn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pt;class Au{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pt,!t&&Pt&&(this.index=(Pt.scopes||(Pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Pt;try{return Pt=this,t()}finally{Pt=n}}}on(){++this._on===1&&(this.prevScope=Pt,Pt=this)}off(){this._on>0&&--this._on===0&&(Pt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Tu(){return Pt}let Qe;const go=new WeakSet;class Aa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pt&&Pt.active&&Pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,go.has(this)&&(go.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ma(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ri(this),Na(this);const t=Qe,n=Gt;Qe=this,Gt=!0;try{return this.fn()}finally{Oa(this),Qe=t,Gt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ei(t);this.deps=this.depsTail=void 0,Ri(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?go.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ao(this)&&this.run()}get dirty(){return Ao(this)}}let Ta=0,Rs,Is;function Ma(e,t=!1){if(e.flags|=8,t){e.next=Is,Is=e;return}e.next=Rs,Rs=e}function Qo(){Ta++}function Xo(){if(--Ta>0)return;if(Is){let t=Is;for(Is=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Rs;){let t=Rs;for(Rs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Na(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Oa(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),ei(s),Mu(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function Ao(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ps)||(e.globalVersion=Ps,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ao(e))))return;e.flags|=2;const t=e.dep,n=Qe,s=Gt;Qe=e,Gt=!0;try{Na(e);const o=e.fn(e._value);(t.version===0||Rn(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Qe=n,Gt=s,Oa(e),e.flags&=-3}}function ei(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ei(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mu(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Gt=!0;const La=[];function pn(){La.push(Gt),Gt=!1}function hn(){const e=La.pop();Gt=e===void 0?!0:e}function Ri(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Qe;Qe=void 0;try{t()}finally{Qe=n}}}let Ps=0;class Nu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ti{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Qe||!Gt||Qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Qe)n=this.activeLink=new Nu(Qe,this),Qe.deps?(n.prevDep=Qe.depsTail,Qe.depsTail.nextDep=n,Qe.depsTail=n):Qe.deps=Qe.depsTail=n,Va(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Qe.depsTail,n.nextDep=void 0,Qe.depsTail.nextDep=n,Qe.depsTail=n,Qe.deps===n&&(Qe.deps=s)}return n}trigger(t){this.version++,Ps++,this.notify(t)}notify(t){Qo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xo()}}}function Va(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Va(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const To=new WeakMap,Un=Symbol(""),Mo=Symbol(""),Ls=Symbol("");function wt(e,t,n){if(Gt&&Qe){let s=To.get(e);s||To.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new ti),o.map=s,o.key=n),o.track()}}function dn(e,t,n,s,o,i){const r=To.get(e);if(!r){Ps++;return}const c=a=>{a&&a.trigger()};if(Qo(),t==="clear")r.forEach(c);else{const a=xe(e),v=a&&Zo(n);if(a&&n==="length"){const p=Number(s);r.forEach((b,R)=>{(R==="length"||R===Ls||!tn(R)&&R>=p)&&c(b)})}else switch((n!==void 0||r.has(void 0))&&c(r.get(n)),v&&c(r.get(Ls)),t){case"add":a?v&&c(r.get("length")):(c(r.get(Un)),Xn(e)&&c(r.get(Mo)));break;case"delete":a||(c(r.get(Un)),Xn(e)&&c(r.get(Mo)));break;case"set":Xn(e)&&c(r.get(Un));break}}Xo()}function Yn(e){const t=We(e);return t===e?t:(wt(t,"iterate",Ls),Ut(e)?t:t.map(Yt))}function Nl(e){return wt(e=We(e),"iterate",Ls),e}function Sn(e,t){return mn(e)?jn(e)?ss(Yt(t)):ss(t):Yt(t)}const Ou={__proto__:null,[Symbol.iterator](){return yo(this,Symbol.iterator,e=>Sn(this,e))},concat(...e){return Yn(this).concat(...e.map(t=>xe(t)?Yn(t):t))},entries(){return yo(this,"entries",e=>(e[1]=Sn(this,e[1]),e))},every(e,t){return rn(this,"every",e,t,void 0,arguments)},filter(e,t){return rn(this,"filter",e,t,n=>n.map(s=>Sn(this,s)),arguments)},find(e,t){return rn(this,"find",e,t,n=>Sn(this,n),arguments)},findIndex(e,t){return rn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rn(this,"findLast",e,t,n=>Sn(this,n),arguments)},findLastIndex(e,t){return rn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rn(this,"forEach",e,t,void 0,arguments)},includes(...e){return _o(this,"includes",e)},indexOf(...e){return _o(this,"indexOf",e)},join(e){return Yn(this).join(e)},lastIndexOf(...e){return _o(this,"lastIndexOf",e)},map(e,t){return rn(this,"map",e,t,void 0,arguments)},pop(){return ks(this,"pop")},push(...e){return ks(this,"push",e)},reduce(e,...t){return Ii(this,"reduce",e,t)},reduceRight(e,...t){return Ii(this,"reduceRight",e,t)},shift(){return ks(this,"shift")},some(e,t){return rn(this,"some",e,t,void 0,arguments)},splice(...e){return ks(this,"splice",e)},toReversed(){return Yn(this).toReversed()},toSorted(e){return Yn(this).toSorted(e)},toSpliced(...e){return Yn(this).toSpliced(...e)},unshift(...e){return ks(this,"unshift",e)},values(){return yo(this,"values",e=>Sn(this,e))}};function yo(e,t,n){const s=Nl(e),o=s[t]();return s!==e&&!Ut(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const Pu=Array.prototype;function rn(e,t,n,s,o,i){const r=Nl(e),c=r!==e&&!Ut(e),a=r[t];if(a!==Pu[t]){const b=a.apply(e,i);return c?Yt(b):b}let v=n;r!==e&&(c?v=function(b,R){return n.call(this,Sn(e,b),R,e)}:n.length>2&&(v=function(b,R){return n.call(this,b,R,e)}));const p=a.call(r,v,s);return c&&o?o(p):p}function Ii(e,t,n,s){const o=Nl(e);let i=n;return o!==e&&(Ut(e)?n.length>3&&(i=function(r,c,a){return n.call(this,r,c,a,e)}):i=function(r,c,a){return n.call(this,r,Sn(e,c),a,e)}),o[t](i,...s)}function _o(e,t,n){const s=We(e);wt(s,"iterate",Ls);const o=s[t](...n);return(o===-1||o===!1)&&li(n[0])?(n[0]=We(n[0]),s[t](...n)):o}function ks(e,t,n=[]){pn(),Qo();const s=We(e)[t].apply(e,n);return Xo(),hn(),s}const Lu=Go("__proto__,__v_isRef,__isVue"),Da=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(tn));function Vu(e){tn(e)||(e=String(e));const t=We(this);return wt(t,"has",e),t.hasOwnProperty(e)}class Ba{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?Gu:Fa:i?Ha:ja).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=xe(t);if(!o){let a;if(r&&(a=Ou[n]))return a;if(n==="hasOwnProperty")return Vu}const c=Reflect.get(t,n,$t(t)?t:s);if((tn(n)?Da.has(n):Lu(n))||(o||wt(t,"get",n),i))return c;if($t(c)){const a=r&&Zo(n)?c:c.value;return o&&Ye(a)?Oo(a):a}return Ye(c)?o?Oo(c):Fs(c):c}}class Ua extends Ba{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];const r=xe(t)&&Zo(n);if(!this._isShallow){const v=mn(i);if(!Ut(s)&&!mn(s)&&(i=We(i),s=We(s)),!r&&$t(i)&&!$t(s))return v||(i.value=s),!0}const c=r?Number(n)<t.length:Ke(t,n),a=Reflect.set(t,n,s,$t(t)?t:o);return t===We(o)&&(c?Rn(s,i)&&dn(t,"set",n,s):dn(t,"add",n,s)),a}deleteProperty(t,n){const s=Ke(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&dn(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!tn(n)||!Da.has(n))&&wt(t,"has",n),s}ownKeys(t){return wt(t,"iterate",xe(t)?"length":Un),Reflect.ownKeys(t)}}class Du extends Ba{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Bu=new Ua,Uu=new Du,ju=new Ua(!0);const No=e=>e,cl=e=>Reflect.getPrototypeOf(e);function Hu(e,t,n){return function(...s){const o=this.__v_raw,i=We(o),r=Xn(i),c=e==="entries"||e===Symbol.iterator&&r,a=e==="keys"&&r,v=o[e](...s),p=n?No:t?ss:Yt;return!t&&wt(i,"iterate",a?Mo:Un),{next(){const{value:b,done:R}=v.next();return R?{value:b,done:R}:{value:c?[p(b[0]),p(b[1])]:p(b),done:R}},[Symbol.iterator](){return this}}}}function dl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Fu(e,t){const n={get(o){const i=this.__v_raw,r=We(i),c=We(o);e||(Rn(o,c)&&wt(r,"get",o),wt(r,"get",c));const{has:a}=cl(r),v=t?No:e?ss:Yt;if(a.call(r,o))return v(i.get(o));if(a.call(r,c))return v(i.get(c));i!==r&&i.get(o)},get size(){const o=this.__v_raw;return!e&&wt(We(o),"iterate",Un),o.size},has(o){const i=this.__v_raw,r=We(i),c=We(o);return e||(Rn(o,c)&&wt(r,"has",o),wt(r,"has",c)),o===c?i.has(o):i.has(o)||i.has(c)},forEach(o,i){const r=this,c=r.__v_raw,a=We(c),v=t?No:e?ss:Yt;return!e&&wt(a,"iterate",Un),c.forEach((p,b)=>o.call(i,v(p),v(b),r))}};return St(n,e?{add:dl("add"),set:dl("set"),delete:dl("delete"),clear:dl("clear")}:{add(o){!t&&!Ut(o)&&!mn(o)&&(o=We(o));const i=We(this);return cl(i).has.call(i,o)||(i.add(o),dn(i,"add",o,o)),this},set(o,i){!t&&!Ut(i)&&!mn(i)&&(i=We(i));const r=We(this),{has:c,get:a}=cl(r);let v=c.call(r,o);v||(o=We(o),v=c.call(r,o));const p=a.call(r,o);return r.set(o,i),v?Rn(i,p)&&dn(r,"set",o,i):dn(r,"add",o,i),this},delete(o){const i=We(this),{has:r,get:c}=cl(i);let a=r.call(i,o);a||(o=We(o),a=r.call(i,o)),c&&c.call(i,o);const v=i.delete(o);return a&&dn(i,"delete",o,void 0),v},clear(){const o=We(this),i=o.size!==0,r=o.clear();return i&&dn(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Hu(o,e,t)}),n}function ni(e,t){const n=Fu(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Ke(n,o)&&o in s?n:s,o,i)}const Wu={get:ni(!1,!1)},Ku={get:ni(!1,!0)},qu={get:ni(!0,!1)};const ja=new WeakMap,Ha=new WeakMap,Fa=new WeakMap,Gu=new WeakMap;function Yu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zu(e){return e.__v_skip||!Object.isExtensible(e)?0:Yu(bu(e))}function Fs(e){return mn(e)?e:si(e,!1,Bu,Wu,ja)}function Wa(e){return si(e,!1,ju,Ku,Ha)}function Oo(e){return si(e,!0,Uu,qu,Fa)}function si(e,t,n,s,o){if(!Ye(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=zu(e);if(i===0)return e;const r=o.get(e);if(r)return r;const c=new Proxy(e,i===2?s:n);return o.set(e,c),c}function jn(e){return mn(e)?jn(e.__v_raw):!!(e&&e.__v_isReactive)}function mn(e){return!!(e&&e.__v_isReadonly)}function Ut(e){return!!(e&&e.__v_isShallow)}function li(e){return e?!!e.__v_raw:!1}function We(e){const t=e&&e.__v_raw;return t?We(t):e}function Zu(e){return!Ke(e,"__v_skip")&&Object.isExtensible(e)&&Ea(e,"__v_skip",!0),e}const Yt=e=>Ye(e)?Fs(e):e,ss=e=>Ye(e)?Oo(e):e;function $t(e){return e?e.__v_isRef===!0:!1}function P(e){return Ka(e,!1)}function Ju(e){return Ka(e,!0)}function Ka(e,t){return $t(e)?e:new Qu(e,t)}class Qu{constructor(t,n){this.dep=new ti,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:We(t),this._value=n?t:Yt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Ut(t)||mn(t);t=s?t:We(t),Rn(t,n)&&(this._rawValue=t,this._value=s?t:Yt(t),this.dep.trigger())}}function es(e){return $t(e)?e.value:e}const Xu={get:(e,t,n)=>t==="__v_raw"?e:es(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return $t(o)&&!$t(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function qa(e){return jn(e)?e:new Proxy(e,Xu)}class ec{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ti(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ps-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return Ma(this,!0),!0}get value(){const t=this.dep.track();return Pa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tc(e,t,n=!1){let s,o;return Ae(e)?s=e:(s=e.get,o=e.set),new ec(s,o,n)}const fl={},_l=new WeakMap;let Dn;function nc(e,t=!1,n=Dn){if(n){let s=_l.get(n);s||_l.set(n,s=[]),s.push(e)}}function sc(e,t,n=Ge){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:c,call:a}=n,v=L=>o?L:Ut(L)||o===!1||o===0?fn(L,1):fn(L);let p,b,R,E,H=!1,M=!1;if($t(e)?(b=()=>e.value,H=Ut(e)):jn(e)?(b=()=>v(e),H=!0):xe(e)?(M=!0,H=e.some(L=>jn(L)||Ut(L)),b=()=>e.map(L=>{if($t(L))return L.value;if(jn(L))return v(L);if(Ae(L))return a?a(L,2):L()})):Ae(e)?t?b=a?()=>a(e,2):e:b=()=>{if(R){pn();try{R()}finally{hn()}}const L=Dn;Dn=p;try{return a?a(e,3,[E]):e(E)}finally{Dn=L}}:b=en,t&&o){const L=b,A=o===!0?1/0:o;b=()=>fn(L(),A)}const V=Tu(),U=()=>{p.stop(),V&&V.active&&zo(V.effects,p)};if(i&&t){const L=t;t=(...A)=>{L(...A),U()}}let $=M?new Array(e.length).fill(fl):fl;const N=L=>{if(!(!(p.flags&1)||!p.dirty&&!L))if(t){const A=p.run();if(o||H||(M?A.some((q,ve)=>Rn(q,$[ve])):Rn(A,$))){R&&R();const q=Dn;Dn=p;try{const ve=[A,$===fl?void 0:M&&$[0]===fl?[]:$,E];$=A,a?a(t,3,ve):t(...ve)}finally{Dn=q}}}else p.run()};return c&&c(N),p=new Aa(b),p.scheduler=r?()=>r(N,!1):N,E=L=>nc(L,!1,p),R=p.onStop=()=>{const L=_l.get(p);if(L){if(a)a(L,4);else for(const A of L)A();_l.delete(p)}},t?s?N(!0):$=p.run():r?r(N.bind(null,!0),!0):p.run(),U.pause=p.pause.bind(p),U.resume=p.resume.bind(p),U.stop=U,U}function fn(e,t=1/0,n){if(t<=0||!Ye(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,$t(e))fn(e.value,t,n);else if(xe(e))for(let s=0;s<e.length;s++)fn(e[s],t,n);else if(cs(e)||Xn(e))e.forEach(s=>{fn(s,t,n)});else if(xa(e)){for(const s in e)fn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&fn(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ws(e,t,n,s){try{return s?e(...s):e()}catch(o){Ol(o,t,n)}}function nn(e,t,n,s){if(Ae(e)){const o=Ws(e,t,n,s);return o&&$a(o)&&o.catch(i=>{Ol(i,t,n)}),o}if(xe(e)){const o=[];for(let i=0;i<e.length;i++)o.push(nn(e[i],t,n,s));return o}}function Ol(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ge;if(t){let c=t.parent;const a=t.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const p=c.ec;if(p){for(let b=0;b<p.length;b++)if(p[b](e,a,v)===!1)return}c=c.parent}if(i){pn(),Ws(i,null,10,[e,a,v]),hn();return}}lc(e,n,o,s,r)}function lc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const Mt=[];let Qt=-1;const ts=[];let xn=null,Zn=0;const Ga=Promise.resolve();let bl=null;function Ks(e){const t=bl||Ga;return e?t.then(this?e.bind(this):e):t}function oc(e){let t=Qt+1,n=Mt.length;for(;t<n;){const s=t+n>>>1,o=Mt[s],i=Vs(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function oi(e){if(!(e.flags&1)){const t=Vs(e),n=Mt[Mt.length-1];!n||!(e.flags&2)&&t>=Vs(n)?Mt.push(e):Mt.splice(oc(t),0,e),e.flags|=1,Ya()}}function Ya(){bl||(bl=Ga.then(Za))}function ic(e){xe(e)?ts.push(...e):xn&&e.id===-1?xn.splice(Zn+1,0,e):e.flags&1||(ts.push(e),e.flags|=1),Ya()}function Ai(e,t,n=Qt+1){for(;n<Mt.length;n++){const s=Mt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Mt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function za(e){if(ts.length){const t=[...new Set(ts)].sort((n,s)=>Vs(n)-Vs(s));if(ts.length=0,xn){xn.push(...t);return}for(xn=t,Zn=0;Zn<xn.length;Zn++){const n=xn[Zn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xn=null,Zn=0}}const Vs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Za(e){try{for(Qt=0;Qt<Mt.length;Qt++){const t=Mt[Qt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ws(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Qt<Mt.length;Qt++){const t=Mt[Qt];t&&(t.flags&=-2)}Qt=-1,Mt.length=0,za(),bl=null,(Mt.length||ts.length)&&Za()}}let Dt=null,Ja=null;function wl(e){const t=Dt;return Dt=e,Ja=e&&e.type.__scopeId||null,t}function bt(e,t=Dt,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Sl(-1);const i=wl(t);let r;try{r=e(...o)}finally{wl(i),s._d&&Sl(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function ae(e,t){if(Dt===null)return e;const n=Bl(Dt),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,r,c,a=Ge]=t[o];i&&(Ae(i)&&(i={mounted:i,updated:i}),i.deep&&fn(r),s.push({dir:i,instance:n,value:r,oldValue:void 0,arg:c,modifiers:a}))}return e}function Ln(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const c=o[r];i&&(c.oldValue=i[r].value);let a=c.dir[s];a&&(pn(),nn(a,n,8,[e.el,c,e,t]),hn())}}function hl(e,t){if(kt){let n=kt.provides;const s=kt.parent&&kt.parent.provides;s===n&&(n=kt.provides=Object.create(s)),n[e]=t}}function jt(e,t,n=!1){const s=sd();if(s||ns){let o=ns?ns._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ae(t)?t.call(s&&s.proxy):t}}const ac=Symbol.for("v-scx"),rc=()=>jt(ac);function ft(e,t,n){return Qa(e,t,n)}function Qa(e,t,n=Ge){const{immediate:s,deep:o,flush:i,once:r}=n,c=St({},n),a=t&&s||!t&&i!=="post";let v;if(Bs){if(i==="sync"){const E=rc();v=E.__watcherHandles||(E.__watcherHandles=[])}else if(!a){const E=()=>{};return E.stop=en,E.resume=en,E.pause=en,E}}const p=kt;c.call=(E,H,M)=>nn(E,p,H,M);let b=!1;i==="post"?c.scheduler=E=>{Vt(E,p&&p.suspense)}:i!=="sync"&&(b=!0,c.scheduler=(E,H)=>{H?E():oi(E)}),c.augmentJob=E=>{t&&(E.flags|=4),b&&(E.flags|=2,p&&(E.id=p.uid,E.i=p))};const R=sc(e,t,c);return Bs&&(v?v.push(R):a&&R()),R}function uc(e,t,n){const s=this.proxy,o=it(e)?e.includes(".")?Xa(s,e):()=>s[e]:e.bind(s,s);let i;Ae(t)?i=t:(i=t.handler,n=t);const r=qs(this),c=Qa(o,i.bind(s),n);return r(),c}function Xa(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const cc=Symbol("_vte"),dc=e=>e.__isTeleport,fc=Symbol("_leaveCb");function ii(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ii(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function xt(e,t){return Ae(e)?St({name:e.name},t,{setup:e}):e}function er(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const kl=new WeakMap;function As(e,t,n,s,o=!1){if(xe(e)){e.forEach((H,M)=>As(H,t&&(xe(t)?t[M]:t),n,s,o));return}if(Ts(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&As(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Bl(s.component):s.el,r=o?null:i,{i:c,r:a}=e,v=t&&t.r,p=c.refs===Ge?c.refs={}:c.refs,b=c.setupState,R=We(b),E=b===Ge?ka:H=>Ke(R,H);if(v!=null&&v!==a){if(Ti(t),it(v))p[v]=null,E(v)&&(b[v]=null);else if($t(v)){v.value=null;const H=t;H.k&&(p[H.k]=null)}}if(Ae(a))Ws(a,c,12,[r,p]);else{const H=it(a),M=$t(a);if(H||M){const V=()=>{if(e.f){const U=H?E(a)?b[a]:p[a]:a.value;if(o)xe(U)&&zo(U,i);else if(xe(U))U.includes(i)||U.push(i);else if(H)p[a]=[i],E(a)&&(b[a]=p[a]);else{const $=[i];a.value=$,e.k&&(p[e.k]=$)}}else H?(p[a]=r,E(a)&&(b[a]=r)):M&&(a.value=r,e.k&&(p[e.k]=r))};if(r){const U=()=>{V(),kl.delete(e)};U.id=-1,kl.set(e,U),Vt(U,n)}else Ti(e),V()}}}function Ti(e){const t=kl.get(e);t&&(t.flags|=8,kl.delete(e))}Ml().requestIdleCallback;Ml().cancelIdleCallback;const Ts=e=>!!e.type.__asyncLoader,tr=e=>e.type.__isKeepAlive;function nr(e,t){lr(e,"a",t)}function sr(e,t){lr(e,"da",t)}function lr(e,t,n=kt){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Pl(t,s,n),n){let o=n.parent;for(;o&&o.parent;)tr(o.parent.vnode)&&vc(s,t,n,o),o=o.parent}}function vc(e,t,n,s){const o=Pl(t,e,s,!0);Ll(()=>{zo(s[t],o)},n)}function Pl(e,t,n=kt,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{pn();const c=qs(n),a=nn(t,n,e,r);return c(),hn(),a});return s?o.unshift(i):o.push(i),i}}const gn=e=>(t,n=kt)=>{(!Bs||e==="sp")&&Pl(e,(...s)=>t(...s),n)},pc=gn("bm"),Zt=gn("m"),hc=gn("bu"),mc=gn("u"),or=gn("bum"),Ll=gn("um"),gc=gn("sp"),yc=gn("rtg"),_c=gn("rtc");function bc(e,t=kt){Pl("ec",e,t)}const wc="components";function ls(e,t){return $c(wc,e,!0,t)||e}const kc=Symbol.for("v-ndc");function $c(e,t,n=!0,s=!1){const o=Dt||kt;if(o){const i=o.type;{const c=rd(i,!1);if(c&&(c===t||c===Ft(t)||c===Al(Ft(t))))return i}const r=Mi(o[e]||i[e],t)||Mi(o.appContext[e],t);return!r&&s?i:r}}function Mi(e,t){return e&&(e[t]||e[Ft(t)]||e[Al(Ft(t))])}function Te(e,t,n,s){let o;const i=n,r=xe(e);if(r||it(e)){const c=r&&jn(e);let a=!1,v=!1;c&&(a=!Ut(e),v=mn(e),e=Nl(e)),o=new Array(e.length);for(let p=0,b=e.length;p<b;p++)o[p]=t(a?v?ss(Yt(e[p])):Yt(e[p]):e[p],p,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,i)}else if(Ye(e))if(e[Symbol.iterator])o=Array.from(e,(c,a)=>t(c,a,void 0,i));else{const c=Object.keys(e);o=new Array(c.length);for(let a=0,v=c.length;a<v;a++){const p=c[a];o[a]=t(e[p],p,a,i)}}else o=[];return o}const Po=e=>e?Sr(e)?Bl(e):Po(e.parent):null,Ms=St(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Po(e.parent),$root:e=>Po(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ar(e),$forceUpdate:e=>e.f||(e.f=()=>{oi(e.update)}),$nextTick:e=>e.n||(e.n=Ks.bind(e.proxy)),$watch:e=>uc.bind(e)}),bo=(e,t)=>e!==Ge&&!e.__isScriptSetup&&Ke(e,t),Sc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:c,appContext:a}=e;if(t[0]!=="$"){const R=r[t];if(R!==void 0)switch(R){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(bo(s,t))return r[t]=1,s[t];if(o!==Ge&&Ke(o,t))return r[t]=2,o[t];if(Ke(i,t))return r[t]=3,i[t];if(n!==Ge&&Ke(n,t))return r[t]=4,n[t];Lo&&(r[t]=0)}}const v=Ms[t];let p,b;if(v)return t==="$attrs"&&wt(e.attrs,"get",""),v(e);if((p=c.__cssModules)&&(p=p[t]))return p;if(n!==Ge&&Ke(n,t))return r[t]=4,n[t];if(b=a.config.globalProperties,Ke(b,t))return b[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return bo(o,t)?(o[t]=n,!0):s!==Ge&&Ke(s,t)?(s[t]=n,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,props:i,type:r}},c){let a;return!!(n[c]||e!==Ge&&c[0]!=="$"&&Ke(e,c)||bo(t,c)||Ke(i,c)||Ke(s,c)||Ke(Ms,c)||Ke(o.config.globalProperties,c)||(a=r.__cssModules)&&a[c])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ke(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ni(e){return xe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Lo=!0;function xc(e){const t=ar(e),n=e.proxy,s=e.ctx;Lo=!1,t.beforeCreate&&Oi(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:r,watch:c,provide:a,inject:v,created:p,beforeMount:b,mounted:R,beforeUpdate:E,updated:H,activated:M,deactivated:V,beforeDestroy:U,beforeUnmount:$,destroyed:N,unmounted:L,render:A,renderTracked:q,renderTriggered:ve,errorCaptured:Ee,serverPrefetch:ze,expose:qe,inheritAttrs:je,components:st,directives:Ze,filters:Xe}=t;if(v&&Ec(v,s,null),r)for(const oe in r){const X=r[oe];Ae(X)&&(s[oe]=X.bind(n))}if(o){const oe=o.call(n,n);Ye(oe)&&(e.data=Fs(oe))}if(Lo=!0,i)for(const oe in i){const X=i[oe],_e=Ae(X)?X.bind(n,n):Ae(X.get)?X.get.bind(n,n):en,Ce=!Ae(X)&&Ae(X.set)?X.set.bind(n):en,be=re({get:_e,set:Ce});Object.defineProperty(s,oe,{enumerable:!0,configurable:!0,get:()=>be.value,set:Re=>be.value=Re})}if(c)for(const oe in c)ir(c[oe],s,n,oe);if(a){const oe=Ae(a)?a.call(n):a;Reflect.ownKeys(oe).forEach(X=>{hl(X,oe[X])})}p&&Oi(p,e,"c");function Q(oe,X){xe(X)?X.forEach(_e=>oe(_e.bind(n))):X&&oe(X.bind(n))}if(Q(pc,b),Q(Zt,R),Q(hc,E),Q(mc,H),Q(nr,M),Q(sr,V),Q(bc,Ee),Q(_c,q),Q(yc,ve),Q(or,$),Q(Ll,L),Q(gc,ze),xe(qe))if(qe.length){const oe=e.exposed||(e.exposed={});qe.forEach(X=>{Object.defineProperty(oe,X,{get:()=>n[X],set:_e=>n[X]=_e,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===en&&(e.render=A),je!=null&&(e.inheritAttrs=je),st&&(e.components=st),Ze&&(e.directives=Ze),ze&&er(e)}function Ec(e,t,n=en){xe(e)&&(e=Vo(e));for(const s in e){const o=e[s];let i;Ye(o)?"default"in o?i=jt(o.from||s,o.default,!0):i=jt(o.from||s):i=jt(o),$t(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[s]=i}}function Oi(e,t,n){nn(xe(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function ir(e,t,n,s){let o=s.includes(".")?Xa(n,s):()=>n[s];if(it(e)){const i=t[e];Ae(i)&&ft(o,i)}else if(Ae(e))ft(o,e.bind(n));else if(Ye(e))if(xe(e))e.forEach(i=>ir(i,t,n,s));else{const i=Ae(e.handler)?e.handler.bind(n):t[e.handler];Ae(i)&&ft(o,i,e)}}function ar(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,c=i.get(t);let a;return c?a=c:!o.length&&!n&&!s?a=t:(a={},o.length&&o.forEach(v=>$l(a,v,r,!0)),$l(a,t,r)),Ye(t)&&i.set(t,a),a}function $l(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&$l(e,i,n,!0),o&&o.forEach(r=>$l(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const c=Cc[r]||n&&n[r];e[r]=c?c(e[r],t[r]):t[r]}return e}const Cc={data:Pi,props:Li,emits:Li,methods:Es,computed:Es,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:Es,directives:Es,watch:Ic,provide:Pi,inject:Rc};function Pi(e,t){return t?e?function(){return St(Ae(e)?e.call(this,this):e,Ae(t)?t.call(this,this):t)}:t:e}function Rc(e,t){return Es(Vo(e),Vo(t))}function Vo(e){if(xe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function At(e,t){return e?[...new Set([].concat(e,t))]:t}function Es(e,t){return e?St(Object.create(null),e,t):t}function Li(e,t){return e?xe(e)&&xe(t)?[...new Set([...e,...t])]:St(Object.create(null),Ni(e),Ni(t??{})):t}function Ic(e,t){if(!e)return t;if(!t)return e;const n=St(Object.create(null),e);for(const s in t)n[s]=At(e[s],t[s]);return n}function rr(){return{app:null,config:{isNativeTag:ka,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ac=0;function Tc(e,t){return function(s,o=null){Ae(s)||(s=St({},s)),o!=null&&!Ye(o)&&(o=null);const i=rr(),r=new WeakSet,c=[];let a=!1;const v=i.app={_uid:Ac++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:cd,get config(){return i.config},set config(p){},use(p,...b){return r.has(p)||(p&&Ae(p.install)?(r.add(p),p.install(v,...b)):Ae(p)&&(r.add(p),p(v,...b))),v},mixin(p){return i.mixins.includes(p)||i.mixins.push(p),v},component(p,b){return b?(i.components[p]=b,v):i.components[p]},directive(p,b){return b?(i.directives[p]=b,v):i.directives[p]},mount(p,b,R){if(!a){const E=v._ceVNode||Ue(s,o);return E.appContext=i,R===!0?R="svg":R===!1&&(R=void 0),e(E,p,R),a=!0,v._container=p,p.__vue_app__=v,Bl(E.component)}},onUnmount(p){c.push(p)},unmount(){a&&(nn(c,v._instance,16),e(null,v._container),delete v._container.__vue_app__)},provide(p,b){return i.provides[p]=b,v},runWithContext(p){const b=ns;ns=v;try{return p()}finally{ns=b}}};return v}}let ns=null;const Mc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ft(t)}Modifiers`]||e[`${Tn(t)}Modifiers`];function Nc(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Ge;let o=n;const i=t.startsWith("update:"),r=i&&Mc(s,t.slice(7));r&&(r.trim&&(o=n.map(p=>it(p)?p.trim():p)),r.number&&(o=n.map(Tl)));let c,a=s[c=ho(t)]||s[c=ho(Ft(t))];!a&&i&&(a=s[c=ho(Tn(t))]),a&&nn(a,e,6,o);const v=s[c+"Once"];if(v){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,nn(v,e,6,o)}}const Oc=new WeakMap;function ur(e,t,n=!1){const s=n?Oc:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let r={},c=!1;if(!Ae(e)){const a=v=>{const p=ur(v,t,!0);p&&(c=!0,St(r,p))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!i&&!c?(Ye(e)&&s.set(e,null),null):(xe(i)?i.forEach(a=>r[a]=null):St(r,i),Ye(e)&&s.set(e,r),r)}function Vl(e,t){return!e||!Rl(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,Tn(t))||Ke(e,t))}function Vi(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:c,emit:a,render:v,renderCache:p,props:b,data:R,setupState:E,ctx:H,inheritAttrs:M}=e,V=wl(e);let U,$;try{if(n.shapeFlag&4){const L=o||s,A=L;U=Xt(v.call(A,L,p,b,E,R,H)),$=c}else{const L=t;U=Xt(L.length>1?L(b,{attrs:c,slots:r,emit:a}):L(b,null)),$=t.props?c:Pc(c)}}catch(L){Ns.length=0,Ol(L,e,1),U=Ue(In)}let N=U;if($&&M!==!1){const L=Object.keys($),{shapeFlag:A}=N;L.length&&A&7&&(i&&L.some(Yo)&&($=Lc($,i)),N=os(N,$,!1,!0))}return n.dirs&&(N=os(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&ii(N,n.transition),U=N,wl(V),U}const Pc=e=>{let t;for(const n in e)(n==="class"||n==="style"||Rl(n))&&((t||(t={}))[n]=e[n]);return t},Lc=(e,t)=>{const n={};for(const s in e)(!Yo(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Vc(e,t,n){const{props:s,children:o,component:i}=e,{props:r,children:c,patchFlag:a}=t,v=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?Di(s,r,v):!!r;if(a&8){const p=t.dynamicProps;for(let b=0;b<p.length;b++){const R=p[b];if(r[R]!==s[R]&&!Vl(v,R))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:s===r?!1:s?r?Di(s,r,v):!0:!!r;return!1}function Di(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Vl(n,i))return!0}return!1}function Dc({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const cr={},dr=()=>Object.create(cr),fr=e=>Object.getPrototypeOf(e)===cr;function Bc(e,t,n,s=!1){const o={},i=dr();e.propsDefaults=Object.create(null),vr(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:Wa(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Uc(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,c=We(o),[a]=e.propsOptions;let v=!1;if((s||r>0)&&!(r&16)){if(r&8){const p=e.vnode.dynamicProps;for(let b=0;b<p.length;b++){let R=p[b];if(Vl(e.emitsOptions,R))continue;const E=t[R];if(a)if(Ke(i,R))E!==i[R]&&(i[R]=E,v=!0);else{const H=Ft(R);o[H]=Do(a,c,H,E,e,!1)}else E!==i[R]&&(i[R]=E,v=!0)}}}else{vr(e,t,o,i)&&(v=!0);let p;for(const b in c)(!t||!Ke(t,b)&&((p=Tn(b))===b||!Ke(t,p)))&&(a?n&&(n[b]!==void 0||n[p]!==void 0)&&(o[b]=Do(a,c,b,void 0,e,!0)):delete o[b]);if(i!==c)for(const b in i)(!t||!Ke(t,b))&&(delete i[b],v=!0)}v&&dn(e.attrs,"set","")}function vr(e,t,n,s){const[o,i]=e.propsOptions;let r=!1,c;if(t)for(let a in t){if(Cs(a))continue;const v=t[a];let p;o&&Ke(o,p=Ft(a))?!i||!i.includes(p)?n[p]=v:(c||(c={}))[p]=v:Vl(e.emitsOptions,a)||(!(a in s)||v!==s[a])&&(s[a]=v,r=!0)}if(i){const a=We(n),v=c||Ge;for(let p=0;p<i.length;p++){const b=i[p];n[b]=Do(o,a,b,v[b],e,!Ke(v,b))}}return r}function Do(e,t,n,s,o,i){const r=e[n];if(r!=null){const c=Ke(r,"default");if(c&&s===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&Ae(a)){const{propsDefaults:v}=o;if(n in v)s=v[n];else{const p=qs(o);s=v[n]=a.call(null,t),p()}}else s=a;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!c?s=!1:r[1]&&(s===""||s===Tn(n))&&(s=!0))}return s}const jc=new WeakMap;function pr(e,t,n=!1){const s=n?jc:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,r={},c=[];let a=!1;if(!Ae(e)){const p=b=>{a=!0;const[R,E]=pr(b,t,!0);St(r,R),E&&c.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!i&&!a)return Ye(e)&&s.set(e,Qn),Qn;if(xe(i))for(let p=0;p<i.length;p++){const b=Ft(i[p]);Bi(b)&&(r[b]=Ge)}else if(i)for(const p in i){const b=Ft(p);if(Bi(b)){const R=i[p],E=r[b]=xe(R)||Ae(R)?{type:R}:St({},R),H=E.type;let M=!1,V=!0;if(xe(H))for(let U=0;U<H.length;++U){const $=H[U],N=Ae($)&&$.name;if(N==="Boolean"){M=!0;break}else N==="String"&&(V=!1)}else M=Ae(H)&&H.name==="Boolean";E[0]=M,E[1]=V,(M||Ke(E,"default"))&&c.push(b)}}const v=[r,c];return Ye(e)&&s.set(e,v),v}function Bi(e){return e[0]!=="$"&&!Cs(e)}const ai=e=>e==="_"||e==="_ctx"||e==="$stable",ri=e=>xe(e)?e.map(Xt):[Xt(e)],Hc=(e,t,n)=>{if(t._n)return t;const s=bt((...o)=>ri(t(...o)),n);return s._c=!1,s},hr=(e,t,n)=>{const s=e._ctx;for(const o in e){if(ai(o))continue;const i=e[o];if(Ae(i))t[o]=Hc(o,i,s);else if(i!=null){const r=ri(i);t[o]=()=>r}}},mr=(e,t)=>{const n=ri(t);e.slots.default=()=>n},gr=(e,t,n)=>{for(const s in t)(n||!ai(s))&&(e[s]=t[s])},Fc=(e,t,n)=>{const s=e.slots=dr();if(e.vnode.shapeFlag&32){const o=t._;o?(gr(s,t,n),n&&Ea(s,"_",o,!0)):hr(t,s)}else t&&mr(e,t)},Wc=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,r=Ge;if(s.shapeFlag&32){const c=t._;c?n&&c===1?i=!1:gr(o,t,n):(i=!t.$stable,hr(t,o)),r=t}else t&&(mr(e,t),r={default:1});if(i)for(const c in o)!ai(c)&&r[c]==null&&delete o[c]},Vt=zc;function Kc(e){return qc(e)}function qc(e,t){const n=Ml();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:r,createText:c,createComment:a,setText:v,setElementText:p,parentNode:b,nextSibling:R,setScopeId:E=en,insertStaticContent:H}=e,M=(_,k,I,j=null,F=null,W=null,le=void 0,ee=null,te=!!k.dynamicChildren)=>{if(_===k)return;_&&!$s(_,k)&&(j=S(_),Re(_,F,W,!0),_=null),k.patchFlag===-2&&(te=!1,k.dynamicChildren=null);const{type:z,ref:ye,shapeFlag:ie}=k;switch(z){case Dl:V(_,k,I,j);break;case In:U(_,k,I,j);break;case ml:_==null&&$(k,I,j,le);break;case fe:st(_,k,I,j,F,W,le,ee,te);break;default:ie&1?A(_,k,I,j,F,W,le,ee,te):ie&6?Ze(_,k,I,j,F,W,le,ee,te):(ie&64||ie&128)&&z.process(_,k,I,j,F,W,le,ee,te,se)}ye!=null&&F?As(ye,_&&_.ref,W,k||_,!k):ye==null&&_&&_.ref!=null&&As(_.ref,null,W,_,!0)},V=(_,k,I,j)=>{if(_==null)s(k.el=c(k.children),I,j);else{const F=k.el=_.el;k.children!==_.children&&v(F,k.children)}},U=(_,k,I,j)=>{_==null?s(k.el=a(k.children||""),I,j):k.el=_.el},$=(_,k,I,j)=>{[_.el,_.anchor]=H(_.children,k,I,j,_.el,_.anchor)},N=({el:_,anchor:k},I,j)=>{let F;for(;_&&_!==k;)F=R(_),s(_,I,j),_=F;s(k,I,j)},L=({el:_,anchor:k})=>{let I;for(;_&&_!==k;)I=R(_),o(_),_=I;o(k)},A=(_,k,I,j,F,W,le,ee,te)=>{if(k.type==="svg"?le="svg":k.type==="math"&&(le="mathml"),_==null)q(k,I,j,F,W,le,ee,te);else{const z=_.el&&_.el._isVueCE?_.el:null;try{z&&z._beginPatch(),ze(_,k,F,W,le,ee,te)}finally{z&&z._endPatch()}}},q=(_,k,I,j,F,W,le,ee)=>{let te,z;const{props:ye,shapeFlag:ie,transition:pe,dirs:Se}=_;if(te=_.el=r(_.type,W,ye&&ye.is,ye),ie&8?p(te,_.children):ie&16&&Ee(_.children,te,null,j,F,wo(_,W),le,ee),Se&&Ln(_,null,j,"created"),ve(te,_,_.scopeId,le,j),ye){for(const He in ye)He!=="value"&&!Cs(He)&&i(te,He,null,ye[He],W,j);"value"in ye&&i(te,"value",null,ye.value,W),(z=ye.onVnodeBeforeMount)&&Jt(z,j,_)}Se&&Ln(_,null,j,"beforeMount");const Ne=Gc(F,pe);Ne&&pe.beforeEnter(te),s(te,k,I),((z=ye&&ye.onVnodeMounted)||Ne||Se)&&Vt(()=>{z&&Jt(z,j,_),Ne&&pe.enter(te),Se&&Ln(_,null,j,"mounted")},F)},ve=(_,k,I,j,F)=>{if(I&&E(_,I),j)for(let W=0;W<j.length;W++)E(_,j[W]);if(F){let W=F.subTree;if(k===W||wr(W.type)&&(W.ssContent===k||W.ssFallback===k)){const le=F.vnode;ve(_,le,le.scopeId,le.slotScopeIds,F.parent)}}},Ee=(_,k,I,j,F,W,le,ee,te=0)=>{for(let z=te;z<_.length;z++){const ye=_[z]=ee?En(_[z]):Xt(_[z]);M(null,ye,k,I,j,F,W,le,ee)}},ze=(_,k,I,j,F,W,le)=>{const ee=k.el=_.el;let{patchFlag:te,dynamicChildren:z,dirs:ye}=k;te|=_.patchFlag&16;const ie=_.props||Ge,pe=k.props||Ge;let Se;if(I&&Vn(I,!1),(Se=pe.onVnodeBeforeUpdate)&&Jt(Se,I,k,_),ye&&Ln(k,_,I,"beforeUpdate"),I&&Vn(I,!0),(ie.innerHTML&&pe.innerHTML==null||ie.textContent&&pe.textContent==null)&&p(ee,""),z?qe(_.dynamicChildren,z,ee,I,j,wo(k,F),W):le||X(_,k,ee,null,I,j,wo(k,F),W,!1),te>0){if(te&16)je(ee,ie,pe,I,F);else if(te&2&&ie.class!==pe.class&&i(ee,"class",null,pe.class,F),te&4&&i(ee,"style",ie.style,pe.style,F),te&8){const Ne=k.dynamicProps;for(let He=0;He<Ne.length;He++){const Be=Ne[He],vt=ie[Be],pt=pe[Be];(pt!==vt||Be==="value")&&i(ee,Be,vt,pt,F,I)}}te&1&&_.children!==k.children&&p(ee,k.children)}else!le&&z==null&&je(ee,ie,pe,I,F);((Se=pe.onVnodeUpdated)||ye)&&Vt(()=>{Se&&Jt(Se,I,k,_),ye&&Ln(k,_,I,"updated")},j)},qe=(_,k,I,j,F,W,le)=>{for(let ee=0;ee<k.length;ee++){const te=_[ee],z=k[ee],ye=te.el&&(te.type===fe||!$s(te,z)||te.shapeFlag&198)?b(te.el):I;M(te,z,ye,null,j,F,W,le,!0)}},je=(_,k,I,j,F)=>{if(k!==I){if(k!==Ge)for(const W in k)!Cs(W)&&!(W in I)&&i(_,W,k[W],null,F,j);for(const W in I){if(Cs(W))continue;const le=I[W],ee=k[W];le!==ee&&W!=="value"&&i(_,W,ee,le,F,j)}"value"in I&&i(_,"value",k.value,I.value,F)}},st=(_,k,I,j,F,W,le,ee,te)=>{const z=k.el=_?_.el:c(""),ye=k.anchor=_?_.anchor:c("");let{patchFlag:ie,dynamicChildren:pe,slotScopeIds:Se}=k;Se&&(ee=ee?ee.concat(Se):Se),_==null?(s(z,I,j),s(ye,I,j),Ee(k.children||[],I,ye,F,W,le,ee,te)):ie>0&&ie&64&&pe&&_.dynamicChildren&&_.dynamicChildren.length===pe.length?(qe(_.dynamicChildren,pe,I,F,W,le,ee),(k.key!=null||F&&k===F.subTree)&&yr(_,k,!0)):X(_,k,I,ye,F,W,le,ee,te)},Ze=(_,k,I,j,F,W,le,ee,te)=>{k.slotScopeIds=ee,_==null?k.shapeFlag&512?F.ctx.activate(k,I,j,le,te):Xe(k,I,j,F,W,le,te):ue(_,k,te)},Xe=(_,k,I,j,F,W,le)=>{const ee=_.component=nd(_,j,F);if(tr(_)&&(ee.ctx.renderer=se),ld(ee,!1,le),ee.asyncDep){if(F&&F.registerDep(ee,Q,le),!_.el){const te=ee.subTree=Ue(In);U(null,te,k,I),_.placeholder=te.el}}else Q(ee,_,k,I,F,W,le)},ue=(_,k,I)=>{const j=k.component=_.component;if(Vc(_,k,I))if(j.asyncDep&&!j.asyncResolved){oe(j,k,I);return}else j.next=k,j.update();else k.el=_.el,j.vnode=k},Q=(_,k,I,j,F,W,le)=>{const ee=()=>{if(_.isMounted){let{next:ie,bu:pe,u:Se,parent:Ne,vnode:He}=_;{const Et=_r(_);if(Et){ie&&(ie.el=He.el,oe(_,ie,le)),Et.asyncDep.then(()=>{_.isUnmounted||ee()});return}}let Be=ie,vt;Vn(_,!1),ie?(ie.el=He.el,oe(_,ie,le)):ie=He,pe&&pl(pe),(vt=ie.props&&ie.props.onVnodeBeforeUpdate)&&Jt(vt,Ne,ie,He),Vn(_,!0);const pt=Vi(_),Nt=_.subTree;_.subTree=pt,M(Nt,pt,b(Nt.el),S(Nt),_,F,W),ie.el=pt.el,Be===null&&Dc(_,pt.el),Se&&Vt(Se,F),(vt=ie.props&&ie.props.onVnodeUpdated)&&Vt(()=>Jt(vt,Ne,ie,He),F)}else{let ie;const{el:pe,props:Se}=k,{bm:Ne,m:He,parent:Be,root:vt,type:pt}=_,Nt=Ts(k);Vn(_,!1),Ne&&pl(Ne),!Nt&&(ie=Se&&Se.onVnodeBeforeMount)&&Jt(ie,Be,k),Vn(_,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(pt);const Et=_.subTree=Vi(_);M(null,Et,I,j,_,F,W),k.el=Et.el}if(He&&Vt(He,F),!Nt&&(ie=Se&&Se.onVnodeMounted)){const Et=k;Vt(()=>Jt(ie,Be,Et),F)}(k.shapeFlag&256||Be&&Ts(Be.vnode)&&Be.vnode.shapeFlag&256)&&_.a&&Vt(_.a,F),_.isMounted=!0,k=I=j=null}};_.scope.on();const te=_.effect=new Aa(ee);_.scope.off();const z=_.update=te.run.bind(te),ye=_.job=te.runIfDirty.bind(te);ye.i=_,ye.id=_.uid,te.scheduler=()=>oi(ye),Vn(_,!0),z()},oe=(_,k,I)=>{k.component=_;const j=_.vnode.props;_.vnode=k,_.next=null,Uc(_,k.props,j,I),Wc(_,k.children,I),pn(),Ai(_),hn()},X=(_,k,I,j,F,W,le,ee,te=!1)=>{const z=_&&_.children,ye=_?_.shapeFlag:0,ie=k.children,{patchFlag:pe,shapeFlag:Se}=k;if(pe>0){if(pe&128){Ce(z,ie,I,j,F,W,le,ee,te);return}else if(pe&256){_e(z,ie,I,j,F,W,le,ee,te);return}}Se&8?(ye&16&&ne(z,F,W),ie!==z&&p(I,ie)):ye&16?Se&16?Ce(z,ie,I,j,F,W,le,ee,te):ne(z,F,W,!0):(ye&8&&p(I,""),Se&16&&Ee(ie,I,j,F,W,le,ee,te))},_e=(_,k,I,j,F,W,le,ee,te)=>{_=_||Qn,k=k||Qn;const z=_.length,ye=k.length,ie=Math.min(z,ye);let pe;for(pe=0;pe<ie;pe++){const Se=k[pe]=te?En(k[pe]):Xt(k[pe]);M(_[pe],Se,I,null,F,W,le,ee,te)}z>ye?ne(_,F,W,!0,!1,ie):Ee(k,I,j,F,W,le,ee,te,ie)},Ce=(_,k,I,j,F,W,le,ee,te)=>{let z=0;const ye=k.length;let ie=_.length-1,pe=ye-1;for(;z<=ie&&z<=pe;){const Se=_[z],Ne=k[z]=te?En(k[z]):Xt(k[z]);if($s(Se,Ne))M(Se,Ne,I,null,F,W,le,ee,te);else break;z++}for(;z<=ie&&z<=pe;){const Se=_[ie],Ne=k[pe]=te?En(k[pe]):Xt(k[pe]);if($s(Se,Ne))M(Se,Ne,I,null,F,W,le,ee,te);else break;ie--,pe--}if(z>ie){if(z<=pe){const Se=pe+1,Ne=Se<ye?k[Se].el:j;for(;z<=pe;)M(null,k[z]=te?En(k[z]):Xt(k[z]),I,Ne,F,W,le,ee,te),z++}}else if(z>pe)for(;z<=ie;)Re(_[z],F,W,!0),z++;else{const Se=z,Ne=z,He=new Map;for(z=Ne;z<=pe;z++){const gt=k[z]=te?En(k[z]):Xt(k[z]);gt.key!=null&&He.set(gt.key,z)}let Be,vt=0;const pt=pe-Ne+1;let Nt=!1,Et=0;const yt=new Array(pt);for(z=0;z<pt;z++)yt[z]=0;for(z=Se;z<=ie;z++){const gt=_[z];if(vt>=pt){Re(gt,F,W,!0);continue}let Ot;if(gt.key!=null)Ot=He.get(gt.key);else for(Be=Ne;Be<=pe;Be++)if(yt[Be-Ne]===0&&$s(gt,k[Be])){Ot=Be;break}Ot===void 0?Re(gt,F,W,!0):(yt[Ot-Ne]=z+1,Ot>=Et?Et=Ot:Nt=!0,M(gt,k[Ot],I,null,F,W,le,ee,te),vt++)}const yn=Nt?Yc(yt):Qn;for(Be=yn.length-1,z=pt-1;z>=0;z--){const gt=Ne+z,Ot=k[gt],Fn=k[gt+1],_n=gt+1<ye?Fn.el||br(Fn):j;yt[z]===0?M(null,Ot,I,_n,F,W,le,ee,te):Nt&&(Be<0||z!==yn[Be]?be(Ot,I,_n,2):Be--)}}},be=(_,k,I,j,F=null)=>{const{el:W,type:le,transition:ee,children:te,shapeFlag:z}=_;if(z&6){be(_.component.subTree,k,I,j);return}if(z&128){_.suspense.move(k,I,j);return}if(z&64){le.move(_,k,I,se);return}if(le===fe){s(W,k,I);for(let ie=0;ie<te.length;ie++)be(te[ie],k,I,j);s(_.anchor,k,I);return}if(le===ml){N(_,k,I);return}if(j!==2&&z&1&&ee)if(j===0)ee.beforeEnter(W),s(W,k,I),Vt(()=>ee.enter(W),F);else{const{leave:ie,delayLeave:pe,afterLeave:Se}=ee,Ne=()=>{_.ctx.isUnmounted?o(W):s(W,k,I)},He=()=>{W._isLeaving&&W[fc](!0),ie(W,()=>{Ne(),Se&&Se()})};pe?pe(W,Ne,He):He()}else s(W,k,I)},Re=(_,k,I,j=!1,F=!1)=>{const{type:W,props:le,ref:ee,children:te,dynamicChildren:z,shapeFlag:ye,patchFlag:ie,dirs:pe,cacheIndex:Se}=_;if(ie===-2&&(F=!1),ee!=null&&(pn(),As(ee,null,I,_,!0),hn()),Se!=null&&(k.renderCache[Se]=void 0),ye&256){k.ctx.deactivate(_);return}const Ne=ye&1&&pe,He=!Ts(_);let Be;if(He&&(Be=le&&le.onVnodeBeforeUnmount)&&Jt(Be,k,_),ye&6)B(_.component,I,j);else{if(ye&128){_.suspense.unmount(I,j);return}Ne&&Ln(_,null,k,"beforeUnmount"),ye&64?_.type.remove(_,k,I,se,j):z&&!z.hasOnce&&(W!==fe||ie>0&&ie&64)?ne(z,k,I,!1,!0):(W===fe&&ie&384||!F&&ye&16)&&ne(te,k,I),j&&Pe(_)}(He&&(Be=le&&le.onVnodeUnmounted)||Ne)&&Vt(()=>{Be&&Jt(Be,k,_),Ne&&Ln(_,null,k,"unmounted")},I)},Pe=_=>{const{type:k,el:I,anchor:j,transition:F}=_;if(k===fe){D(I,j);return}if(k===ml){L(_);return}const W=()=>{o(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(_.shapeFlag&1&&F&&!F.persisted){const{leave:le,delayLeave:ee}=F,te=()=>le(I,W);ee?ee(_.el,W,te):te()}else W()},D=(_,k)=>{let I;for(;_!==k;)I=R(_),o(_),_=I;o(k)},B=(_,k,I)=>{const{bum:j,scope:F,job:W,subTree:le,um:ee,m:te,a:z}=_;Ui(te),Ui(z),j&&pl(j),F.stop(),W&&(W.flags|=8,Re(le,_,k,I)),ee&&Vt(ee,k),Vt(()=>{_.isUnmounted=!0},k)},ne=(_,k,I,j=!1,F=!1,W=0)=>{for(let le=W;le<_.length;le++)Re(_[le],k,I,j,F)},S=_=>{if(_.shapeFlag&6)return S(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const k=R(_.anchor||_.el),I=k&&k[cc];return I?R(I):k};let Z=!1;const K=(_,k,I)=>{let j;_==null?k._vnode&&(Re(k._vnode,null,null,!0),j=k._vnode.component):M(k._vnode||null,_,k,null,null,null,I),k._vnode=_,Z||(Z=!0,Ai(j),za(),Z=!1)},se={p:M,um:Re,m:be,r:Pe,mt:Xe,mc:Ee,pc:X,pbc:qe,n:S,o:e};return{render:K,hydrate:void 0,createApp:Tc(K)}}function wo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Vn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Gc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yr(e,t,n=!1){const s=e.children,o=t.children;if(xe(s)&&xe(o))for(let i=0;i<s.length;i++){const r=s[i];let c=o[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[i]=En(o[i]),c.el=r.el),!n&&c.patchFlag!==-2&&yr(r,c)),c.type===Dl&&(c.patchFlag!==-1?c.el=r.el:c.__elIndex=i+(e.type===fe?1:0)),c.type===In&&!c.el&&(c.el=r.el)}}function Yc(e){const t=e.slice(),n=[0];let s,o,i,r,c;const a=e.length;for(s=0;s<a;s++){const v=e[s];if(v!==0){if(o=n[n.length-1],e[o]<v){t[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)c=i+r>>1,e[n[c]]<v?i=c+1:r=c;v<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function _r(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_r(t)}function Ui(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function br(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?br(t.subTree):null}const wr=e=>e.__isSuspense;function zc(e,t){t&&t.pendingBranch?xe(e)?t.effects.push(...e):t.effects.push(e):ic(e)}const fe=Symbol.for("v-fgt"),Dl=Symbol.for("v-txt"),In=Symbol.for("v-cmt"),ml=Symbol.for("v-stc"),Ns=[];let Bt=null;function h(e=!1){Ns.push(Bt=e?null:[])}function Zc(){Ns.pop(),Bt=Ns[Ns.length-1]||null}let Ds=1;function Sl(e,t=!1){Ds+=e,e<0&&Bt&&t&&(Bt.hasOnce=!0)}function kr(e){return e.dynamicChildren=Ds>0?Bt||Qn:null,Zc(),Ds>0&&Bt&&Bt.push(e),e}function g(e,t,n,s,o,i){return kr(l(e,t,n,s,o,i,!0))}function Bo(e,t,n,s,o){return kr(Ue(e,t,n,s,o,!0))}function xl(e){return e?e.__v_isVNode===!0:!1}function $s(e,t){return e.type===t.type&&e.key===t.key}const $r=({key:e})=>e??null,gl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?it(e)||$t(e)||Ae(e)?{i:Dt,r:e,k:t,f:!!n}:e:null);function l(e,t=null,n=null,s=0,o=null,i=e===fe?0:1,r=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$r(t),ref:t&&gl(t),scopeId:Ja,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Dt};return c?(ui(a,n),i&128&&e.normalize(a)):n&&(a.shapeFlag|=it(n)?8:16),Ds>0&&!r&&Bt&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Bt.push(a),a}const Ue=Jc;function Jc(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===kc)&&(e=In),xl(e)){const c=os(e,t,!0);return n&&ui(c,n),Ds>0&&!i&&Bt&&(c.shapeFlag&6?Bt[Bt.indexOf(e)]=c:Bt.push(c)),c.patchFlag=-2,c}if(ud(e)&&(e=e.__vccOpts),t){t=Qc(t);let{class:c,style:a}=t;c&&!it(c)&&(t.class=Ie(c)),Ye(a)&&(li(a)&&!xe(a)&&(a=St({},a)),t.style=Hs(a))}const r=it(e)?1:wr(e)?128:dc(e)?64:Ye(e)?4:Ae(e)?2:0;return l(e,t,n,s,o,r,i,!0)}function Qc(e){return e?li(e)||fr(e)?St({},e):e:null}function os(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:c,transition:a}=e,v=t?Xc(o||{},t):o,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:v,key:v&&$r(v),ref:t&&t.ref?n&&i?xe(i)?i.concat(gl(t)):[i,gl(t)]:gl(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&os(e.ssContent),ssFallback:e.ssFallback&&os(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&ii(p,a.clone(p)),p}function tt(e=" ",t=0){return Ue(Dl,null,e,t)}function is(e,t){const n=Ue(ml,null,e);return n.staticCount=t,n}function J(e="",t=!1){return t?(h(),Bo(In,null,e)):Ue(In,null,e)}function Xt(e){return e==null||typeof e=="boolean"?Ue(In):xe(e)?Ue(fe,null,e.slice()):xl(e)?En(e):Ue(Dl,null,String(e))}function En(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:os(e)}function ui(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(xe(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),ui(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!fr(t)?t._ctx=Dt:o===3&&Dt&&(Dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ae(t)?(t={default:t,_ctx:Dt},n=32):(t=String(t),s&64?(n=16,t=[tt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Xc(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Ie([t.class,s.class]));else if(o==="style")t.style=Hs([t.style,s.style]);else if(Rl(o)){const i=t[o],r=s[o];r&&i!==r&&!(xe(i)&&i.includes(r))&&(t[o]=i?[].concat(i,r):r)}else o!==""&&(t[o]=s[o])}return t}function Jt(e,t,n,s=null){nn(e,t,7,[n,s])}const ed=rr();let td=0;function nd(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||ed,i={uid:td++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Au(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pr(s,o),emitsOptions:ur(s,o),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:s.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Nc.bind(null,i),e.ce&&e.ce(i),i}let kt=null;const sd=()=>kt||Dt;let El,Uo;{const e=Ml(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};El=t("__VUE_INSTANCE_SETTERS__",n=>kt=n),Uo=t("__VUE_SSR_SETTERS__",n=>Bs=n)}const qs=e=>{const t=kt;return El(e),e.scope.on(),()=>{e.scope.off(),El(t)}},ji=()=>{kt&&kt.scope.off(),El(null)};function Sr(e){return e.vnode.shapeFlag&4}let Bs=!1;function ld(e,t=!1,n=!1){t&&Uo(t);const{props:s,children:o}=e.vnode,i=Sr(e);Bc(e,s,i,t),Fc(e,o,n||t);const r=i?od(e,t):void 0;return t&&Uo(!1),r}function od(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Sc);const{setup:s}=n;if(s){pn();const o=e.setupContext=s.length>1?ad(e):null,i=qs(e),r=Ws(s,e,0,[e.props,o]),c=$a(r);if(hn(),i(),(c||e.sp)&&!Ts(e)&&er(e),c){if(r.then(ji,ji),t)return r.then(a=>{Hi(e,a)}).catch(a=>{Ol(a,e,0)});e.asyncDep=r}else Hi(e,r)}else xr(e)}function Hi(e,t,n){Ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ye(t)&&(e.setupState=qa(t)),xr(e)}function xr(e,t,n){const s=e.type;e.render||(e.render=s.render||en);{const o=qs(e);pn();try{xc(e)}finally{hn(),o()}}}const id={get(e,t){return wt(e,"get",""),e[t]}};function ad(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,id),slots:e.slots,emit:e.emit,expose:t}}function Bl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(qa(Zu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ms)return Ms[n](e)},has(t,n){return n in t||n in Ms}})):e.proxy}function rd(e,t=!0){return Ae(e)?e.displayName||e.name:e.name||t&&e.__name}function ud(e){return Ae(e)&&"__vccOpts"in e}const re=(e,t)=>tc(e,t,Bs);function Er(e,t,n){try{Sl(-1);const s=arguments.length;return s===2?Ye(t)&&!xe(t)?xl(t)?Ue(e,null,[t]):Ue(e,t):Ue(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&xl(n)&&(n=[n]),Ue(e,t,n))}finally{Sl(1)}}const cd="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jo;const Fi=typeof window<"u"&&window.trustedTypes;if(Fi)try{jo=Fi.createPolicy("vue",{createHTML:e=>e})}catch{}const Cr=jo?e=>jo.createHTML(e):e=>e,dd="http://www.w3.org/2000/svg",fd="http://www.w3.org/1998/Math/MathML",cn=typeof document<"u"?document:null,Wi=cn&&cn.createElement("template"),vd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?cn.createElementNS(dd,e):t==="mathml"?cn.createElementNS(fd,e):n?cn.createElement(e,{is:n}):cn.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>cn.createTextNode(e),createComment:e=>cn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>cn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const r=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Wi.innerHTML=Cr(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const c=Wi.content;if(s==="svg"||s==="mathml"){const a=c.firstChild;for(;a.firstChild;)c.appendChild(a.firstChild);c.removeChild(a)}t.insertBefore(c,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pd=Symbol("_vtc");function hd(e,t,n){const s=e[pd];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Cl=Symbol("_vod"),Rr=Symbol("_vsh"),ko={name:"show",beforeMount(e,{value:t},{transition:n}){e[Cl]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ss(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Ss(e,!0),s.enter(e)):s.leave(e,()=>{Ss(e,!1)}):Ss(e,t))},beforeUnmount(e,{value:t}){Ss(e,t)}};function Ss(e,t){e.style.display=t?e[Cl]:"none",e[Rr]=!t}const md=Symbol(""),gd=/(?:^|;)\s*display\s*:/;function yd(e,t,n){const s=e.style,o=it(n);let i=!1;if(n&&!o){if(t)if(it(t))for(const r of t.split(";")){const c=r.slice(0,r.indexOf(":")).trim();n[c]==null&&yl(s,c,"")}else for(const r in t)n[r]==null&&yl(s,r,"");for(const r in n)r==="display"&&(i=!0),yl(s,r,n[r])}else if(o){if(t!==n){const r=s[md];r&&(n+=";"+r),s.cssText=n,i=gd.test(n)}}else t&&e.removeAttribute("style");Cl in e&&(e[Cl]=i?s.display:"",e[Rr]&&(s.display="none"))}const Ki=/\s*!important$/;function yl(e,t,n){if(xe(n))n.forEach(s=>yl(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=_d(e,t);Ki.test(n)?e.setProperty(Tn(s),n.replace(Ki,""),"important"):e[s]=n}}const qi=["Webkit","Moz","ms"],$o={};function _d(e,t){const n=$o[t];if(n)return n;let s=Ft(t);if(s!=="filter"&&s in e)return $o[t]=s;s=Al(s);for(let o=0;o<qi.length;o++){const i=qi[o]+s;if(i in e)return $o[t]=i}return t}const Gi="http://www.w3.org/1999/xlink";function Yi(e,t,n,s,o,i=Ru(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Gi,t.slice(6,t.length)):e.setAttributeNS(Gi,t,n):n==null||i&&!Ca(n)?e.removeAttribute(t):e.setAttribute(t,i?"":tn(n)?String(n):n)}function zi(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Cr(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(c!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Ca(n):n==null&&c==="string"?(n="",r=!0):c==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(o||t)}function vn(e,t,n,s){e.addEventListener(t,n,s)}function bd(e,t,n,s){e.removeEventListener(t,n,s)}const Zi=Symbol("_vei");function wd(e,t,n,s,o=null){const i=e[Zi]||(e[Zi]={}),r=i[t];if(s&&r)r.value=s;else{const[c,a]=kd(t);if(s){const v=i[t]=xd(s,o);vn(e,c,v,a)}else r&&(bd(e,c,r,a),i[t]=void 0)}}const Ji=/(?:Once|Passive|Capture)$/;function kd(e){let t;if(Ji.test(e)){t={};let s;for(;s=e.match(Ji);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tn(e.slice(2)),t]}let So=0;const $d=Promise.resolve(),Sd=()=>So||($d.then(()=>So=0),So=Date.now());function xd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;nn(Ed(s,n.value),t,5,[s])};return n.value=e,n.attached=Sd(),n}function Ed(e,t){if(xe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Qi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Cd=(e,t,n,s,o,i)=>{const r=o==="svg";t==="class"?hd(e,s,r):t==="style"?yd(e,n,s):Rl(t)?Yo(t)||wd(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Rd(e,t,s,r))?(zi(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Yi(e,t,s,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!it(s))?zi(e,Ft(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Yi(e,t,s,r))};function Rd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qi(t)&&Ae(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Qi(t)&&it(n)?!1:t in e}const An=e=>{const t=e.props["onUpdate:modelValue"]||!1;return xe(t)?n=>pl(t,n):t};function Id(e){e.target.composing=!0}function Xi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ht=Symbol("_assign");function ea(e,t,n){return t&&(e=e.trim()),n&&(e=Tl(e)),e}const $e={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Ht]=An(o);const i=s||o.props&&o.props.type==="number";vn(e,t?"change":"input",r=>{r.target.composing||e[Ht](ea(e.value,n,i))}),(n||i)&&vn(e,"change",()=>{e.value=ea(e.value,n,i)}),t||(vn(e,"compositionstart",Id),vn(e,"compositionend",Xi),vn(e,"change",Xi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},r){if(e[Ht]=An(r),e.composing)return;const c=(i||e.type==="number")&&!/^0\d/.test(e.value)?Tl(e.value):e.value,a=t??"";c!==a&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===a)||(e.value=a))}},xo={deep:!0,created(e,t,n){e[Ht]=An(n),vn(e,"change",()=>{const s=e._modelValue,o=as(e),i=e.checked,r=e[Ht];if(xe(s)){const c=Jo(s,o),a=c!==-1;if(i&&!a)r(s.concat(o));else if(!i&&a){const v=[...s];v.splice(c,1),r(v)}}else if(cs(s)){const c=new Set(s);i?c.add(o):c.delete(o),r(c)}else r(Ir(e,i))})},mounted:ta,beforeUpdate(e,t,n){e[Ht]=An(n),ta(e,t,n)}};function ta(e,{value:t,oldValue:n},s){e._modelValue=t;let o;if(xe(t))o=Jo(t,s.props.value)>-1;else if(cs(t))o=t.has(s.props.value);else{if(t===n)return;o=Hn(t,Ir(e,!0))}e.checked!==o&&(e.checked=o)}const na={created(e,{value:t},n){e.checked=Hn(t,n.props.value),e[Ht]=An(n),vn(e,"change",()=>{e[Ht](as(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[Ht]=An(s),t!==n&&(e.checked=Hn(t,s.props.value))}},Wt={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=cs(t);vn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?Tl(as(r)):as(r));e[Ht](e.multiple?o?new Set(i):i:i[0]),e._assigning=!0,Ks(()=>{e._assigning=!1})}),e[Ht]=An(s)},mounted(e,{value:t}){sa(e,t)},beforeUpdate(e,t,n){e[Ht]=An(n)},updated(e,{value:t}){e._assigning||sa(e,t)}};function sa(e,t){const n=e.multiple,s=xe(t);if(!(n&&!s&&!cs(t))){for(let o=0,i=e.options.length;o<i;o++){const r=e.options[o],c=as(r);if(n)if(s){const a=typeof c;a==="string"||a==="number"?r.selected=t.some(v=>String(v)===String(c)):r.selected=Jo(t,c)>-1}else r.selected=t.has(c);else if(Hn(as(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function as(e){return"_value"in e?e._value:e.value}function Ir(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ad=["ctrl","shift","alt","meta"],Td={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ad.some(n=>e[`${n}Key`]&&!t.includes(n))},mt=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let r=0;r<t.length;r++){const c=Td[t[r]];if(c&&c(o,t))return}return e(o,...i)})},Md={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Nd=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=o=>{if(!("key"in o))return;const i=Tn(o.key);if(t.some(r=>r===i||Md[r]===i))return e(o)})},Od=St({patchProp:Cd},vd);let la;function Pd(){return la||(la=Kc(Od))}const Ld=(...e)=>{const t=Pd().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Dd(s);if(!o)return;const i=t._component;!Ae(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,Vd(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function Vd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Dd(e){return it(e)?document.querySelector(e):e}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Jn=typeof document<"u";function Ar(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Bd(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ar(e.default)}const Fe=Object.assign;function Eo(e,t){const n={};for(const s in t){const o=t[s];n[s]=zt(o)?o.map(e):e(o)}return n}const Os=()=>{},zt=Array.isArray;function oa(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const Tr=/#/g,Ud=/&/g,jd=/\//g,Hd=/=/g,Fd=/\?/g,Mr=/\+/g,Wd=/%5B/g,Kd=/%5D/g,Nr=/%5E/g,qd=/%60/g,Or=/%7B/g,Gd=/%7C/g,Pr=/%7D/g,Yd=/%20/g;function ci(e){return e==null?"":encodeURI(""+e).replace(Gd,"|").replace(Wd,"[").replace(Kd,"]")}function zd(e){return ci(e).replace(Or,"{").replace(Pr,"}").replace(Nr,"^")}function Ho(e){return ci(e).replace(Mr,"%2B").replace(Yd,"+").replace(Tr,"%23").replace(Ud,"%26").replace(qd,"`").replace(Or,"{").replace(Pr,"}").replace(Nr,"^")}function Zd(e){return Ho(e).replace(Hd,"%3D")}function Jd(e){return ci(e).replace(Tr,"%23").replace(Fd,"%3F")}function Qd(e){return Jd(e).replace(jd,"%2F")}function Us(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Xd=/\/$/,ef=e=>e.replace(Xd,"");function Co(e,t,n="/"){let s,o={},i="",r="";const c=t.indexOf("#");let a=t.indexOf("?");return a=c>=0&&a>c?-1:a,a>=0&&(s=t.slice(0,a),i=t.slice(a,c>0?c:t.length),o=e(i.slice(1))),c>=0&&(s=s||t.slice(0,c),r=t.slice(c,t.length)),s=lf(s??t,n),{fullPath:s+i+r,path:s,query:o,hash:Us(r)}}function tf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ia(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function nf(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&rs(t.matched[s],n.matched[o])&&Lr(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function rs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Lr(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!sf(e[n],t[n]))return!1;return!0}function sf(e,t){return zt(e)?aa(e,t):zt(t)?aa(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function aa(e,t){return zt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function lf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let i=n.length-1,r,c;for(r=0;r<s.length;r++)if(c=s[r],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(r).join("/")}const $n={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Fo=function(e){return e.pop="pop",e.push="push",e}({}),Ro=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function of(e){if(!e)if(Jn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ef(e)}const af=/^[^#]+#/;function rf(e,t){return e.replace(af,"#")+t}function uf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ul=()=>({left:window.scrollX,top:window.scrollY});function cf(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=uf(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ra(e,t){return(history.state?history.state.position-t:-1)+e}const Wo=new Map;function df(e,t){Wo.set(e,t)}function ff(e){const t=Wo.get(e);return Wo.delete(e),t}function vf(e){return typeof e=="string"||e&&typeof e=="object"}function Vr(e){return typeof e=="string"||typeof e=="symbol"}let lt=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Dr=Symbol("");lt.MATCHER_NOT_FOUND+"",lt.NAVIGATION_GUARD_REDIRECT+"",lt.NAVIGATION_ABORTED+"",lt.NAVIGATION_CANCELLED+"",lt.NAVIGATION_DUPLICATED+"";function us(e,t){return Fe(new Error,{type:e,[Dr]:!0},t)}function un(e,t){return e instanceof Error&&Dr in e&&(t==null||!!(e.type&t))}const pf=["params","query","hash"];function hf(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of pf)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function mf(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const o=n[s].replace(Mr," "),i=o.indexOf("="),r=Us(i<0?o:o.slice(0,i)),c=i<0?null:Us(o.slice(i+1));if(r in t){let a=t[r];zt(a)||(a=t[r]=[a]),a.push(c)}else t[r]=c}return t}function ua(e){let t="";for(let n in e){const s=e[n];if(n=Zd(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(zt(s)?s.map(o=>o&&Ho(o)):[s&&Ho(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function gf(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=zt(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const Br=Symbol(""),ca=Symbol(""),jl=Symbol(""),di=Symbol(""),Ko=Symbol("");function xs(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yf(e,t,n){const s=()=>{e[t].delete(n)};Ll(s),sr(s),nr(()=>{e[t].add(n)}),e[t].add(n)}function _f(e){const t=jt(Br,{}).value;t&&yf(t,"leaveGuards",e)}function Cn(e,t,n,s,o,i=r=>r()){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((c,a)=>{const v=R=>{R===!1?a(us(lt.NAVIGATION_ABORTED,{from:n,to:t})):R instanceof Error?a(R):vf(R)?a(us(lt.NAVIGATION_GUARD_REDIRECT,{from:t,to:R})):(r&&s.enterCallbacks[o]===r&&typeof R=="function"&&r.push(R),c())},p=i(()=>e.call(s&&s.instances[o],t,n,v));let b=Promise.resolve(p);e.length<3&&(b=b.then(v)),b.catch(R=>a(R))})}function Io(e,t,n,s,o=i=>i()){const i=[];for(const r of e)for(const c in r.components){let a=r.components[c];if(!(t!=="beforeRouteEnter"&&!r.instances[c]))if(Ar(a)){const v=(a.__vccOpts||a)[t];v&&i.push(Cn(v,n,s,r,c,o))}else{let v=a();i.push(()=>v.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${c}" at "${r.path}"`);const b=Bd(p)?p.default:p;r.mods[c]=p,r.components[c]=b;const R=(b.__vccOpts||b)[t];return R&&Cn(R,n,s,r,c,o)()}))}}return i}function bf(e,t){const n=[],s=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let r=0;r<i;r++){const c=t.matched[r];c&&(e.matched.find(v=>rs(v,c))?s.push(c):n.push(c));const a=e.matched[r];a&&(t.matched.find(v=>rs(v,a))||o.push(a))}return[n,s,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let wf=()=>location.protocol+"//"+location.host;function Ur(e,t){const{pathname:n,search:s,hash:o}=t,i=e.indexOf("#");if(i>-1){let r=o.includes(e.slice(i))?e.slice(i).length:1,c=o.slice(r);return c[0]!=="/"&&(c="/"+c),ia(c,"")}return ia(n,e)+s+o}function kf(e,t,n,s){let o=[],i=[],r=null;const c=({state:R})=>{const E=Ur(e,location),H=n.value,M=t.value;let V=0;if(R){if(n.value=E,t.value=R,r&&r===H){r=null;return}V=M?R.position-M.position:0}else s(E);o.forEach(U=>{U(n.value,H,{delta:V,type:Fo.pop,direction:V?V>0?Ro.forward:Ro.back:Ro.unknown})})};function a(){r=n.value}function v(R){o.push(R);const E=()=>{const H=o.indexOf(R);H>-1&&o.splice(H,1)};return i.push(E),E}function p(){if(document.visibilityState==="hidden"){const{history:R}=window;if(!R.state)return;R.replaceState(Fe({},R.state,{scroll:Ul()}),"")}}function b(){for(const R of i)R();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",p),document.removeEventListener("visibilitychange",p)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",p),document.addEventListener("visibilitychange",p),{pauseListeners:a,listen:v,destroy:b}}function da(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?Ul():null}}function $f(e){const{history:t,location:n}=window,s={value:Ur(e,n)},o={value:t.state};o.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(a,v,p){const b=e.indexOf("#"),R=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+a:wf()+e+a;try{t[p?"replaceState":"pushState"](v,"",R),o.value=v}catch(E){console.error(E),n[p?"replace":"assign"](R)}}function r(a,v){i(a,Fe({},t.state,da(o.value.back,a,o.value.forward,!0),v,{position:o.value.position}),!0),s.value=a}function c(a,v){const p=Fe({},o.value,t.state,{forward:a,scroll:Ul()});i(p.current,p,!0),i(a,Fe({},da(s.value,a,null),{position:p.position+1},v),!1),s.value=a}return{location:s,state:o,push:c,replace:r}}function Sf(e){e=of(e);const t=$f(e),n=kf(e,t.state,t.location,t.replace);function s(i,r=!0){r||n.pauseListeners(),history.go(i)}const o=Fe({location:"",base:e,go:s,createHref:rf.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}let Bn=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var dt=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(dt||{});const xf={type:Bn.Static,value:""},Ef=/[a-zA-Z0-9_]/;function Cf(e){if(!e)return[[]];if(e==="/")return[[xf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(E){throw new Error(`ERR (${n})/"${v}": ${E}`)}let n=dt.Static,s=n;const o=[];let i;function r(){i&&o.push(i),i=[]}let c=0,a,v="",p="";function b(){v&&(n===dt.Static?i.push({type:Bn.Static,value:v}):n===dt.Param||n===dt.ParamRegExp||n===dt.ParamRegExpEnd?(i.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Bn.Param,value:v,regexp:p,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),v="")}function R(){v+=a}for(;c<e.length;){if(a=e[c++],a==="\\"&&n!==dt.ParamRegExp){s=n,n=dt.EscapeNext;continue}switch(n){case dt.Static:a==="/"?(v&&b(),r()):a===":"?(b(),n=dt.Param):R();break;case dt.EscapeNext:R(),n=s;break;case dt.Param:a==="("?n=dt.ParamRegExp:Ef.test(a)?R():(b(),n=dt.Static,a!=="*"&&a!=="?"&&a!=="+"&&c--);break;case dt.ParamRegExp:a===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+a:n=dt.ParamRegExpEnd:p+=a;break;case dt.ParamRegExpEnd:b(),n=dt.Static,a!=="*"&&a!=="?"&&a!=="+"&&c--,p="";break;default:t("Unknown state");break}}return n===dt.ParamRegExp&&t(`Unfinished custom RegExp for param "${v}"`),b(),r(),o}const fa="[^/]+?",Rf={sensitive:!1,strict:!1,start:!0,end:!0};var Tt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(Tt||{});const If=/[.+*?^${}()[\]/\\]/g;function Af(e,t){const n=Fe({},Rf,t),s=[];let o=n.start?"^":"";const i=[];for(const v of e){const p=v.length?[]:[Tt.Root];n.strict&&!v.length&&(o+="/");for(let b=0;b<v.length;b++){const R=v[b];let E=Tt.Segment+(n.sensitive?Tt.BonusCaseSensitive:0);if(R.type===Bn.Static)b||(o+="/"),o+=R.value.replace(If,"\\$&"),E+=Tt.Static;else if(R.type===Bn.Param){const{value:H,repeatable:M,optional:V,regexp:U}=R;i.push({name:H,repeatable:M,optional:V});const $=U||fa;if($!==fa){E+=Tt.BonusCustomRegExp;try{`${$}`}catch(L){throw new Error(`Invalid custom RegExp for param "${H}" (${$}): `+L.message)}}let N=M?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;b||(N=V&&v.length<2?`(?:/${N})`:"/"+N),V&&(N+="?"),o+=N,E+=Tt.Dynamic,V&&(E+=Tt.BonusOptional),M&&(E+=Tt.BonusRepeatable),$===".*"&&(E+=Tt.BonusWildcard)}p.push(E)}s.push(p)}if(n.strict&&n.end){const v=s.length-1;s[v][s[v].length-1]+=Tt.BonusStrict}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,n.sensitive?"":"i");function c(v){const p=v.match(r),b={};if(!p)return null;for(let R=1;R<p.length;R++){const E=p[R]||"",H=i[R-1];b[H.name]=E&&H.repeatable?E.split("/"):E}return b}function a(v){let p="",b=!1;for(const R of e){(!b||!p.endsWith("/"))&&(p+="/"),b=!1;for(const E of R)if(E.type===Bn.Static)p+=E.value;else if(E.type===Bn.Param){const{value:H,repeatable:M,optional:V}=E,U=H in v?v[H]:"";if(zt(U)&&!M)throw new Error(`Provided param "${H}" is an array but it is not repeatable (* or + modifiers)`);const $=zt(U)?U.join("/"):U;if(!$)if(V)R.length<2&&(p.endsWith("/")?p=p.slice(0,-1):b=!0);else throw new Error(`Missing required param "${H}"`);p+=$}}return p||"/"}return{re:r,score:s,keys:i,parse:c,stringify:a}}function Tf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Tt.Static+Tt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Tt.Static+Tt.Segment?1:-1:0}function jr(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const i=Tf(s[n],o[n]);if(i)return i;n++}if(Math.abs(o.length-s.length)===1){if(va(s))return 1;if(va(o))return-1}return o.length-s.length}function va(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Mf={strict:!1,end:!0,sensitive:!1};function Nf(e,t,n){const s=Af(Cf(e.path),n),o=Fe(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Of(e,t){const n=[],s=new Map;t=oa(Mf,t);function o(b){return s.get(b)}function i(b,R,E){const H=!E,M=ha(b);M.aliasOf=E&&E.record;const V=oa(t,b),U=[M];if("alias"in b){const L=typeof b.alias=="string"?[b.alias]:b.alias;for(const A of L)U.push(ha(Fe({},M,{components:E?E.record.components:M.components,path:A,aliasOf:E?E.record:M})))}let $,N;for(const L of U){const{path:A}=L;if(R&&A[0]!=="/"){const q=R.record.path,ve=q[q.length-1]==="/"?"":"/";L.path=R.record.path+(A&&ve+A)}if($=Nf(L,R,V),E?E.alias.push($):(N=N||$,N!==$&&N.alias.push($),H&&b.name&&!ma($)&&r(b.name)),Hr($)&&a($),M.children){const q=M.children;for(let ve=0;ve<q.length;ve++)i(q[ve],$,E&&E.children[ve])}E=E||$}return N?()=>{r(N)}:Os}function r(b){if(Vr(b)){const R=s.get(b);R&&(s.delete(b),n.splice(n.indexOf(R),1),R.children.forEach(r),R.alias.forEach(r))}else{const R=n.indexOf(b);R>-1&&(n.splice(R,1),b.record.name&&s.delete(b.record.name),b.children.forEach(r),b.alias.forEach(r))}}function c(){return n}function a(b){const R=Vf(b,n);n.splice(R,0,b),b.record.name&&!ma(b)&&s.set(b.record.name,b)}function v(b,R){let E,H={},M,V;if("name"in b&&b.name){if(E=s.get(b.name),!E)throw us(lt.MATCHER_NOT_FOUND,{location:b});V=E.record.name,H=Fe(pa(R.params,E.keys.filter(N=>!N.optional).concat(E.parent?E.parent.keys.filter(N=>N.optional):[]).map(N=>N.name)),b.params&&pa(b.params,E.keys.map(N=>N.name))),M=E.stringify(H)}else if(b.path!=null)M=b.path,E=n.find(N=>N.re.test(M)),E&&(H=E.parse(M),V=E.record.name);else{if(E=R.name?s.get(R.name):n.find(N=>N.re.test(R.path)),!E)throw us(lt.MATCHER_NOT_FOUND,{location:b,currentLocation:R});V=E.record.name,H=Fe({},R.params,b.params),M=E.stringify(H)}const U=[];let $=E;for(;$;)U.unshift($.record),$=$.parent;return{name:V,path:M,params:H,matched:U,meta:Lf(U)}}e.forEach(b=>i(b));function p(){n.length=0,s.clear()}return{addRoute:i,resolve:v,removeRoute:r,clearRoutes:p,getRoutes:c,getRecordMatcher:o}}function pa(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ha(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Pf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Pf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function ma(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Lf(e){return e.reduce((t,n)=>Fe(t,n.meta),{})}function Vf(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;jr(e,t[i])<0?s=i:n=i+1}const o=Df(e);return o&&(s=t.lastIndexOf(o,s-1)),s}function Df(e){let t=e;for(;t=t.parent;)if(Hr(t)&&jr(e,t)===0)return t}function Hr({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ga(e){const t=jt(jl),n=jt(di),s=re(()=>{const a=es(e.to);return t.resolve(a)}),o=re(()=>{const{matched:a}=s.value,{length:v}=a,p=a[v-1],b=n.matched;if(!p||!b.length)return-1;const R=b.findIndex(rs.bind(null,p));if(R>-1)return R;const E=ya(a[v-2]);return v>1&&ya(p)===E&&b[b.length-1].path!==E?b.findIndex(rs.bind(null,a[v-2])):R}),i=re(()=>o.value>-1&&Ff(n.params,s.value.params)),r=re(()=>o.value>-1&&o.value===n.matched.length-1&&Lr(n.params,s.value.params));function c(a={}){if(Hf(a)){const v=t[es(e.replace)?"replace":"push"](es(e.to)).catch(Os);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:s,href:re(()=>s.value.href),isActive:i,isExactActive:r,navigate:c}}function Bf(e){return e.length===1?e[0]:e}const Uf=xt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ga,setup(e,{slots:t}){const n=Fs(ga(e)),{options:s}=jt(jl),o=re(()=>({[_a(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[_a(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Bf(t.default(n));return e.custom?i:Er("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),jf=Uf;function Hf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ff(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!zt(o)||o.length!==s.length||s.some((i,r)=>i.valueOf()!==o[r].valueOf()))return!1}return!0}function ya(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _a=(e,t,n)=>e??t??n,Wf=xt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=jt(Ko),o=re(()=>e.route||s.value),i=jt(ca,0),r=re(()=>{let v=es(i);const{matched:p}=o.value;let b;for(;(b=p[v])&&!b.components;)v++;return v}),c=re(()=>o.value.matched[r.value]);hl(ca,re(()=>r.value+1)),hl(Br,c),hl(Ko,o);const a=P();return ft(()=>[a.value,c.value,e.name],([v,p,b],[R,E,H])=>{p&&(p.instances[b]=v,E&&E!==p&&v&&v===R&&(p.leaveGuards.size||(p.leaveGuards=E.leaveGuards),p.updateGuards.size||(p.updateGuards=E.updateGuards))),v&&p&&(!E||!rs(p,E)||!R)&&(p.enterCallbacks[b]||[]).forEach(M=>M(v))},{flush:"post"}),()=>{const v=o.value,p=e.name,b=c.value,R=b&&b.components[p];if(!R)return ba(n.default,{Component:R,route:v});const E=b.props[p],H=E?E===!0?v.params:typeof E=="function"?E(v):E:null,V=Er(R,Fe({},H,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(b.instances[p]=null)},ref:a}));return ba(n.default,{Component:V,route:v})||V}}});function ba(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Kf=Wf;function qf(e){const t=Of(e.routes,e),n=e.parseQuery||mf,s=e.stringifyQuery||ua,o=e.history,i=xs(),r=xs(),c=xs(),a=Ju($n);let v=$n;Jn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Eo.bind(null,S=>""+S),b=Eo.bind(null,Qd),R=Eo.bind(null,Us);function E(S,Z){let K,se;return Vr(S)?(K=t.getRecordMatcher(S),se=Z):se=S,t.addRoute(se,K)}function H(S){const Z=t.getRecordMatcher(S);Z&&t.removeRoute(Z)}function M(){return t.getRoutes().map(S=>S.record)}function V(S){return!!t.getRecordMatcher(S)}function U(S,Z){if(Z=Fe({},Z||a.value),typeof S=="string"){const I=Co(n,S,Z.path),j=t.resolve({path:I.path},Z),F=o.createHref(I.fullPath);return Fe(I,j,{params:R(j.params),hash:Us(I.hash),redirectedFrom:void 0,href:F})}let K;if(S.path!=null)K=Fe({},S,{path:Co(n,S.path,Z.path).path});else{const I=Fe({},S.params);for(const j in I)I[j]==null&&delete I[j];K=Fe({},S,{params:b(I)}),Z.params=b(Z.params)}const se=t.resolve(K,Z),ge=S.hash||"";se.params=p(R(se.params));const _=tf(s,Fe({},S,{hash:zd(ge),path:se.path})),k=o.createHref(_);return Fe({fullPath:_,hash:ge,query:s===ua?gf(S.query):S.query||{}},se,{redirectedFrom:void 0,href:k})}function $(S){return typeof S=="string"?Co(n,S,a.value.path):Fe({},S)}function N(S,Z){if(v!==S)return us(lt.NAVIGATION_CANCELLED,{from:Z,to:S})}function L(S){return ve(S)}function A(S){return L(Fe($(S),{replace:!0}))}function q(S,Z){const K=S.matched[S.matched.length-1];if(K&&K.redirect){const{redirect:se}=K;let ge=typeof se=="function"?se(S,Z):se;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=$(ge):{path:ge},ge.params={}),Fe({query:S.query,hash:S.hash,params:ge.path!=null?{}:S.params},ge)}}function ve(S,Z){const K=v=U(S),se=a.value,ge=S.state,_=S.force,k=S.replace===!0,I=q(K,se);if(I)return ve(Fe($(I),{state:typeof I=="object"?Fe({},ge,I.state):ge,force:_,replace:k}),Z||K);const j=K;j.redirectedFrom=Z;let F;return!_&&nf(s,se,K)&&(F=us(lt.NAVIGATION_DUPLICATED,{to:j,from:se}),be(se,se,!0,!1)),(F?Promise.resolve(F):qe(j,se)).catch(W=>un(W)?un(W,lt.NAVIGATION_GUARD_REDIRECT)?W:Ce(W):X(W,j,se)).then(W=>{if(W){if(un(W,lt.NAVIGATION_GUARD_REDIRECT))return ve(Fe({replace:k},$(W.to),{state:typeof W.to=="object"?Fe({},ge,W.to.state):ge,force:_}),Z||j)}else W=st(j,se,!0,k,ge);return je(j,se,W),W})}function Ee(S,Z){const K=N(S,Z);return K?Promise.reject(K):Promise.resolve()}function ze(S){const Z=D.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(S):S()}function qe(S,Z){let K;const[se,ge,_]=bf(S,Z);K=Io(se.reverse(),"beforeRouteLeave",S,Z);for(const I of se)I.leaveGuards.forEach(j=>{K.push(Cn(j,S,Z))});const k=Ee.bind(null,S,Z);return K.push(k),ne(K).then(()=>{K=[];for(const I of i.list())K.push(Cn(I,S,Z));return K.push(k),ne(K)}).then(()=>{K=Io(ge,"beforeRouteUpdate",S,Z);for(const I of ge)I.updateGuards.forEach(j=>{K.push(Cn(j,S,Z))});return K.push(k),ne(K)}).then(()=>{K=[];for(const I of _)if(I.beforeEnter)if(zt(I.beforeEnter))for(const j of I.beforeEnter)K.push(Cn(j,S,Z));else K.push(Cn(I.beforeEnter,S,Z));return K.push(k),ne(K)}).then(()=>(S.matched.forEach(I=>I.enterCallbacks={}),K=Io(_,"beforeRouteEnter",S,Z,ze),K.push(k),ne(K))).then(()=>{K=[];for(const I of r.list())K.push(Cn(I,S,Z));return K.push(k),ne(K)}).catch(I=>un(I,lt.NAVIGATION_CANCELLED)?I:Promise.reject(I))}function je(S,Z,K){c.list().forEach(se=>ze(()=>se(S,Z,K)))}function st(S,Z,K,se,ge){const _=N(S,Z);if(_)return _;const k=Z===$n,I=Jn?history.state:{};K&&(se||k?o.replace(S.fullPath,Fe({scroll:k&&I&&I.scroll},ge)):o.push(S.fullPath,ge)),a.value=S,be(S,Z,K,k),Ce()}let Ze;function Xe(){Ze||(Ze=o.listen((S,Z,K)=>{if(!B.listening)return;const se=U(S),ge=q(se,B.currentRoute.value);if(ge){ve(Fe(ge,{replace:!0,force:!0}),se).catch(Os);return}v=se;const _=a.value;Jn&&df(ra(_.fullPath,K.delta),Ul()),qe(se,_).catch(k=>un(k,lt.NAVIGATION_ABORTED|lt.NAVIGATION_CANCELLED)?k:un(k,lt.NAVIGATION_GUARD_REDIRECT)?(ve(Fe($(k.to),{force:!0}),se).then(I=>{un(I,lt.NAVIGATION_ABORTED|lt.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Fo.pop&&o.go(-1,!1)}).catch(Os),Promise.reject()):(K.delta&&o.go(-K.delta,!1),X(k,se,_))).then(k=>{k=k||st(se,_,!1),k&&(K.delta&&!un(k,lt.NAVIGATION_CANCELLED)?o.go(-K.delta,!1):K.type===Fo.pop&&un(k,lt.NAVIGATION_ABORTED|lt.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),je(se,_,k)}).catch(Os)}))}let ue=xs(),Q=xs(),oe;function X(S,Z,K){Ce(S);const se=Q.list();return se.length?se.forEach(ge=>ge(S,Z,K)):console.error(S),Promise.reject(S)}function _e(){return oe&&a.value!==$n?Promise.resolve():new Promise((S,Z)=>{ue.add([S,Z])})}function Ce(S){return oe||(oe=!S,Xe(),ue.list().forEach(([Z,K])=>S?K(S):Z()),ue.reset()),S}function be(S,Z,K,se){const{scrollBehavior:ge}=e;if(!Jn||!ge)return Promise.resolve();const _=!K&&ff(ra(S.fullPath,0))||(se||!K)&&history.state&&history.state.scroll||null;return Ks().then(()=>ge(S,Z,_)).then(k=>k&&cf(k)).catch(k=>X(k,S,Z))}const Re=S=>o.go(S);let Pe;const D=new Set,B={currentRoute:a,listening:!0,addRoute:E,removeRoute:H,clearRoutes:t.clearRoutes,hasRoute:V,getRoutes:M,resolve:U,options:e,push:L,replace:A,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:i.add,beforeResolve:r.add,afterEach:c.add,onError:Q.add,isReady:_e,install(S){S.component("RouterLink",jf),S.component("RouterView",Kf),S.config.globalProperties.$router=B,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>es(a)}),Jn&&!Pe&&a.value===$n&&(Pe=!0,L(o.location).catch(se=>{}));const Z={};for(const se in $n)Object.defineProperty(Z,se,{get:()=>a.value[se],enumerable:!0});S.provide(jl,B),S.provide(di,Wa(Z)),S.provide(Ko,a);const K=S.unmount;D.add(S),S.unmount=function(){D.delete(S),D.size<1&&(v=$n,Ze&&Ze(),Ze=null,a.value=$n,Pe=!1,oe=!1),K()}}};function ne(S){return S.reduce((Z,K)=>Z.then(()=>ze(K)),Promise.resolve())}return B}function Hl(){return jt(jl)}function Gs(e){return jt(di)}const Gf={class:"sidebar"},Yf={key:0,class:"brand"},zf={class:"nav"},Zf={class:"sidebar-toggle"},Jf={class:"workflow-group"},Qf={key:0,class:"workflow-card"},Xf={class:"workflow-name"},ev={key:2,class:"workflow-actions"},tv={class:"main"},nv={key:0,class:"topbar"},sv={key:0},lv={class:"title"},ov={key:0,class:"meta"},iv={key:1,class:"title-spacer"},av={class:"actions"},rv=xt({__name:"App",setup(e){const t=Gs(),n=re(()=>String(t.name||"")),s=re(()=>typeof t.params.name=="string"?t.params.name:typeof t.query.workflow=="string"?t.query.workflow:""),o=re(()=>s.value.length>0),i=re(()=>["run-console","workflow-flow"].includes(n.value)),r=re(()=>["workflows","runs","workflow-runs","run-console","envs","validation-envs","scripts","home"].includes(n.value)),c=re(()=>!r.value),a=re(()=>n.value==="home"),v=re(()=>!a.value),p=P(!1),b=re(()=>p.value?"76px":"260px"),R=re(()=>o.value?s.value:n.value==="workflows"?"":n.value==="runs"?"":n.value==="run-console"?"":n.value==="validation-envs"?"":n.value==="scripts"?"":"BOPS"),E=re(()=>o.value&&["workflow","workflow-flow"].includes(n.value)),H=re(()=>o.value);return(M,V)=>{const U=ls("RouterLink"),$=ls("router-view");return h(),g("div",{class:Ie(["app-shell",{collapsed:p.value}]),style:Hs({"--sidebar-width":b.value})},[l("aside",Gf,[a.value?J("",!0):(h(),g("div",Yf,[...V[1]||(V[1]=[l("div",{class:"logo"},"BOPS",-1),l("div",{class:"subtitle"},"",-1)])])),l("nav",zf,[Ue(U,{class:"nav-item","active-class":"active",to:"/"},{default:bt(()=>[...V[2]||(V[2]=[tt("",-1)])]),_:1}),Ue(U,{class:"nav-item","active-class":"active",to:"/workflows"},{default:bt(()=>[...V[3]||(V[3]=[tt("",-1)])]),_:1}),Ue(U,{class:"nav-item","active-class":"active",to:"/envs"},{default:bt(()=>[...V[4]||(V[4]=[tt("",-1)])]),_:1}),Ue(U,{class:"nav-item","active-class":"active",to:"/validation-envs"},{default:bt(()=>[...V[5]||(V[5]=[tt("",-1)])]),_:1}),Ue(U,{class:"nav-item","active-class":"active",to:"/scripts"},{default:bt(()=>[...V[6]||(V[6]=[tt("",-1)])]),_:1}),Ue(U,{class:"nav-item","active-class":"active",to:"/runs"},{default:bt(()=>[...V[7]||(V[7]=[tt("",-1)])]),_:1}),V[8]||(V[8]=l("a",{class:"nav-item",href:"#"},"",-1))]),l("div",Zf,[l("button",{class:"btn ghost",type:"button",onClick:V[0]||(V[0]=N=>p.value=!p.value)},T(p.value?"":""),1)]),l("div",Jf,[V[14]||(V[14]=l("div",{class:"group-title"},"",-1)),o.value?(h(),g("div",Qf,[l("div",Xf,T(s.value),1),V[9]||(V[9]=l("div",{class:"workflow-meta"}," 2 ",-1))])):(h(),Bo(U,{key:1,class:"workflow-empty",to:"/workflows"},{default:bt(()=>[...V[10]||(V[10]=[tt("  ",-1)])]),_:1})),o.value?(h(),g("div",ev,[Ue(U,{class:"nav-item","active-class":"active",to:`/workflows/${s.value}`},{default:bt(()=>[...V[11]||(V[11]=[tt("  ",-1)])]),_:1},8,["to"]),Ue(U,{class:"nav-item","active-class":"active",to:`/workflows/${s.value}/flow`},{default:bt(()=>[...V[12]||(V[12]=[tt("  ",-1)])]),_:1},8,["to"]),Ue(U,{class:"nav-item","active-class":"active",to:`/workflows/${s.value}/runs`},{default:bt(()=>[...V[13]||(V[13]=[tt("  ",-1)])]),_:1},8,["to"])])):J("",!0)])]),l("div",tv,[v.value?(h(),g("header",nv,[c.value?(h(),g("div",sv,[l("div",lv,T(R.value),1),E.value?(h(),g("div",ov,"  2  ")):J("",!0)])):(h(),g("div",iv)),l("div",av,[H.value?(h(),Bo(U,{key:0,class:"btn ghost",to:"/workflows"},{default:bt(()=>[...V[15]||(V[15]=[tt("  ",-1)])]),_:1})):J("",!0)])])):J("",!0),l("main",{class:Ie(["content",{"content-tight":i.value}])},[Ue($)],2)])],6)}}}),Kt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},uv=Kt(rv,[["__scopeId","data-v-3149899d"]]),cv="/api";function Fr(){const e=cv;return e.endsWith("/")?e.slice(0,-1):e}function Wr(){return Fr()}async function Le(e,t={}){const n=`${Fr()}${e}`,s={"Content-Type":"application/json",...t.headers},o=await fetch(n,{method:t.method||"GET",headers:s,body:t.body?JSON.stringify(t.body):void 0,signal:t.signal}),r=(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text();if(!o.ok){const c=typeof r=="string"?r:r.message||r.error||"Request failed";throw{status:o.status,message:c,details:r}}return r}function qo(e){const t=e.split(/\r?\n/),n=[];let s=null,o=!1,i=0,r=!1,c=0,a=!1,v=0,p=[],b=!1,R=0,E=[],H=!1,M=0,V=[];const U=()=>{s&&p.length&&(s.script=p.join(`
`).trim()),p=[]},$=()=>{s&&E.length&&(s.cmd=E.join(`
`).trim()),E=[]},N=()=>{s&&V.length&&(s.targets=`[${V.join(", ")}]`),V=[]};for(let L=0;L<t.length;L+=1){const A=t[L],q=A.match(/^\s*-\s*name\s*:\s*(.+)$/);if(q){a&&U(),b&&$(),H&&N(),s={name:q[1].trim(),action:"",targets:"",cmd:"",dir:"",script:"",scriptRef:"",scriptRefPresent:!1,withName:"",src:"",dest:"",state:"",required:"",line:L},n.push(s),o=!1,r=!1,a=!1,H=!1;continue}if(!s)continue;if(b){const oe=A.match(/^(\s*)/)[1].length;if(A.trim()===""){E.push("");continue}if(oe<=R)$(),b=!1;else{E.push(A.slice(R));continue}}if(a){const oe=A.match(/^(\s*)/)[1].length;if(A.trim()===""){p.push("");continue}if(oe<=v)U(),a=!1;else{p.push(A.slice(v));continue}}if(H){const oe=A.match(/^(\s*)/)[1].length;if(A.trim()==="")continue;if(oe<=M)N(),H=!1;else{const X=A.match(/^\s*-\s*(.+)$/);X&&V.push(It(X[1].trim()));continue}}const ve=A.match(/^(\s*)with\s*:\s*$/);if(ve){o=!0,i=ve[1].length,r=!1;continue}let Ee=!1;if(o){const oe=A.match(/^(\s*)/)[1].length;if(A.trim()==="")Ee=!0;else if(oe<=i)o=!1,r=!1;else{if(Ee=!0,r)if(oe<=c)r=!1;else{const X=A.match(/^\s*([a-zA-Z0-9_-]+)\s*:\s*(.*)$/);X&&(s.env||(s.env={}),s.env[X[1]]=It(X[2].trim()));continue}if(!r){if(A.match(/^\s*env\s*:\s*$/)){r=!0,c=oe,s.env||(s.env={});continue}const _e=A.match(/^\s*cmd\s*:\s*(.+)$/);if(_e){const S=_e[1].trim();S.startsWith("|")||S.startsWith(">")?(b=!0,R=A.match(/^(\s*)/)[1].length+2,E=[]):s.cmd=It(S)}const Ce=A.match(/^\s*dir\s*:\s*(.+)$/);Ce&&(s.dir=It(Ce[1].trim()));const be=A.match(/^\s*name\s*:\s*(.+)$/);be&&(s.withName=It(be[1].trim()));const Re=A.match(/^\s*src\s*:\s*(.+)$/);Re&&(s.src=It(Re[1].trim()));const Pe=A.match(/^\s*dest\s*:\s*(.+)$/);Pe&&(s.dest=It(Pe[1].trim()));const D=A.match(/^\s*state\s*:\s*(.+)$/);D&&(s.state=It(D[1].trim()));const B=A.match(/^\s*script_ref\s*:\s*(.*)$/);B&&(s.scriptRefPresent=!0,s.scriptRef=It(B[1].trim()));const ne=A.match(/^\s*script\s*:\s*(.+)$/);if(ne){const S=ne[1].trim();S.startsWith("|")||S.startsWith(">")?(a=!0,v=A.match(/^(\s*)/)[1].length+2,p=[]):s.script=It(S)}}}}if(Ee)continue;const ze=A.match(/^\s*action\s*:\s*(.+)$/);ze&&(s.action=ze[1].trim());const qe=A.match(/^\s*targets\s*:\s*(.+)$/);qe&&(s.targets=qe[1].trim());const je=A.match(/^(\s*)targets\s*:\s*$/);je&&(H=!0,M=je[1].length,V=[]);const st=A.match(/^\s*when\s*:\s*(.+)$/);st&&(s.when=It(st[1].trim()));const Ze=A.match(/^\s*retries\s*:\s*(.+)$/);Ze&&(s.retries=It(Ze[1].trim()));const Xe=A.match(/^\s*timeout\s*:\s*(.+)$/);Xe&&(s.timeout=It(Xe[1].trim()));const ue=A.match(/^\s*loop\s*:\s*(.+)$/);ue&&(s.loop=It(ue[1].trim()));const Q=A.match(/^\s*notify\s*:\s*(.+)$/);Q&&(s.notify=It(Q[1].trim()))}return a&&U(),b&&$(),H&&N(),n.map(L=>({...L,required:dv(L)}))}function dv(e){if(e.action==="cmd.run"){if(!e.cmd)return"cmd: ";const t=e.cmd.split(/\r?\n/)[0];return`cmd: ${zn(t)}`}if(e.action.startsWith("script.")){if(e.scriptRefPresent)return e.scriptRef?`script_ref: ${e.scriptRef}`:"script_ref: ";if(e.script){const t=e.script.split(/\r?\n/)[0];return`script: ${zn(t)}`}return"script: "}if(e.action==="env.set"){const t=e.env?Object.keys(e.env).length:0;return t?`env: ${t} `:"env: "}return e.action==="pkg.install"?e.withName?`name: ${e.withName}`:"name: ":e.action==="template.render"?e.src&&e.dest?`src: ${zn(e.src)}  ${zn(e.dest)}`:e.src?`src: ${zn(e.src)}`:e.dest?`dest: ${zn(e.dest)}`:"src/dest: ":e.action.startsWith("service.")?e.withName?e.action==="service.ensure"&&e.state?`svc: ${e.withName} (${e.state})`:`svc: ${e.withName}`:"name: ":""}function zn(e,t=36){const n=e.trim();return n.length<=t?n:`${n.slice(0,t)}...`}function It(e){return e.replace(/^['"]|['"]$/g,"")}const fv={key:0,class:"chat-empty"},vv={key:1},pv={class:"bubble-role"},hv={class:"bubble-content"},mv={key:2,class:"chat-bubble assistant typing"},gv={key:3,class:"question-list"},yv={class:"question-chips"},_v=["onClick"],bv=xt({__name:"ChatTimeline",props:{messages:{},assistantTyping:{type:Boolean},pendingQuestions:{}},emits:["suggestion"],setup(e,{emit:t}){const n=e,s=P(null);function o(){const i=s.value;i&&requestAnimationFrame(()=>{i.scrollTop=i.scrollHeight})}return ft(()=>n.messages,()=>{o()},{deep:!0}),Zt(()=>{o()}),(i,r)=>(h(),g("div",{class:"chat-timeline",ref_key:"timelineRef",ref:s},[e.messages.length===0?(h(),g("div",fv," AI  ")):(h(),g("div",vv,[(h(!0),g(fe,null,Te(e.messages,c=>(h(),g("div",{key:c.id,class:Ie(["chat-bubble",c.role])},[l("div",pv,T(c.role==="user"?"":"AI"),1),l("div",hv,T(c.content),1)],2))),128))])),e.assistantTyping?(h(),g("div",mv,[...r[0]||(r[0]=[l("div",{class:"bubble-role"},"AI",-1),l("div",{class:"bubble-content"},"",-1)])])):J("",!0),e.pendingQuestions.length?(h(),g("div",gv,[r[1]||(r[1]=l("div",{class:"question-title"},"",-1)),l("div",yv,[(h(!0),g(fe,null,Te(e.pendingQuestions,c=>(h(),g("button",{key:c,class:"chip",type:"button",onClick:a=>i.$emit("suggestion",c)},T(c),9,_v))),128))])])):J("",!0)],512))}}),wv=Kt(bv,[["__scopeId","data-v-50146d84"]]),kv={class:"summary-card"},$v={class:"summary-header"},Sv={class:"summary-title"},xv={class:"summary-sub"},Ev={class:"summary-tags"},Cv={class:"tag"},Rv={key:0,class:"tag"},Iv={key:1,class:"tag"},Av={class:"summary-body"},Tv={class:"field"},Mv=["value"],Nv={class:"field"},Ov=["value"],Pv={class:"field"},Lv=["value"],Vv={class:"field"},Dv=["value"],Bv={class:"field"},Uv=["value"],jv={class:"field"},Hv=["value"],Fv=["value"],Wv={key:0,class:"field-hint"},Kv={class:"field"},qv=["value"],Gv={class:"field toggle"},Yv={class:"meta-actions"},zv=xt({__name:"RequirementSummaryCard",props:{workflowName:String,workflowDesc:String,targetsInput:String,planMode:{type:String,default:"manual-approve"},envPackagesInput:String,selectedValidationEnv:String,validationEnvs:{type:Array,default:()=>[]},maxRetries:{type:Number,default:2},autoSync:{type:Boolean,default:!0}},setup(e){return(t,n)=>(h(),g("div",kv,[l("div",$v,[l("div",null,[l("div",Sv,T(e.workflowName||""),1),l("div",xv,T(e.workflowDesc||""),1)]),l("div",Ev,[l("span",Cv,T(e.planMode),1),e.selectedValidationEnv?(h(),g("span",Rv,": "+T(e.selectedValidationEnv),1)):J("",!0),e.envPackagesInput?(h(),g("span",Iv,": "+T(e.envPackagesInput),1)):J("",!0)])]),l("div",Av,[l("div",Tv,[n[10]||(n[10]=l("label",null,"",-1)),l("input",{value:e.workflowName,onInput:n[0]||(n[0]=s=>t.$emit("update:workflowName",s.target.value)),type:"text",placeholder:" deploy-nginx"},null,40,Mv)]),l("div",Nv,[n[11]||(n[11]=l("label",null,"",-1)),l("textarea",{value:e.workflowDesc,onInput:n[1]||(n[1]=s=>t.$emit("update:workflowDesc",s.target.value)),rows:"2",placeholder:""},null,40,Ov)]),l("div",Pv,[n[12]||(n[12]=l("label",null,"/",-1)),l("input",{value:e.targetsInput,onInput:n[2]||(n[2]=s=>t.$emit("update:targetsInput",s.target.value)),type:"text",placeholder:"web, db"},null,40,Lv)]),l("div",Vv,[n[14]||(n[14]=l("label",null,"",-1)),l("select",{value:e.planMode,onChange:n[3]||(n[3]=s=>t.$emit("update:planMode",s.target.value))},[...n[13]||(n[13]=[l("option",{value:"manual-approve"},"manual-approve",-1),l("option",{value:"auto"},"auto",-1)])],40,Dv)]),l("div",Bv,[n[15]||(n[15]=l("label",null,"",-1)),l("input",{value:e.envPackagesInput,onInput:n[4]||(n[4]=s=>t.$emit("update:envPackagesInput",s.target.value)),type:"text",placeholder:"prod-env, staging"},null,40,Uv)]),l("div",jv,[n[17]||(n[17]=l("label",null,"",-1)),l("select",{value:e.selectedValidationEnv,onChange:n[5]||(n[5]=s=>t.$emit("update:selectedValidationEnv",s.target.value))},[n[16]||(n[16]=l("option",{value:""},"",-1)),(h(!0),g(fe,null,Te(e.validationEnvs,s=>(h(),g("option",{key:s.name,value:s.name},T(s.name),9,Fv))),128))],40,Hv),e.selectedValidationEnv?J("",!0):(h(),g("div",Wv,""))]),l("div",Kv,[n[18]||(n[18]=l("label",null,"",-1)),l("input",{value:e.maxRetries,onInput:n[6]||(n[6]=s=>t.$emit("update:maxRetries",Number(s.target.value))),type:"number",min:"0",max:"5"},null,40,qv)]),l("div",Gv,[n[19]||(n[19]=l("label",null," YAML",-1)),l("button",{class:Ie(["toggle-btn",e.autoSync?"on":"off"]),type:"button",onClick:n[7]||(n[7]=s=>t.$emit("toggle-auto-sync"))},T(e.autoSync?"":""),3)])]),l("div",Yv,[l("button",{class:"btn",type:"button",onClick:n[8]||(n[8]=s=>t.$emit("apply-draft"))}," YAML"),l("button",{class:"btn ghost",type:"button",onClick:n[9]||(n[9]=s=>t.$emit("apply-yaml"))}," YAML ")])]))}}),Zv=Kt(zv,[["__scopeId","data-v-5556052b"]]),Jv={class:"panel steps-panel"},Qv={class:"steps-actions"},Xv={key:0,class:"empty"},ep={key:1,class:"step-list"},tp=["onClick"],np={class:"step-head"},sp={class:"step-title"},lp={class:"step-meta"},op={class:"step-body"},ip={class:"step-summary"},ap={class:"step-actions"},rp=["onClick"],up=["onClick"],cp=["onClick"],dp=["onClick"],fp=xt({__name:"StepBuilder",props:{steps:{},activeStepId:{},stepIssueIndexes:{},globalTargets:{},validationOk:{type:Boolean},validationTouched:{type:Boolean}},emits:["add-step","apply-targets","duplicate-step","remove-step","open-step","open-step-yaml","select-step"],setup(e,{emit:t}){const n=e,s=t,o=P("cmd.run");function i(){s("add-step",o.value)}function r(a){return n.stepIssueIndexes.includes(a)?"Failed":n.validationTouched&&n.validationOk?"Validated":"Draft"}function c(a){switch(a.action){case"cmd.run":{const v=(a.with.cmd||"").trim(),p=(a.with.dir||"").trim();return v?p?`${v} (dir: ${p})`:v:""}case"pkg.install":{const v=(a.with.packages||"").trim();return v?`: ${v}`:""}case"template.render":{const v=(a.with.src||"").trim(),p=(a.with.dest||"").trim();return!v&&!p?"":`${v||""}  ${p||""}`}case"service.ensure":{const v=(a.with.name||"").trim(),p=(a.with.state||"").trim();return v?`${v} (${p||"state"})`:""}case"script.shell":case"script.python":{const v=(a.with.scriptRef||"").trim();if(v)return`: ${v}`;const p=(a.with.script||"").trim();return p?p.length>48?`${p.slice(0,48)}...`:p:""}case"env.set":{const v=(a.with.envText||"").trim();return v?` ${v.split(/\r?\n/).filter(Boolean).length} `:""}default:return""}}return(a,v)=>(h(),g("div",Jv,[v[3]||(v[3]=l("div",{class:"panel-title"},"",-1)),l("div",Qv,[ae(l("select",{"onUpdate:modelValue":v[0]||(v[0]=p=>o.value=p)},[...v[2]||(v[2]=[is('<option value="cmd.run">cmd.run</option><option value="pkg.install">pkg.install</option><option value="template.render">template.render</option><option value="service.ensure">service.ensure</option><option value="script.shell">script.shell</option><option value="script.python">script.python</option><option value="env.set">env.set</option>',7)])],512),[[Wt,o.value]]),l("button",{class:"btn",type:"button",onClick:i},""),l("button",{class:"btn ghost",type:"button",onClick:v[1]||(v[1]=p=>a.$emit("apply-targets"))},"")]),e.steps.length===0?(h(),g("div",Xv,"")):(h(),g("div",ep,[(h(!0),g(fe,null,Te(e.steps,(p,b)=>(h(),g("div",{key:p.id,class:Ie(["step-card",{active:e.activeStepId===p.id,error:e.stepIssueIndexes.includes(b)}]),onClick:R=>a.$emit("select-step",p.id)},[l("div",np,[l("div",null,[l("div",sp,T(p.name),1),l("div",lp,T(p.action)+"  "+T(p.targets||e.globalTargets||""),1)]),l("div",{class:Ie(["step-status",r(b).toLowerCase()])},T(r(b)),3)]),l("div",op,[l("div",ip,T(c(p)),1)]),l("div",ap,[l("button",{class:"btn",type:"button",onClick:mt(R=>a.$emit("open-step",b),["stop"])},"",8,rp),l("button",{class:"btn ghost",type:"button",onClick:mt(R=>a.$emit("duplicate-step",b),["stop"])},"",8,up),l("button",{class:"btn",type:"button",onClick:mt(R=>a.$emit("open-step-yaml",b),["stop"])}," YAML",8,cp),l("button",{class:"btn danger",type:"button",onClick:mt(R=>a.$emit("remove-step",b),["stop"])},"",8,dp)])],10,tp))),128))]))]))}});function Kr(e){return{cmd:"",dir:"",name:"",state:e==="service.ensure"?"started":"",src:"",dest:"",script:"",scriptRef:"",packages:"",envText:""}}const vp={class:"step-detail"},pp={class:"field"},hp=["value"],mp={class:"field"},gp=["value"],yp={class:"field"},_p=["value"],bp={class:"field"},wp=["value"],kp={class:"field"},$p=["value"],Sp={key:1,class:"field"},xp=["value"],Ep={class:"field"},Cp=["value"],Rp={class:"field"},Ip=["value"],Ap={class:"field"},Tp=["value"],Mp={class:"field"},Np=["value"],Op={class:"field"},Pp=["value"],Lp={class:"field"},Vp=["value"],Dp={key:5,class:"field"},Bp=["value"],Up=xt({__name:"StepDetailForm",props:{step:{}},emits:["update-step"],setup(e,{emit:t}){const n=e,s=t;function o(a){s("update-step",{...n.step,...a,with:{...n.step.with,...a.with||{}}})}function i(a,v){(a==="name"||a==="targets"||a==="action")&&o({[a]:v})}function r(a,v){o({with:{[a]:v}})}function c(a){const v=a.target.value;o({action:v,with:Kr(v)})}return(a,v)=>(h(),g("div",vp,[l("div",pp,[v[12]||(v[12]=l("label",null,"",-1)),l("input",{value:e.step.name,onInput:v[0]||(v[0]=p=>i("name",p.target.value)),type:"text",placeholder:" nginx"},null,40,hp)]),l("div",mp,[v[14]||(v[14]=l("label",null,"",-1)),l("select",{value:e.step.action,onChange:c},[...v[13]||(v[13]=[is('<option value="cmd.run" data-v-52cd1fe9>cmd.run</option><option value="pkg.install" data-v-52cd1fe9>pkg.install</option><option value="template.render" data-v-52cd1fe9>template.render</option><option value="service.ensure" data-v-52cd1fe9>service.ensure</option><option value="script.shell" data-v-52cd1fe9>script.shell</option><option value="script.python" data-v-52cd1fe9>script.python</option><option value="env.set" data-v-52cd1fe9>env.set</option>',7)])],40,gp)]),l("div",yp,[v[15]||(v[15]=l("label",null,"",-1)),l("input",{value:e.step.targets,onInput:v[1]||(v[1]=p=>i("targets",p.target.value)),type:"text",placeholder:"web, db"},null,40,_p)]),e.step.action==="cmd.run"?(h(),g(fe,{key:0},[l("div",bp,[v[16]||(v[16]=l("label",null,"",-1)),l("textarea",{value:e.step.with.cmd,onInput:v[2]||(v[2]=p=>r("cmd",p.target.value)),rows:"3",placeholder:"echo hello"},null,40,wp)]),l("div",kp,[v[17]||(v[17]=l("label",null,"",-1)),l("input",{value:e.step.with.dir,onInput:v[3]||(v[3]=p=>r("dir",p.target.value)),type:"text",placeholder:"/opt/app"},null,40,$p)])],64)):e.step.action==="pkg.install"?(h(),g("div",Sp,[v[18]||(v[18]=l("label",null,"",-1)),l("input",{value:e.step.with.packages,onInput:v[4]||(v[4]=p=>r("packages",p.target.value)),type:"text",placeholder:"nginx, curl"},null,40,xp)])):e.step.action==="template.render"?(h(),g(fe,{key:2},[l("div",Ep,[v[19]||(v[19]=l("label",null,"",-1)),l("input",{value:e.step.with.src,onInput:v[5]||(v[5]=p=>r("src",p.target.value)),type:"text",placeholder:"nginx.conf.j2"},null,40,Cp)]),l("div",Rp,[v[20]||(v[20]=l("label",null,"",-1)),l("input",{value:e.step.with.dest,onInput:v[6]||(v[6]=p=>r("dest",p.target.value)),type:"text",placeholder:"/etc/nginx/nginx.conf"},null,40,Ip)])],64)):e.step.action==="service.ensure"?(h(),g(fe,{key:3},[l("div",Ap,[v[21]||(v[21]=l("label",null,"",-1)),l("input",{value:e.step.with.name,onInput:v[7]||(v[7]=p=>r("name",p.target.value)),type:"text",placeholder:"nginx"},null,40,Tp)]),l("div",Mp,[v[23]||(v[23]=l("label",null,"",-1)),l("select",{value:e.step.with.state,onChange:v[8]||(v[8]=p=>r("state",p.target.value))},[...v[22]||(v[22]=[l("option",{value:"started"},"started",-1),l("option",{value:"stopped"},"stopped",-1)])],40,Np)])],64)):e.step.action==="script.shell"||e.step.action==="script.python"?(h(),g(fe,{key:4},[l("div",Op,[v[24]||(v[24]=l("label",null,"",-1)),l("input",{value:e.step.with.scriptRef,onInput:v[9]||(v[9]=p=>r("scriptRef",p.target.value)),type:"text",placeholder:"install-nginx"},null,40,Pp)]),l("div",Lp,[v[25]||(v[25]=l("label",null,"",-1)),l("textarea",{value:e.step.with.script,onInput:v[10]||(v[10]=p=>r("script",p.target.value)),rows:"4",placeholder:"#!/bin/sh"},null,40,Vp)])],64)):e.step.action==="env.set"?(h(),g("div",Dp,[v[26]||(v[26]=l("label",null," (KEY=VALUE )",-1)),l("textarea",{value:e.step.with.envText,onInput:v[11]||(v[11]=p=>r("envText",p.target.value)),rows:"4",placeholder:"TOKEN=abc123"},null,40,Bp)])):J("",!0)]))}}),jp=Kt(Up,[["__scopeId","data-v-52cd1fe9"]]),Hp={class:"home-chat"},Fp={class:"chat-pane"},Wp={class:"chat-header"},Kp={class:"status-grid"},qp={class:"status-card"},Gp={class:"status-card"},Yp={class:"status-card"},zp={class:"status-card"},Zp={class:"chat-tools"},Jp={class:"quick-actions"},Qp=["disabled"],Xp=["disabled"],eh=["disabled"],th={key:0,class:"target-info"},nh={class:"target-badge"},sh={class:"chat-composer"},lh=["onKeydown"],oh={class:"composer-actions"},ih=["disabled"],ah={class:"workspace-pane"},rh={class:"workspace-head"},uh={class:"workspace-summary"},ch={class:"summary-title"},dh={class:"summary-sub"},fh={class:"summary-tags"},vh={class:"tag"},ph={key:0,class:"tag"},hh={key:1,class:"tag"},mh={class:"workspace-tabs"},gh={class:"workspace-body"},yh={class:"builder-grid single"},_h={class:"panel yaml-panel"},bh={class:"panel validation-panel"},wh={class:"validation-summary"},kh={key:0},$h={class:"validation-actions"},Sh=["disabled"],xh=["disabled"],Eh=["disabled"],Ch={key:0,class:"alert warn"},Rh={key:1,class:"alert warn"},Ih={class:"issues"},Ah={key:2,class:"risk-box"},Th={key:0,class:"risk-reason"},Mh=["disabled"],Nh={class:"result-title"},Oh={key:0},Ph={key:0,class:"result-error"},Lh={class:"result-io"},Vh={key:0,class:"result-block"},Dh={key:1,class:"result-block"},Bh={class:"progress-list"},Uh={key:0,class:"empty"},jh={class:"node"},Hh={key:0,class:"message"},Fh={key:4,class:"alert error"},Wh={class:"modal"},Kh={key:0,class:"modal-body"},qh={class:"modal modal-large"},Gh={class:"modal-body"},Yh={class:"field"},zh={class:"field"},Zh={class:"field"},Jh={class:"field"},Qh={class:"field"},Xh={class:"field"},em=["value"],tm={key:0,class:"field-hint"},nm={class:"field"},sm={class:"field toggle"},lm={class:"modal modal-large"},om={class:"modal-body history-modal"},im={key:0,class:"empty"},am={key:1,class:"history-list"},rm=["onClick"],um={class:"history-title"},cm={class:"history-diff"},dm={class:"modal"},fm={class:"modal-body"},vm={class:"suggestions"},pm=["onClick"],hm={class:"modal modal-large"},mm={class:"modal-header"},gm={class:"modal-sub"},ym={class:"modal-body"},_m={class:"code-block"},vl="bops-ai-draft-session",bm=xt({__name:"HomeView",setup(e){const t=Hl(),n=P([]),s=P(""),o=P("ai-draft"),i=P(""),r=P(""),c=P(""),a=P("manual-approve"),v=P(""),p=P(2),b=P(!0);let R=0;const E=P([]),H=P(""),M=P(null),V=P(null),U=re(()=>!!M.value),$=P(""),N=P(null),L=P(!1),A=P(!1),q=P(""),ve=P([]),Ee=P(""),ze=P(!1),qe=P(!1),je=P([]),st=P(!1),Ze=P(!1),Xe=P(!1),ue=P(!1),Q=P(""),oe=P(""),X=["web","db","app","cache","storage"],_e=P({ok:!0,issues:[]}),Ce=P(!1),be=P(!1),Re=P(!1),Pe=P(null),D=P(""),B=P({summary:"",steps:0,riskLevel:"",riskNotes:[],issues:[],needsReview:!1}),ne=P(!1),S=P(""),Z=P([]),K=P("builder"),se=P(""),ge=P([]),_=re(()=>qo($.value)),k=re(()=>Zs()),I=re(()=>Lt(r.value)),j=re(()=>{const x=[];return E.value.length||x.push("/"),!v.value&&ge.value.length&&x.push(""),x}),F=re(()=>B.value.riskLevel==="high"),W=re(()=>B.value.needsReview?!!(!ne.value||F.value&&!S.value.trim()):!1),le=[" web1/web2  nginx"," 80% ",""];let ee=null,te=null;const z=P(!1);ft($,()=>{te&&window.clearTimeout(te),Ce.value=!1,te=window.setTimeout(()=>{ps()},600)}),ft([n,$,o,i,r,c,a,v,p,E,B,je],()=>{!ze.value||qe.value||Be()},{deep:!0}),ft(v,()=>{v.value&&(D.value="")}),ft([E,o,i,r,c,a],()=>{z.value||!b.value||Mn()},{deep:!0}),Zt(()=>{ye(),ie()});async function ye(){try{const x=await Le("/validation-envs");ge.value=x.items||[]}catch{ge.value=[]}}async function ie(){qe.value=!0;try{const x=localStorage.getItem(vl);if(x){if(!await Se(x)){localStorage.removeItem(vl);try{await Ne()}catch{}}}else try{await Ne()}catch{}}finally{qe.value=!1,ze.value=!0}n.value.length||yt(`
`)}async function pe(){ze.value||await ie()}async function Se(x){try{const y=await Le(`/ai/draft-sessions/${x}`);return He(y.session),!0}catch{return!1}}async function Ne(){const x=await Le("/ai/draft-sessions",{method:"POST",body:{title:"AI Draft"}});He(x.session)}function He(x){qe.value=!0,Ee.value=x.id||"",Ee.value&&localStorage.setItem(vl,Ee.value),n.value=(x.messages||[]).map((ce,we)=>({id:Date.now()+we+Math.random(),role:ce.role,content:ce.content}));const y=x.draft||{};$.value=y.yaml||"",je.value=y.history||[],B.value={summary:y.summary||"",steps:0,riskLevel:y.risk_level||y.riskLevel||"",riskNotes:[],issues:y.issues||[],needsReview:!!(y.needs_review??y.needsReview)},_e.value={ok:(y.issues||[]).length===0,issues:y.issues||[]},Ce.value=!!(y.summary||y.issues&&y.issues.length),Z.value=_e.value.ok?[]:gs(_e.value.issues);const O=x.config||{};o.value=O.workflow_name||o.value,i.value=O.description||"",r.value=(O.targets||[]).join(", "),a.value=O.plan_mode||a.value,c.value=(O.env_packages||[]).join(", "),v.value=O.validation_env||"",typeof O.max_retries=="number"&&(p.value=O.max_retries),$.value.trim()?ln({keepConfig:!0}):(E.value=[],H.value=""),D.value="",qe.value=!1}function Be(){ee&&window.clearTimeout(ee),ee=window.setTimeout(()=>{vt()},800)}async function vt(){if(!Ee.value)return;const x={messages:n.value.map(O=>({role:O.role,content:O.content})),draft:Nt(),config:Et()},y=pt();y&&(x.title=y);try{await Le(`/ai/draft-sessions/${Ee.value}`,{method:"PATCH",body:x})}catch{}}function pt(){if(o.value.trim())return o.value.trim();const x=n.value.find(y=>y.role==="user");return x?x.content.slice(0,12):""}function Nt(){const x=_e.value.issues.length?_e.value.issues:B.value.issues;return{yaml:$.value,summary:B.value.summary,issues:x,risk_level:B.value.riskLevel,needs_review:B.value.needsReview,history:je.value}}function Et(){return{workflow_name:o.value,description:i.value,targets:Lt(r.value),plan_mode:a.value,env_packages:Lt(c.value),validation_env:v.value,max_retries:p.value}}function yt(x){n.value.push({id:Date.now()+Math.random(),role:"assistant",content:x})}function yn(x){n.value.push({id:Date.now()+Math.random(),role:"user",content:x})}function gt(x){s.value=x}function Ot(x){s.value=x}function Fn(){st.value=!0}function _n(){st.value=!1}function Fl(){Ze.value=!0}function ds(){Ze.value=!1}function Wl(){Xe.value=!0}function fs(){Xe.value=!1}function Kl(x){const y=new Set(Lt(r.value));y.has(x)?y.delete(x):y.add(x),r.value=Array.from(y).join(", ")}function ql(x){const y=E.value[x];y&&(Q.value=y.name||` ${x+1}`,oe.value=io(y),ue.value=!0)}function sn(){ue.value=!1}function Gl(){n.value=[],yt("")}async function Ys(){await pe();const x=s.value.trim();x&&(yn(x),s.value="",await vs(x))}async function Yl(){await pe();const x=se.value||i.value||s.value.trim();x&&await vs(x)}function zs(x){return x.replace(/_/g," ")}function zl(){return{workflow_name:o.value,description:i.value,targets:Lt(r.value),plan_mode:a.value,env_packages:Lt(c.value),validation_env:v.value||void 0,max_retries:p.value,steps_hint:E.value.map(x=>({name:x.name,action:x.action,targets:Lt(x.targets),with:x.with}))}}async function vs(x){if(!x.trim())return;L.value=!0,A.value=!0,q.value="",ve.value=[],Pe.value=null,D.value="",se.value=x;const y={mode:"generate",prompt:x,context:zl(),env:v.value||void 0,execute:!1,max_retries:p.value,draft_id:Ee.value||void 0};try{await Zl(y)}finally{L.value=!1,A.value=!1}}async function Zl(x){const y=`${Wr()}/ai/workflow/stream`,O=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!O.ok||!O.body){q.value="",yt("");return}const ce=O.body.getReader(),we=new TextDecoder("utf-8");let Ve="";for(;;){const{value:at,done:rt}=await ce.read();if(rt)break;Ve+=we.decode(at,{stream:!0});let Ct=Ve.indexOf(`

`);for(;Ct>=0;){const Je=Ve.slice(0,Ct);Ve=Ve.slice(Ct+2),Jl(Je),Ct=Ve.indexOf(`

`)}}}function Jl(x){const y=x.split(`
`);let O="message",ce="";for(const we of y)we.startsWith("event:")?O=we.replace("event:","").trim():we.startsWith("data:")&&(ce+=we.replace("data:","").trim());if(ce)try{const we=JSON.parse(ce);O==="status"?ve.value=[...ve.value,we].slice(-40):O==="result"?Ql(we):O==="error"&&(q.value=we.error||"",yt(`: ${q.value}`))}catch{q.value=""}}function Ql(x){const y=typeof x.yaml=="string"?x.yaml:"";y&&($.value=y),typeof x.summary=="string"&&(B.value.summary=x.summary),B.value.riskLevel=String(x.risk_level||""),B.value.needsReview=!!x.needs_review,B.value.issues=Array.isArray(x.issues)?x.issues:[],Array.isArray(x.history)&&(je.value=x.history.filter(we=>typeof we=="string")),typeof x.draft_id=="string"&&(Ee.value=x.draft_id,Ee.value&&localStorage.setItem(vl,Ee.value)),ne.value=!1,S.value="",ln(),ps(),Wn();const O=j.value,ce=[` ${B.value.steps||E.value.length} : ${B.value.riskLevel||"-"}`];B.value.needsReview&&ce.push(""),O.length&&ce.push(`: ${O.join(" / ")}`),yt(ce.join(`
`))}async function ps(){if($.value.trim())try{const x=await Le("/ai/workflow/summary",{method:"POST",body:{yaml:$.value}});B.value={summary:x.summary||"",steps:x.steps||0,riskLevel:x.risk_level||x.riskLevel||"",riskNotes:x.risk_notes||x.riskNotes||[],issues:x.issues||[],needsReview:!!(x.needs_review??x.needsReview)},Z.value=B.value.issues.length?gs(B.value.issues):[],B.value.needsReview||(ne.value=!1,S.value="")}catch{B.value.summary=""}}async function Wn(){if(!$.value.trim())return;if(!(await hs()).ok){D.value="",yt("");return}if(!v.value){D.value="",yt("");return}await qt()}async function hs(){if(!$.value.trim())return _e.value;be.value=!0;try{const x=await Le("/workflows/_draft/validate",{method:"POST",body:{yaml:$.value}}),y=x.issues||[];_e.value={ok:x.ok,issues:y},Z.value=x.ok?[]:gs(y)}catch(x){const y=x;_e.value={ok:!1,issues:[y.message?`: ${y.message}`:""]},Z.value=[]}finally{be.value=!1}return Ce.value=!0,_e.value}async function qt(){if($.value.trim()){if(!v.value){D.value="",yt("");return}Re.value=!0,Pe.value=null,D.value="";try{const x=await Le("/ai/workflow/execute",{method:"POST",body:{yaml:$.value,env:v.value||void 0}});Pe.value=x}catch(x){const y=x;Pe.value={status:"failed",error:y.message?`: ${y.message}`:""}}finally{Re.value=!1}}}async function Xl(){if(W.value){window.alert(F.value?"":"");return}const x=window.prompt("///");if(!x)return;const y=x.trim();if(!/^[a-zA-Z0-9_-]+$/.test(y)){window.alert("");return}const O=S.value.trim();L.value=!0;try{await Le(`/workflows/${y}`,{method:"PUT",body:{yaml:$.value,confirm_reason:O||void 0}}),Ee.value="",S.value="",await t.push({name:"workflow",params:{name:y}})}catch(ce){const we=ce;q.value=we.message?`: ${we.message}`:""}finally{L.value=!1}}function Mn(){z.value=!0,$.value=el(),z.value=!1,ps()}function ln(x={}){var O;const y=Xs($.value);z.value=!0,x.keepConfig||(o.value=y.name||o.value,i.value=y.description||i.value,a.value=y.planMode||a.value,c.value=y.envPackages.join(", "),!r.value.trim()&&y.targetsHint&&(r.value=y.targetsHint)),E.value=y.steps,H.value=((O=y.steps[0])==null?void 0:O.id)||"",Ks(()=>{z.value=!1})}function ms(x){return{...x,with:{...x.with}}}function eo(x){const y=E.value[x];y&&(V.value=x,M.value=ms(y))}function bn(){V.value=null,M.value=null}function to(){if(V.value===null||!M.value)return;const x=ms(M.value);E.value.splice(V.value,1,x),H.value=x.id,bn()}function no(x){M.value=x}function so(x="cmd.run"){const y=uo(x);E.value.push(y),H.value=y.id}function lo(x){E.value.splice(x,1)}function oo(x){const y=E.value[x];if(!y)return;const O={...y,id:`${Date.now()}-${Math.random()}`,name:`${y.name}-copy`,with:{...y.with}};E.value.splice(x+1,0,O)}function Nn(){const x=r.value.trim();x&&(E.value=E.value.map(y=>({...y,targets:x})))}function gs(x){const y=new Set;for(const O of x){const ce=O.match(/steps\[(\d+)\]/i);if(ce){const Ve=Number(ce[1]);Number.isNaN(Ve)||y.add(Ve);continue}const we=O.match(/step name \"([^\"]+)\"/i);if(we){const Ve=we[1],at=_.value.findIndex(rt=>rt.name===Ve);at>=0&&y.add(at)}}return Array.from(y).sort((O,ce)=>O-ce)}function Zs(){if(!je.value.length)return[];const x=[...je.value,$.value];return je.value.map((O,ce)=>{const we=x[ce+1]||"",Ve=Qs(O,we),at=ce===0?"":` ${ce}`;return{index:ce,label:at,diff:Ve}}).reverse()}function Js(x){const y=je.value[x];y&&($.value=y,ne.value=!1,S.value="")}function Qs(x,y){if(!x.trim())return"initial";const O=x.split(/\r?\n/),ce=y.split(/\r?\n/);let we=0,Ve=0;const at=Math.max(O.length,ce.length);for(let rt=0;rt<at;rt+=1)rt>=O.length?we+=1:rt>=ce.length?Ve+=1:O[rt]!==ce[rt]&&(we+=1,Ve+=1);return`+${we}/-${Ve}`}function Xs(x){var Ct;const y=x.split(/\r?\n/),O=_t(y,"name"),ce=_t(y,"description"),we=ll(y,"plan","mode"),Ve=ol(y,"env_packages"),at=qo(x).map((Je,il)=>{const al={cmd:Je.cmd||"",dir:Je.dir||"",name:Je.withName||"",state:Je.state||"",src:Je.src||"",dest:Je.dest||"",script:Je.script||"",scriptRef:Je.scriptRef||"",packages:"",envText:Je.env?ro(Je.env):""};return Je.action==="pkg.install"&&Je.withName&&(al.packages=Je.withName),{id:`${Date.now()}-${il}-${Math.random()}`,name:Je.name||`step-${il+1}`,action:Je.action||"cmd.run",targets:Kn(Je.targets),with:al}}),rt=((Ct=at.find(Je=>Je.targets))==null?void 0:Ct.targets)||"";return{name:O,description:ce,planMode:we,envPackages:Ve,steps:at,targetsHint:rt}}function el(){const x=[];x.push("version: v0.1"),x.push(`name: ${ot(o.value||"ai-draft")}`),i.value.trim()&&x.push(`description: ${ot(i.value.trim())}`);const y=Lt(c.value);return y.length&&(x.push("env_packages:"),y.forEach(O=>{x.push(`  - ${ot(O)}`)})),a.value&&(x.push("plan:"),x.push(`  mode: ${ot(a.value)}`)),x.push("steps:"),E.value.forEach(O=>{x.push(`  - name: ${ot(O.name||"step")}`);const ce=Lt(O.targets||r.value);ce.length&&x.push(`    targets: ${sl(ce)}`),x.push(`    action: ${ot(O.action||"cmd.run")}`);const we=tl(O);we.length&&(x.push("    with:"),we.forEach(Ve=>x.push(`      ${Ve}`)))}),x.join(`
`)}function tl(x){const y=[];if(x.action==="cmd.run")x.with.cmd&&y.push(...nl("cmd",x.with.cmd)),x.with.dir&&y.push(`dir: ${ot(x.with.dir)}`);else if(x.action==="pkg.install"){const O=Lt(x.with.packages||"");O.length>1?(y.push("names:"),O.forEach(ce=>y.push(`  - ${ot(ce)}`))):O.length===1&&y.push(`name: ${ot(O[0])}`)}else if(x.action==="template.render")x.with.src&&y.push(`src: ${ot(x.with.src)}`),x.with.dest&&y.push(`dest: ${ot(x.with.dest)}`);else if(x.action==="service.ensure")x.with.name&&y.push(`name: ${ot(x.with.name)}`),x.with.state&&y.push(`state: ${ot(x.with.state)}`);else if(x.action==="script.shell"||x.action==="script.python")x.with.scriptRef&&y.push(`script_ref: ${ot(x.with.scriptRef)}`),x.with.script&&y.push(...nl("script",x.with.script));else if(x.action==="env.set"){const O=ao(x.with.envText||""),ce=Object.keys(O);ce.length&&(y.push("env:"),ce.forEach(we=>{y.push(`  ${we}: ${ot(O[we])}`)}))}return y}function io(x){const y=[];y.push(`- name: ${ot(x.name||"step")}`);const O=Lt(x.targets||r.value);O.length&&y.push(`  targets: ${sl(O)}`),y.push(`  action: ${ot(x.action||"cmd.run")}`);const ce=tl(x);return ce.length&&(y.push("  with:"),ce.forEach(we=>y.push(`    ${we}`))),y.join(`
`)}function nl(x,y){const O=y.trim();if(O.includes(`
`)){const ce=O.split(/\r?\n/).map(we=>`  ${we}`);return[`${x}: |`,...ce]}return[`${x}: ${ot(O)}`]}function ot(x){const y=x.trim();return y===""?'""':/[:#\n]/.test(y)||/^\s|\s$/.test(y)||/\s/.test(y)?JSON.stringify(y):y}function sl(x){return`[${x.map(y=>ot(y)).join(", ")}]`}function Lt(x){return x.split(/,\s*/).map(y=>y.trim()).filter(Boolean)}function Kn(x){const y=x.trim();return y?y.startsWith("[")?y.replace(/\[|\]/g,"").split(/,\s*/).map(O=>O.replace(/^[\"']|[\"']$/g,"").trim()).filter(Boolean).join(", "):y:""}function ao(x){const y={};return x.split(/\r?\n/).map(O=>O.trim()).filter(Boolean).forEach(O=>{const ce=O.split("=");if(ce.length>=2){const we=ce.shift()||"";y[we.trim()]=ce.join("=").trim()}}),y}function ro(x){return Object.entries(x).map(([y,O])=>`${y}=${O}`).join(`
`)}function _t(x,y){const O=new RegExp(`^${y}\\s*:\\s*(.+)$`);for(const ce of x){const we=ce.match(O);if(we)return we[1].replace(/^['\"]|['\"]$/g,"").trim()}return""}function ll(x,y,O){let ce=!1,we=0;for(const Ve of x){const at=Ve.match(new RegExp(`^(\\s*)${y}\\s*:\\s*$`));if(at){ce=!0,we=at[1].length;continue}if(ce){if(Ve.match(/^(\s*)/)[1].length<=we&&Ve.trim()!==""){ce=!1;continue}const Ct=Ve.match(new RegExp(`^\\s*${O}\\s*:\\s*(.+)$`));if(Ct)return Ct[1].replace(/^['\"]|['\"]$/g,"").trim()}}return""}function ol(x,y){const O=[];let ce=!1,we=0;for(const Ve of x){const at=Ve.match(new RegExp(`^${y}\\s*:\\s*\\[(.*)\\]`));if(at)return at[1].split(/,\s*/).map(Ct=>Ct.replace(/^[\"']|[\"']$/g,"").trim()).filter(Boolean);const rt=Ve.match(new RegExp(`^(\\s*)${y}\\s*:\\s*$`));if(rt){ce=!0,we=rt[1].length;continue}if(ce){if(Ve.match(/^(\s*)/)[1].length<=we&&Ve.trim()!==""){ce=!1;continue}const Je=Ve.match(/^\s*-\s*(.+)$/);Je&&O.push(Je[1].replace(/^[\"']|[\"']$/g,"").trim())}}return O}function uo(x){R+=1;const y=["","","","","","","","","",""][Math.min(R-1,9)],O=y?`${y}`:`${R}`;return{id:`${Date.now()}-${Math.random()}`,name:O,action:x,targets:r.value||"",with:Kr(x)}}return(x,y)=>(h(),g("section",Hp,[l("aside",Fp,[l("header",Wp,[y[30]||(y[30]=l("div",{class:"brand"},[l("h1",null,"AI"),l("p",null,"AI ")],-1)),l("div",Kp,[l("div",qp,[y[26]||(y[26]=l("span",null,"",-1)),l("strong",null,T(Ee.value||""),1)]),l("div",Gp,[y[27]||(y[27]=l("span",null,"",-1)),l("strong",{class:Ie(`risk-${B.value.riskLevel}`)},T(B.value.riskLevel||"-"),3)]),l("div",Yp,[y[28]||(y[28]=l("span",null,"",-1)),l("strong",null,T(B.value.steps||E.value.length),1)]),l("div",zp,[y[29]||(y[29]=l("span",null,"",-1)),l("strong",null,T(B.value.needsReview?"":""),1)])])]),Ue(wv,{messages:n.value,"assistant-typing":A.value,"pending-questions":j.value,onSuggestion:gt},null,8,["messages","assistant-typing","pending-questions"]),l("div",Zp,[l("div",Jp,[l("button",{class:"btn ghost small",type:"button",onClick:Wl}," / "),l("button",{class:"btn primary",type:"button",disabled:L.value,onClick:Yl},"  ",8,Qp),l("button",{class:"btn",type:"button",disabled:L.value||!$.value.trim(),onClick:hs},"  ",8,Xp),l("button",{class:"btn ghost",type:"button",disabled:Re.value||!$.value.trim(),onClick:qt},"  ",8,eh)]),I.value.length?(h(),g("div",th,[l("span",nh,": "+T(I.value.join("  ")),1)])):J("",!0)]),l("div",sh,[ae(l("textarea",{"onUpdate:modelValue":y[0]||(y[0]=O=>s.value=O),placeholder:" web1/web2  nginx",rows:"3",onKeydown:Nd(mt(Ys,["exact","prevent"]),["enter"])},null,40,lh),[[$e,s.value]]),l("div",oh,[l("button",{class:"btn primary",type:"button",disabled:L.value||!s.value.trim(),onClick:Ys},"  ",8,ih),l("button",{class:"btn",type:"button",onClick:y[1]||(y[1]=O=>Ot(le[0]))},""),l("button",{class:"btn ghost",type:"button",onClick:Gl},"")])])]),l("main",ah,[l("div",rh,[l("div",uh,[l("div",null,[l("div",ch,T(o.value||""),1),l("div",dh,T(i.value||""),1)]),l("div",fh,[l("span",vh,T(a.value),1),v.value?(h(),g("span",ph,": "+T(v.value),1)):J("",!0),c.value?(h(),g("span",hh,": "+T(c.value),1)):J("",!0)])]),l("div",{class:"workspace-controls"},[l("button",{class:"btn ghost small",type:"button",onClick:Fn},""),l("button",{class:"btn ghost small",type:"button",onClick:Fl},"")]),l("div",mh,[l("button",{class:Ie(["tab",{active:K.value==="builder"}]),onClick:y[2]||(y[2]=O=>K.value="builder")},"  ",2),l("button",{class:Ie(["tab",{active:K.value==="yaml"}]),onClick:y[3]||(y[3]=O=>K.value="yaml")}," YAML ",2),l("button",{class:Ie(["tab",{active:K.value==="validation"}]),onClick:y[4]||(y[4]=O=>K.value="validation")},"  ",2)])]),l("div",gh,[ae(l("section",yh,[Ue(Zv,{"workflow-name":o.value,"onUpdate:workflowName":y[5]||(y[5]=O=>o.value=O),"workflow-desc":i.value,"onUpdate:workflowDesc":y[6]||(y[6]=O=>i.value=O),"targets-input":r.value,"onUpdate:targetsInput":y[7]||(y[7]=O=>r.value=O),"plan-mode":a.value,"onUpdate:planMode":y[8]||(y[8]=O=>a.value=O),"env-packages-input":c.value,"onUpdate:envPackagesInput":y[9]||(y[9]=O=>c.value=O),"selected-validation-env":v.value,"onUpdate:selectedValidationEnv":y[10]||(y[10]=O=>v.value=O),"max-retries":p.value,"onUpdate:maxRetries":y[11]||(y[11]=O=>p.value=O),"validation-envs":ge.value,"auto-sync":b.value,onToggleAutoSync:y[12]||(y[12]=O=>b.value=!b.value),onApplyDraft:Mn,onApplyYaml:ln},null,8,["workflow-name","workflow-desc","targets-input","plan-mode","env-packages-input","selected-validation-env","max-retries","validation-envs","auto-sync"]),Ue(fp,{steps:E.value,"active-step-id":H.value,"step-issue-indexes":Z.value,"global-targets":r.value,"validation-ok":_e.value.ok,"validation-touched":Ce.value,onAddStep:so,onApplyTargets:Nn,onDuplicateStep:oo,onRemoveStep:lo,onOpenStep:eo,onOpenStepYaml:ql,onSelectStep:y[13]||(y[13]=O=>H.value=O)},null,8,["steps","active-step-id","step-issue-indexes","global-targets","validation-ok","validation-touched"])],512),[[ko,K.value==="builder"]]),ae(l("section",_h,[y[31]||(y[31]=l("div",{class:"panel-title"},"YAML ",-1)),ae(l("textarea",{ref_key:"yamlRef",ref:N,"onUpdate:modelValue":y[14]||(y[14]=O=>$.value=O),class:"code",spellcheck:"false",rows:"24"},null,512),[[$e,$.value]]),l("div",{class:"yaml-actions"},[l("button",{class:"btn",type:"button",onClick:ln},""),l("button",{class:"btn ghost",type:"button",onClick:Mn}," YAML")])],512),[[ko,K.value==="yaml"]]),ae(l("section",bh,[y[40]||(y[40]=l("div",{class:"panel-title"},"",-1)),l("div",wh,[l("div",null,[y[32]||(y[32]=l("span",null,"",-1)),l("strong",null,T(B.value.summary||"-"),1)]),l("div",null,[y[33]||(y[33]=l("span",null,"",-1)),l("strong",{class:Ie(`risk-${B.value.riskLevel}`)},T(B.value.riskLevel||"-"),3)]),B.value.riskNotes.length?(h(),g("div",kh,[y[34]||(y[34]=l("span",null,"",-1)),l("strong",null,T(B.value.riskNotes.join("  ")),1)])):J("",!0)]),l("div",$h,[l("button",{class:"btn",type:"button",disabled:be.value||!$.value.trim(),onClick:hs},"  ",8,Sh),l("button",{class:"btn",type:"button",disabled:Re.value||!$.value.trim(),onClick:qt},"  ",8,xh),l("button",{class:"btn primary",type:"button",disabled:L.value||!$.value.trim()||W.value,onClick:Xl},"  ",8,Eh)]),D.value?(h(),g("div",Ch,T(D.value),1)):J("",!0),_e.value.issues.length?(h(),g("div",Rh,[y[35]||(y[35]=tt(" : ",-1)),l("ul",Ih,[(h(!0),g(fe,null,Te(_e.value.issues,O=>(h(),g("li",{key:O},T(O),1))),128))])])):J("",!0),B.value.needsReview?(h(),g("div",Ah,[y[37]||(y[37]=l("div",null,"",-1)),F.value?(h(),g("div",Th,[y[36]||(y[36]=l("label",null,"",-1)),ae(l("input",{"onUpdate:modelValue":y[15]||(y[15]=O=>S.value=O),type:"text",placeholder:""},null,512),[[$e,S.value]])])):J("",!0),l("button",{class:"btn ghost",type:"button",disabled:F.value&&!S.value.trim()&&!ne.value,onClick:y[16]||(y[16]=O=>ne.value=!ne.value)},T(ne.value?"":""),9,Mh)])):J("",!0),Pe.value?(h(),g("div",{key:3,class:Ie(["execution-result",Pe.value.status])},[l("div",Nh,[tt(" : "+T(Pe.value.status)+" ",1),Pe.value.code?(h(),g("span",Oh,"(code "+T(Pe.value.code)+")",1)):J("",!0)]),Pe.value.error?(h(),g("div",Ph,T(Pe.value.error),1)):J("",!0),l("div",Lh,[Pe.value.stdout?(h(),g("div",Vh,[y[38]||(y[38]=l("div",{class:"result-label"},"stdout",-1)),l("pre",null,T(Pe.value.stdout),1)])):J("",!0),Pe.value.stderr?(h(),g("div",Dh,[y[39]||(y[39]=l("div",{class:"result-label"},"stderr",-1)),l("pre",null,T(Pe.value.stderr),1)])):J("",!0)])],2)):J("",!0),l("div",Bh,[ve.value.length===0?(h(),g("div",Uh,"")):(h(!0),g(fe,{key:1},Te(ve.value,(O,ce)=>(h(),g("div",{class:"progress-item",key:ce},[l("div",jh,T(zs(O.node)),1),l("div",{class:Ie(["status",O.status])},T(O.status),3),O.message?(h(),g("div",Hh,T(O.message),1)):J("",!0)]))),128))]),q.value?(h(),g("div",Fh,T(q.value),1)):J("",!0)],512),[[ko,K.value==="validation"]])])]),U.value?(h(),g("div",{key:0,class:"modal-backdrop",onClick:mt(bn,["self"])},[l("div",Wh,[l("div",{class:"modal-header"},[y[41]||(y[41]=l("div",null,[l("div",{class:"modal-title"},""),l("div",{class:"modal-sub"},"")],-1)),l("button",{class:"icon-btn",type:"button",onClick:bn},"")]),M.value?(h(),g("div",Kh,[Ue(jp,{step:M.value,onUpdateStep:no},null,8,["step"])])):J("",!0),l("div",{class:"modal-actions"},[l("button",{class:"btn ghost",type:"button",onClick:bn},""),l("button",{class:"btn primary",type:"button",onClick:to},"")])])])):J("",!0),st.value?(h(),g("div",{key:1,class:"modal-backdrop",onClick:mt(_n,["self"])},[l("div",qh,[l("div",{class:"modal-header"},[y[42]||(y[42]=l("div",null,[l("div",{class:"modal-title"},""),l("div",{class:"modal-sub"},"")],-1)),l("button",{class:"icon-btn",type:"button",onClick:_n},"")]),l("div",Gh,[l("div",Yh,[y[43]||(y[43]=l("label",null,"",-1)),ae(l("input",{"onUpdate:modelValue":y[17]||(y[17]=O=>o.value=O),type:"text",placeholder:" deploy-nginx"},null,512),[[$e,o.value]])]),l("div",zh,[y[44]||(y[44]=l("label",null,"",-1)),ae(l("textarea",{"onUpdate:modelValue":y[18]||(y[18]=O=>i.value=O),rows:"2",placeholder:""},null,512),[[$e,i.value]])]),l("div",Zh,[y[45]||(y[45]=l("label",null,"/",-1)),ae(l("input",{"onUpdate:modelValue":y[19]||(y[19]=O=>r.value=O),type:"text",placeholder:"web, db"},null,512),[[$e,r.value]])]),l("div",Jh,[y[47]||(y[47]=l("label",null,"",-1)),ae(l("select",{"onUpdate:modelValue":y[20]||(y[20]=O=>a.value=O)},[...y[46]||(y[46]=[l("option",{value:"manual-approve"},"manual-approve",-1),l("option",{value:"auto"},"auto",-1)])],512),[[Wt,a.value]])]),l("div",Qh,[y[48]||(y[48]=l("label",null,"",-1)),ae(l("input",{"onUpdate:modelValue":y[21]||(y[21]=O=>c.value=O),type:"text",placeholder:"prod-env, staging"},null,512),[[$e,c.value]])]),l("div",Xh,[y[50]||(y[50]=l("label",null,"",-1)),ae(l("select",{"onUpdate:modelValue":y[22]||(y[22]=O=>v.value=O)},[y[49]||(y[49]=l("option",{value:""},"",-1)),(h(!0),g(fe,null,Te(ge.value,O=>(h(),g("option",{key:O.name,value:O.name},T(O.name),9,em))),128))],512),[[Wt,v.value]]),v.value?J("",!0):(h(),g("div",tm,""))]),l("div",nm,[y[51]||(y[51]=l("label",null,"",-1)),ae(l("input",{"onUpdate:modelValue":y[23]||(y[23]=O=>p.value=O),type:"number",min:"0",max:"5"},null,512),[[$e,p.value,void 0,{number:!0}]])]),l("div",sm,[y[52]||(y[52]=l("label",null," YAML",-1)),l("button",{class:Ie(["toggle-btn",b.value?"on":"off"]),type:"button",onClick:y[24]||(y[24]=O=>b.value=!b.value)},T(b.value?"":""),3)])]),l("div",{class:"modal-actions"},[l("button",{class:"btn ghost",type:"button",onClick:_n},""),l("button",{class:"btn",type:"button",onClick:Mn}," YAML"),l("button",{class:"btn ghost",type:"button",onClick:ln}," YAML ")])])])):J("",!0),Ze.value?(h(),g("div",{key:2,class:"modal-backdrop",onClick:mt(ds,["self"])},[l("div",lm,[l("div",{class:"modal-header"},[y[53]||(y[53]=l("div",null,[l("div",{class:"modal-title"},""),l("div",{class:"modal-sub"},"")],-1)),l("button",{class:"icon-btn",type:"button",onClick:ds},"")]),l("div",om,[k.value.length===0?(h(),g("div",im,"")):(h(),g("div",am,[(h(!0),g(fe,null,Te(k.value,O=>(h(),g("button",{class:"history-item",key:O.index,type:"button",onClick:ce=>{Js(O.index),ds()}},[l("div",null,[l("div",um,T(O.label),1),l("div",cm,T(O.diff),1)]),y[54]||(y[54]=l("span",{class:"history-restore"},"",-1))],8,rm))),128))]))])])])):J("",!0),Xe.value?(h(),g("div",{key:3,class:"modal-backdrop",onClick:mt(fs,["self"])},[l("div",dm,[l("div",{class:"modal-header"},[y[55]||(y[55]=l("div",null,[l("div",{class:"modal-title"},"/"),l("div",{class:"modal-sub"},"")],-1)),l("button",{class:"icon-btn",type:"button",onClick:fs},"")]),l("div",fm,[ae(l("textarea",{"onUpdate:modelValue":y[25]||(y[25]=O=>r.value=O),rows:"2",placeholder:"web, db, cache"},null,512),[[$e,r.value]]),l("div",vm,[(h(),g(fe,null,Te(X,O=>l("button",{class:Ie(["chip",{active:I.value.includes(O)}]),key:O,type:"button",onClick:ce=>Kl(O)},T(O),11,pm)),64))])]),l("div",{class:"modal-actions"},[l("button",{class:"btn ghost",type:"button",onClick:fs},"")])])])):J("",!0),ue.value?(h(),g("div",{key:4,class:"modal-backdrop",onClick:mt(sn,["self"])},[l("div",hm,[l("div",mm,[l("div",null,[y[56]||(y[56]=l("div",{class:"modal-title"}," YAML",-1)),l("div",gm,T(Q.value),1)]),l("button",{class:"icon-btn",type:"button",onClick:sn},"")]),l("div",ym,[l("pre",_m,T(oe.value),1)])])])):J("",!0)]))}}),wm={class:"runs"},km={class:"runs-header"},$m={key:0},Sm={key:1},xm={class:"actions"},Em={class:"panel"},Cm={key:0,class:"empty"},Rm={key:1,class:"empty"},Im={class:"mono"},Am={class:"step"},Tm={key:3,class:"empty"},Mm=xt({__name:"RunsView",setup(e){const t=Gs(),n=re(()=>typeof t.params.name=="string"?t.params.name:""),s=re(()=>n.value.length>0),o=P(""),i=P("all"),r=P("all"),c=P(!1),a=P(""),v=P([]),p=re(()=>{const M=o.value.trim().toLowerCase();return v.value.filter(V=>M?`${V.run_id} ${V.workflow_name}`.toLowerCase().includes(M):!0)});async function b(){c.value=!0,a.value="";try{const M=new URLSearchParams;if(i.value!=="all"&&M.set("status",i.value),r.value!=="all"){const N=Date.now(),L=r.value==="24h"?24*60*60*1e3:r.value==="7d"?7*24*60*60*1e3:30*24*60*60*1e3;M.set("from",new Date(N-L).toISOString()),M.set("to",new Date(N).toISOString())}const V=s.value?`/workflows/${n.value}/runs`:"/runs",U=M.toString()?`${V}?${M.toString()}`:V,$=await Le(U);v.value=$.items||[]}catch{a.value=""}finally{c.value=!1}}function R(M){return M==="running"?"":M==="success"?"":M==="stopped"?"":M==="queued"?"":""}function E(M){const V=Date.parse(M);return Number.isNaN(V)?"-":new Date(V).toLocaleString()}function H(M,V){const U=Date.parse(M),$=Date.parse(V);if(Number.isNaN(U)||Number.isNaN($)||$<=U)return"-";const N=Math.floor(($-U)/1e3),L=Math.floor(N/60),A=N%60;return L>0?`${L}m ${A}s`:`${A}s`}return ft([i,r,n],()=>{b()}),Zt(()=>{b()}),(M,V)=>{const U=ls("RouterLink");return h(),g("section",wm,[l("div",km,[l("div",null,[V[3]||(V[3]=l("h1",null,"",-1)),s.value?(h(),g("p",$m,""+T(n.value)+"  ",1)):(h(),g("p",Sm,""))]),l("div",xm,[ae(l("input",{"onUpdate:modelValue":V[0]||(V[0]=$=>o.value=$),type:"text",placeholder:" ID"},null,512),[[$e,o.value]]),ae(l("select",{"onUpdate:modelValue":V[1]||(V[1]=$=>i.value=$)},[...V[4]||(V[4]=[is('<option value="all" data-v-2bc8f2ab></option><option value="running" data-v-2bc8f2ab></option><option value="success" data-v-2bc8f2ab></option><option value="failed" data-v-2bc8f2ab></option><option value="stopped" data-v-2bc8f2ab></option>',5)])],512),[[Wt,i.value]]),ae(l("select",{"onUpdate:modelValue":V[2]||(V[2]=$=>r.value=$)},[...V[5]||(V[5]=[l("option",{value:"all"},"",-1),l("option",{value:"24h"}," 24 ",-1),l("option",{value:"7d"}," 7 ",-1),l("option",{value:"30d"}," 30 ",-1)])],512),[[Wt,r.value]])])]),l("section",Em,[V[7]||(V[7]=l("div",{class:"list-head"},[l("span",null,""),l("span",null," ID"),l("span",null,""),l("span",null,""),l("span",null,""),l("span",null,""),l("span",null,""),l("span",null,"")],-1)),c.value?(h(),g("div",Cm,"...")):a.value?(h(),g("div",Rm,T(a.value),1)):(h(!0),g(fe,{key:2},Te(p.value,$=>(h(),g("div",{key:$.run_id,class:"list-row"},[l("span",{class:Ie(["badge",$.status])},T(R($.status)),3),l("span",Im,T($.run_id),1),l("span",null,T($.workflow_name),1),l("span",null,T(E($.started_at)),1),l("span",null,T(H($.started_at,$.finished_at)),1),l("span",null,T($.failed_step||"-"),1),l("span",Am,T($.failed_host||"-"),1),Ue(U,{class:"link",to:{name:"run-console",params:{id:$.run_id},query:{workflow:$.workflow_name}}},{default:bt(()=>[...V[6]||(V[6]=[tt("  ",-1)])]),_:1},8,["to"])]))),128)),!c.value&&!a.value&&p.value.length===0?(h(),g("div",Tm,"  ")):J("",!0)])])}}}),wa=Kt(Mm,[["__scopeId","data-v-2bc8f2ab"]]),Nm={class:"picker"},Om={class:"picker-body"},Pm={class:"panel side"},Lm={class:"recent-name"},Vm={key:1,class:"empty"},Dm={class:"panel list"},Bm={class:"panel-title"},Um={class:"count"},jm={class:"grid"},Hm={key:0,class:"empty"},Fm={key:1,class:"empty"},Wm=["onClick"],Km={class:"card-top"},qm={class:"workflow-name"},Gm={class:"workflow-desc"},Ym={class:"workflow-meta"},zm={key:0,class:"chip-row"},Zm={key:0,class:"empty"},Jm=xt({__name:"WorkflowPickerView",setup(e){const t=Hl(),n=P(""),s=P(localStorage.getItem("bops-last-workflow")||""),o=P(!1),i=P(""),r=P([]),c=re(()=>{const H=n.value.trim().toLowerCase();return H?r.value.filter(M=>[M.name,M.desc,M.tags.join(" ")].join(" ").toLowerCase().includes(H)):r.value});function a(H){localStorage.setItem("bops-last-workflow",H),s.value=H,t.push(`/workflows/${H}`)}async function v(){const H=window.prompt("///");if(!H)return;const M=H.trim();if(!/^[a-zA-Z0-9_-]+$/.test(M)){window.alert("");return}const V=E(M);try{await Le(`/workflows/${M}`,{method:"PUT",body:{yaml:V}}),await p(),a(M)}catch(U){const $=U.message||"";window.alert(`: ${$}`)}}async function p(){o.value=!0,i.value="";try{const H=await Le("/workflows");r.value=H.items.map(M=>({name:M.name,desc:M.description||"",status:"draft",updatedAt:M.updated_at,tags:[]}))}catch{i.value=""}finally{o.value=!1}}function b(H){return H==="active"?"":H==="locked"?"":""}function R(H){const M=Date.parse(H);if(Number.isNaN(M))return H||"";const V=Math.max(0,Date.now()-M),U=Math.floor(V/6e4);if(U<1)return"";if(U<60)return`${U} `;const $=Math.floor(U/60);return $<24?`${$} `:`${Math.floor($/24)} `}function E(H){return`version: v0.1
name: ${H}
description: new workflow

inventory:
  hosts:
    local:
      address: 127.0.0.1

plan:
  mode: manual-approve
  strategy: sequential

steps:
  - name: run command
    targets: [local]
    action: cmd.run
    with:
      cmd: "echo hello"
`}return Zt(()=>{p()}),(H,M)=>(h(),g("section",Nm,[l("div",{class:"picker-header"},[M[2]||(M[2]=l("div",null,[l("h1",null,""),l("p",null,"")],-1)),l("div",{class:"actions"},[l("button",{class:"btn primary",type:"button",onClick:v},"")])]),l("div",Om,[l("aside",Pm,[M[4]||(M[4]=l("div",{class:"panel-title"},"",-1)),s.value?(h(),g("button",{key:0,class:"recent-card",type:"button",onClick:M[0]||(M[0]=V=>a(s.value))},[l("div",Lm,T(s.value),1),M[3]||(M[3]=l("div",{class:"recent-meta"}," 5 ",-1))])):(h(),g("div",Vm,"")),M[5]||(M[5]=l("div",{class:"panel-title small"},"",-1)),ae(l("input",{class:"search","onUpdate:modelValue":M[1]||(M[1]=V=>n.value=V),type:"text",placeholder:""},null,512),[[$e,n.value]]),M[6]||(M[6]=l("div",{class:"tag-row"},[l("button",{class:"tag",type:"button"},""),l("button",{class:"tag",type:"button"},""),l("button",{class:"tag",type:"button"},"")],-1))]),l("section",Dm,[l("div",Bm,[M[7]||(M[7]=l("div",null,"",-1)),l("div",Um,T(c.value.length)+" ",1)]),l("div",jm,[o.value?(h(),g("div",Hm,"...")):i.value?(h(),g("div",Fm,T(i.value),1)):(h(),g(fe,{key:2},[(h(!0),g(fe,null,Te(c.value,V=>(h(),g("button",{key:V.name,class:"workflow-card",type:"button",onClick:U=>a(V.name)},[l("div",Km,[l("div",qm,T(V.name),1),l("span",{class:Ie(["status",V.status])},T(b(V.status)),3)]),l("div",Gm,T(V.desc),1),l("div",Ym,[l("span",null," "+T(R(V.updatedAt)),1)]),V.tags.length?(h(),g("div",zm,[(h(!0),g(fe,null,Te(V.tags,U=>(h(),g("span",{class:"chip",key:U},T(U),1))),128))])):J("",!0)],8,Wm))),128)),c.value.length===0?(h(),g("div",Zm,"  ")):J("",!0)],64))])])])]))}}),Qm=Kt(Jm,[["__scopeId","data-v-a03d09cf"]]),Xm={class:"studio"},eg={class:"panel workflow-bar fade-in"},tg={class:"workflow-meta"},ng={class:"title-row"},sg=["value"],lg=["value"],og={class:"workflow-actions"},ig={class:"env-block"},ag={class:"env-select"},rg=["value"],ug=["disabled"],cg={key:0,class:"chip-row"},dg=["onClick"],fg={key:1,class:"empty"},vg={class:"action-row"},pg=["disabled"],hg=["disabled"],mg={key:0,class:"run-message"},gg={class:"save"},yg={class:"studio-body"},_g={class:"panel steps-panel fade-in"},bg={key:0,class:"warning-banner"},wg={key:1,class:"empty"},kg={key:2,class:"steps-list"},$g=["data-step-index","onDragover","onDrop"],Sg={class:"step-index"},xg=["onDragstart"],Eg={class:"step-body"},Cg={class:"step-row"},Rg={class:"field"},Ig=["value","onBlur"],Ag={class:"field"},Tg=["value","onChange"],Mg=["value"],Ng={class:"field"},Og={class:"target-input"},Pg=["value","onBlur"],Lg=["onClick"],Vg={key:0,class:"cmd-panel"},Dg={class:"field"},Bg=["value","onBlur"],Ug={class:"field"},jg=["value","onBlur"],Hg={key:1,class:"script-panel"},Fg={class:"inline-choice"},Wg=["name","checked","onChange"],Kg=["name","checked","onChange"],qg=["value","onBlur"],Gg={key:1,class:"script-library"},Yg={class:"field"},zg=["value","onChange"],Zg=["value"],Jg={class:"script-actions"},Qg=["disabled","onClick"],Xg={key:0,class:"muted"},e1={key:1,class:"muted"},t1={key:2,class:"muted"},n1={class:"env-set-header"},s1=["onClick"],l1={key:0,class:"env-set-preview"},o1={key:1,class:"empty"},i1={key:2,class:"env-editor"},a1={class:"env-grid"},r1=["onUpdate:modelValue"],u1=["onUpdate:modelValue"],c1=["onClick"],d1={class:"env-actions"},f1=["onClick"],v1={key:0,class:"muted"},p1={class:"step-summary"},h1={key:0,class:"required"},m1={key:1,class:"warning"},g1=["onClick"],y1=["onClick"],_1=["onClick"],b1={key:3,class:"step-errors"},w1={class:"step-advanced-toggle"},k1=["onClick"],$1={key:4,class:"step-advanced"},S1={key:0,class:"advanced-action"},x1={class:"advanced-grid"},E1={key:0,class:"field"},C1=["value","onBlur"],R1={class:"field"},I1=["value","onBlur"],A1={class:"field"},T1=["value","onBlur"],M1={class:"field"},N1=["value","onBlur"],O1={class:"field"},P1=["value","onBlur"],L1={key:3,class:"field"},V1=["value","onBlur"],D1={class:"advanced-grid"},B1={class:"field"},U1=["value","onBlur"],j1={class:"field"},H1=["value","onBlur"],F1={class:"field"},W1=["value","onBlur"],K1={class:"field"},q1=["value","onBlur"],G1={class:"field"},Y1=["value","onBlur"],z1={key:1,class:"advanced-env"},Z1={class:"env-meta"},J1={key:0,class:"pill"},Q1={key:1,class:"muted"},X1=["onClick"],ey={key:2,class:"env-editor"},ty={class:"env-grid"},ny=["onUpdate:modelValue"],sy=["onUpdate:modelValue"],ly=["onClick"],oy={class:"env-actions"},iy=["onClick"],ay={key:0,class:"muted"},ry={class:"panel aux-panel fade-in"},uy={class:"aux-section",open:""},cy={class:"flow-canvas"},dy={class:"node-title"},fy={class:"node-meta"},vy={key:0,class:"node-targets"},py={key:0,class:"empty"},hy={class:"modal-card"},my={class:"field"},gy={class:"field"},yy={class:"field"},_y={key:0,class:"field"},by={key:1,class:"field"},wy={class:"inline-choice"},ky={class:"modal-card editor-modal"},$y={class:"editor-header"},Sy={class:"toolbar"},xy={class:"dropdown"},Ey={key:0,class:"menu"},Cy=["onClick"],Ry={class:"editor-panel"},Iy={class:"editor-wrap"},Ay={class:"editor-highlight","aria-hidden":"true"},Ty={class:"editor-validation"},My={class:"errors"},Ny={class:"modal-card"},Oy={class:"inventory-toolbar"},Py={class:"inventory-add"},Ly={class:"inventory-section"},Vy={key:0,class:"empty"},Dy={key:1,class:"inventory-hosts"},By=["value","onBlur"],Uy=["value","onBlur"],jy=["onClick"],Hy={class:"inventory-host-add"},Fy={class:"inventory-section"},Wy={key:0,class:"empty"},Ky={key:1,class:"inventory-list"},qy={class:"group-header"},Gy=["value","onBlur"],Yy=["onClick"],zy={class:"host-list"},Zy=["value","onBlur"],Jy=["onClick"],Qy={class:"host-add"},Xy=["onUpdate:modelValue"],e_=["onClick"],t_={class:"modal-card"},n_={key:0,class:"muted"},s_={key:1,class:"env-preview"},l_={key:0,class:"muted"},o_={key:1,class:"empty"},i_={key:2,class:"env-grid"},a_={class:"muted"},r_={class:"modal-card"},u_={class:"detail-meta"},c_={class:"pill"},d_={class:"muted"},f_={class:"detail-section"},v_={class:"yaml-preview"},p_={key:0,class:"muted"},h_={key:1,class:"detail-section"},m_={class:"yaml-preview"},g_={key:2,class:"detail-section"},y_={class:"muted"},__={class:"modal-card"},b_={key:0,class:"muted"},w_={key:1,class:"detail-section"},k_={class:"detail-meta"},$_={class:"pill"},S_={key:0,class:"muted"},x_={key:0,class:"muted"},E_={class:"yaml-preview"},C_={class:"modal-card"},R_={key:0,class:"target-picker"},I_={class:"target-option"},A_=["value"],T_={class:"target-hosts"},M_=["value"],N_={key:0,class:"target-group"},O_={class:"target-hosts"},P_=["value"],L_={key:1,class:"empty"},V_=xt({__name:"WorkflowStudioView",setup(e){const t=Gs(),n=Hl(),s=re(()=>String(t.params.name||"workflow")),o=re(()=>`/workflows/${s.value}/flow`),i=P(po(s.value)),r=P(""),c=P(""),a=P(!1),v=P(!1),p=P(null),b=P(!1),R=P(!1),E=P(!0),H=P(!1),M=P({ok:!0,issues:[]}),V=P(!1);let U=null;const $=P([]),N=P(null),L=P(null),A=P([]),q=P(""),ve=P([]),Ee=P([]),ze=P(!1),qe=P(""),je=P(!1),st=P(!1),Ze=P(!1),Xe=P(""),ue=P(""),Q=P(""),oe=P(""),X=P({}),_e=P(!1),Ce=P(""),be=P(_i()),Re=P(null),Pe=P(!1),D=P(null),B=P(!1),ne=P(null),S=P(!1),Z=P(null),K=P(null),se=P([]),ge=P(null),_=P([]),k=P(null),I=P([]),j=P(null),F=P({}),W=[{label:"cmd.run",value:`  - name: run command
    targets: [web]
    action: cmd.run
    with:
      cmd: "echo hello"
`},{label:"template.render",value:`  - name: render config
    targets: [web]
    action: template.render
    with:
      src: nginx.conf.j2
      dest: /etc/nginx/nginx.conf
`},{label:"service.ensure",value:`  - name: ensure service
    targets: [web]
    action: service.ensure
    with:
      name: nginx
      state: started
`},{label:"pkg.install",value:`  - name: install package
    targets: [web]
    action: pkg.install
    with:
      name: nginx
`},{label:"env.set",value:`  - name: set env
    targets: [local]
    action: env.set
    with:
      env:
        TOKEN: ""
`},{label:"script.shell",value:`  - name: run shell script
    targets: [web]
    action: script.shell
    with:
      script: |
        echo "hello from shell"
`},{label:"script.python",value:`  - name: run python script
    targets: [web]
    action: script.python
    with:
      script: |
        import platform
        print(platform.platform())
`}],le=["cmd.run","script.shell","script.python","env.set","template.render","pkg.install","service.ensure","service.restart"],ee=re(()=>qo(i.value));re(()=>hu(i.value)),re(()=>mu(i.value));const te=re(()=>du(i.value)),z=re(()=>vu(i.value)),ye=re(()=>{const d=new Set;for(const u of ee.value)u.action&&!Kn(u.action)&&d.add(u.action);return Array.from(d)}),ie=re(()=>ee.value.map(d=>ro(d))),pe=re(()=>{const d=Xe.value.trim().toLowerCase();return d?te.value.map(u=>{const m=u.name.toLowerCase().includes(d),f=u.hosts.filter(w=>w.name.toLowerCase().includes(d));return m?u:f.length?{...u,hosts:f}:null}).filter(u=>!!u):te.value}),Se=re(()=>{const d=Xe.value.trim().toLowerCase();return d?z.value.filter(u=>u.name.toLowerCase().includes(d)||u.address.toLowerCase().includes(d)):z.value}),Ne=re(()=>M.value.ok?"":""),He=re(()=>i.value.split(/\r?\n/)),Be=re(()=>new Set($.value)),vt=re(()=>H.value?"":b.value?"":V.value?"":p.value?` ${yu(p.value)}`:"");function pt(d){r.value=d.target.value}function Nt(d){c.value=d.target.value}function Et(){a.value=!1;const d=r.value.trim();d&&(i.value=gi(i.value,"name",d)),i.value=gi(i.value,"description",c.value.trim())}function yt(){a.value||(r.value=yi(i.value,"name")||s.value,c.value=yi(i.value,"description"))}function yn(){Ze.value=!Ze.value,Ze.value||(Xe.value="",ue.value="",Q.value="",oe.value="",X.value={})}function gt(){const d=ue.value.trim()||"new-group";i.value=Gn(i.value,u=>{const m=sn(d,u.map(f=>f.name));return[...u,{name:m,hosts:[]}]}),ue.value=""}function Ot(d,u){const m=u.trim();m&&(i.value=Gn(i.value,f=>{if(!f[d])return f;const w=f.map((C,Y)=>Y===d?"":C.name).filter(Boolean);return f[d].name=sn(m,w),f}))}function Fn(d){i.value=Gn(i.value,u=>u.filter((m,f)=>f!==d))}function _n(d){const m=(X.value[d]||"").trim();m&&(i.value=Gn(i.value,f=>{if(!f[d])return f;const w=f[d].hosts,C=sn(m,w);return f[d].hosts=[...w,C],f}),X.value={...X.value,[d]:""})}function Fl(d,u,m){const f=m.trim();f&&(i.value=Gn(i.value,w=>{if(!w[d])return w;const C=w[d].hosts;if(!C[u])return w;const Y=C.filter((G,he)=>he!==u);return C[u]=sn(f,Y),w[d].hosts=[...C],w}))}function ds(d,u){i.value=Gn(i.value,m=>(m[d]&&(m[d].hosts=m[d].hosts.filter((f,w)=>w!==u)),m))}function Wl(){const d=Q.value.trim();if(!d)return;const u=oe.value.trim();i.value=ul(i.value,m=>{const f=sn(d,m.map(w=>w.name));return[...m,{name:f,address:u}]}),Q.value="",oe.value=""}function fs(d,u){const m=u.trim();m&&(i.value=ul(i.value,f=>{if(!f[d])return f;const w=f.filter((C,Y)=>Y!==d).map(C=>C.name);return f[d].name=sn(m,w),f}))}function Kl(d,u){const m=u.trim();i.value=ul(i.value,f=>(f[d]&&(f[d].address=m),f))}function ql(d){i.value=ul(i.value,u=>u.filter((m,f)=>f!==d))}function sn(d,u){if(!u.includes(d))return d;let m=1,f=`${d}-${m}`;for(;u.includes(f);)m+=1,f=`${d}-${m}`;return f}function Gl(){v.value=!v.value}function Ys(d){i.value=`${i.value.trim()}

${d}`,v.value=!1}function Yl(){be.value=_i(),je.value=!0}function zs(){je.value=!1}function zl(){st.value=!0}function vs(){st.value=!1,v.value=!1}function Zl(){const d=Jr(be.value);i.value=eu(i.value,d),je.value=!1}function Jl(d,u){const m=u.trim();m&&(i.value=rl(i.value,d,"name",m))}function Ql(d,u){const m=u.trim();m&&(i.value=rl(i.value,d,"action",m))}function ps(d,u){i.value=rl(i.value,d,"targets",u)}function Wn(d){return d.replace(/[\[\]]/g,"").replace(/['"]/g,"").trim()}function hs(d,u){return k.value===d&&I.value.length?I.value.join(", "):fo(u).join(", ")}function qt(d,u,m){i.value=qn(i.value,d,u,m,!1)}function Xl(d,u,m){i.value=qn(i.value,d,u,m,!1,!0)}function Mn(d,u,m){i.value=qn(i.value,d,u,m,!0)}function ln(d){return d.scriptRefPresent?"library":"inline"}function ms(d,u){if(u==="inline")i.value=qn(i.value,d,"script_ref","",!1);else{const m=qn(i.value,d,"script","",!0);i.value=qn(m,d,"script_ref","",!1,!0)}}function eo(d){const u=ee.value[d];I.value=u?fo(u.targets):[],k.value=d}function bn(){k.value=null,I.value=[]}function to(){if(k.value===null)return;const u=Xr(I.value).join(", ");i.value=rl(i.value,k.value,"targets",u),bn()}function no(){const d=t.query.step;return typeof d=="string"?d:Array.isArray(d)&&d[0]||""}function so(){const d=no();if(!d){j.value=null;return}const u=ee.value.findIndex(m=>m.name===d);u<0||(j.value=u,Ks(()=>{const m=document.querySelector(`[data-step-index="${u}"]`);m&&m.scrollIntoView({behavior:"smooth",block:"center"})}))}function lo(d){i.value=ou(i.value,d)}function oo(d){i.value=iu(i.value,d)}function Nn(d,u,m){const f=u==="loop"||u==="notify"?uu:on;i.value=tu(i.value,d,u,m,f)}function gs(d){const u=new Set(se.value);u.has(d)?(u.delete(d),ge.value===d&&(ge.value=null,_.value=[])):u.add(d),se.value=Array.from(u)}function Zs(d){return se.value.includes(d)}function Js(d){if(ge.value===d){ge.value=null,_.value=[];return}const u=ee.value[d];ge.value=d,_.value=ol(u==null?void 0:u.env)}function Qs(){_.value=[..._.value,{key:"",value:""}]}function Xs(d){_.value=_.value.filter((u,m)=>m!==d)}async function el(d){if(ge.value!==d)return;const u={};for(const w of _.value){const C=w.key.trim();C&&(u[C]=w.value)}const m=nu(i.value,d,u);m!==i.value&&(i.value=m),_.value=ol(u),F.value={...F.value,[d]:"..."};const f=await zr();F.value={...F.value,[d]:f?"":""},window.setTimeout(()=>{const w={...F.value};delete w[d],F.value=w},1500)}function tl(d,u){Z.value=d,K.value=d,u.dataTransfer&&(u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain",String(d)))}function io(d){K.value!==d&&(K.value=d)}function nl(){K.value=null}function ot(){Z.value=null,K.value=null}function sl(d,u){var w;u.preventDefault();const m=(w=u.dataTransfer)==null?void 0:w.getData("text/plain"),f=Z.value??(m?Number(m):Number.NaN);if(Number.isNaN(f)){Z.value=null,K.value=null;return}f!==d&&(i.value=au(i.value,f,d)),Z.value=null,K.value=null}function Lt(d){return d.replace(/^['"]|['"]$/g,"")}function Kn(d){return le.includes(d)}function ao(d){return d==="template.render"||d==="pkg.install"||d==="service.ensure"||d==="service.restart"}function ro(d){const u=[],m=[],f=(w,C)=>{u.includes(w)||u.push(w),m.includes(C)||m.push(C)};return d.name.trim()||f("step.name",""),Wn(d.targets)||f("step.targets",""),d.action?Kn(d.action)?(d.action==="cmd.run"?(!d.cmd||!d.cmd.trim())&&f("with.cmd",""):d.action.startsWith("script.")?d.scriptRefPresent?d.scriptRef||f("with.script_ref",""):(!d.script||!d.script.trim())&&f("with.script",""):d.action==="env.set"?d.env&&Object.keys(d.env).length||f("with.env",""):d.action==="pkg.install"?d.withName||f("with.name",""):d.action==="template.render"?(d.src||f("with.src",""),d.dest||f("with.dest","")):d.action==="service.ensure"?(d.withName||f("with.name",""),d.state||f("with.state","")):d.action==="service.restart"&&(d.withName||f("with.name","")),{missing:u,messages:m}):(m.includes("")||m.push(""),{missing:u,messages:m}):(f("step.action",""),{missing:u,messages:m})}function _t(d,u){const m=ie.value[d];return m?m.missing.includes(u):!1}function ll(d){var u;return((u=ie.value[d])==null?void 0:u.messages)||[]}function ol(d){if(!d)return[{key:"",value:""}];const u=Object.entries(d);return u.length?u.map(([m,f])=>({key:m,value:f})):[{key:"",value:""}]}async function uo(){try{const d=await Le("/envs");A.value=d.items||[]}catch{A.value=[]}}async function x(){ze.value=!0,qe.value="";try{const d=await Le("/scripts");Ee.value=d.items||[]}catch{qe.value="",Ee.value=[]}finally{ze.value=!1}}function y(d,u){let m="";d==="script.shell"?m="shell":d==="script.python"&&(m="python");const f=Ee.value.filter(w=>!m||w.language===m);return u&&!f.some(w=>w.name===u)?[{name:u,language:m},...f]:f}function O(){if(!q.value)return;const d=Array.from(new Set([...ve.value,q.value]));i.value=Si(i.value,d),q.value=""}function ce(d){const u=ve.value.filter(m=>m!==d);i.value=Si(i.value,u)}async function we(){if(q.value){Pe.value=!0,Re.value={name:q.value,env:{}};try{const d=await Le(`/envs/${q.value}`);Re.value={name:d.name,description:d.description,env:d.env||{}}}catch{Re.value={name:q.value,env:{}}}finally{Pe.value=!1}}}function Ve(){Re.value=null}async function at(d){if(d){B.value=!0,D.value={name:d,language:"",content:""};try{const u=await Le(`/scripts/${d}`);D.value={name:u.name,language:u.language||"",description:u.description,tags:u.tags||[],content:u.content||""}}catch{D.value={name:d,language:"",content:""}}finally{B.value=!1}}}function rt(){D.value=null,B.value=!1}async function Ct(d){const u=ee.value[d];if(!u)return;let m=su(i.value,d);if(!m&&u.name&&(m=lu(i.value,u.name)),m||(m=" YAML"),S.value=!!(u.scriptRef&&!u.script),ne.value={name:u.name,action:u.action,targets:u.targets,yaml:m,scriptRef:u.scriptRef,scriptContent:u.script||""},u.scriptRef&&!u.script){try{const f=await Le(`/scripts/${u.scriptRef}`);ne.value&&(ne.value.scriptContent=f.content||"")}catch{ne.value&&(ne.value.scriptContent="")}S.value=!1}}function Je(){ne.value=null,S.value=!1}async function il(){if(!_e.value){_e.value=!0,Ce.value="...";try{await Le(`/workflows/${s.value}/plan`,{method:"POST"}),Ce.value=""}catch(d){const u=d;Ce.value=u.message?`: ${u.message}`:""}finally{_e.value=!1}}}async function al(){if(!_e.value){_e.value=!0,Ce.value="...";try{const d=await Le(`/workflows/${s.value}/apply`,{method:"POST"});Ce.value="",d.run_id&&n.push(`/runs/${d.run_id}`)}catch(d){const u=d;Ce.value=u.message?`: ${u.message}`:""}finally{_e.value=!1}}}async function co(){try{const d=await Le(`/workflows/${s.value}/validate`,{method:"POST",body:{yaml:i.value}});M.value={ok:d.ok,issues:d.issues||[]},$.value=d.ok?[]:bi(M.value.issues,i.value)}catch(d){const u=d;M.value={ok:!1,issues:[u.message?`: ${u.message}`:""]},$.value=bi(M.value.issues,i.value)}}function qr(){const u=i.value.split(/\r?\n/).map(m=>m.replace(/\t/g,"  ").replace(/\s+$/g,""));i.value=u.join(`
`).trimEnd()+`
`,co()}async function ys(){if(b.value)return R.value=!0,!1;b.value=!0;let d=!1;try{await Le(`/workflows/${s.value}`,{method:"PUT",body:{yaml:i.value}}),p.value=new Date,V.value=!1,d=!0}catch(u){const m=u;M.value={ok:!1,issues:[m.message?`: ${m.message}`:""]},d=!1}finally{b.value=!1}return E.value=d,R.value?(R.value=!1,ys()):d}function Gr(d){return new Promise(u=>{window.setTimeout(u,d)})}async function Yr(d=3e3){const u=Date.now();for(;(b.value||R.value)&&Date.now()-u<d;)await Gr(80);return!b.value&&!R.value}async function zr(){return await ys(),await Yr(),E.value}function Zr(){H.value||(V.value=!0,U&&window.clearTimeout(U),U=window.setTimeout(()=>{ys()},800))}function fi(){U&&(window.clearTimeout(U),U=null)}function vi(d){(d.metaKey||d.ctrlKey)&&d.key.toLowerCase()==="s"&&(d.preventDefault(),ys())}Zt(()=>{document.addEventListener("keydown",vi),pi(),uo(),x()}),Ll(()=>{document.removeEventListener("keydown",vi),fi()}),ft(s,()=>{pi()}),ft(i,()=>{Zr(),ve.value=gu(i.value),$.value.length&&($.value=[]),yt()}),_f(async()=>{fi(),V.value&&await ys()}),ft(()=>[ee.value.length,t.query.step],()=>{so()});async function pi(){H.value=!0;try{const d=await Le(`/workflows/${s.value}`);i.value=d.yaml||po(s.value),p.value=new Date,V.value=!1,$.value=[]}catch(d){if(d.status===404){const u=po(s.value);i.value=u;try{await Le(`/workflows/${s.value}`,{method:"PUT",body:{yaml:u}}),p.value=new Date,V.value=!1,$.value=[]}catch{p.value=null,M.value={ok:!1,issues:[""]}}}else M.value={ok:!1,issues:[""]}}finally{H.value=!1}await co()}function hi(){if(!N.value||!L.value)return;const d=N.value.scrollTop,u=N.value.scrollLeft;L.value.style.transform=`translate(${-u}px, ${-d}px)`}function Jr(d){const u=d.name.trim()||"new step",m=fo(d.targets),f=[`  - name: ${u}`];if(m.length&&f.push(`    targets: [${m.join(", ")}]`),f.push(`    action: ${d.action}`),f.push("    with:"),d.action==="cmd.run")f.push(...mi("cmd",d.cmd||"echo hello"));else if(d.action.startsWith("script."))if(d.scriptSource==="library"){const w=d.scriptRef.trim()||"script-name";f.push(`      script_ref: ${w}`)}else f.push(...mi("script",d.script||'echo "hello"'));else d.action==="env.set"?(f.push("      env:"),f.push("        KEY: VALUE")):d.action==="pkg.install"?f.push("      name: package-name"):d.action==="template.render"?(f.push("      src: template.j2"),f.push("      dest: /etc/example.conf")):d.action.startsWith("service.")&&(f.push("      name: service-name"),d.action==="service.ensure"&&f.push("      state: started"));return f}function mi(d,u){const m=u.trim();if(!m)return[`      ${d}: ""`];if(m.includes(`
`)){const f=m.split(/\r?\n/).map(w=>`        ${w}`);return[`      ${d}: |`,...f]}return[`      ${d}: ${on(m)}`]}function Qr(d,u,m,f,w=!1){const C=`${m}  `;if(!u)return w?[`${C}${d}: ""`]:[];if(f&&u.includes(`
`)){const Y=u.split(/\r?\n/).map(G=>`${C}  ${G}`);return[`${C}${d}: |`,...Y]}return[`${C}${d}: ${on(u)}`]}function fo(d){return Wn(d).split(",").map(m=>m.trim()).filter(Boolean)}function Xr(d){const u=[],m=new Set;for(const f of d){const w=f.trim();!w||m.has(w)||(m.add(w),u.push(w))}return u}function eu(d,u){const m=d.split(/\r?\n/),f=bs(m),w=[...u,""];if(!f)return[...m,"","steps:",...w].join(`
`).trimEnd()+`
`;const C=f.end,Y=m.slice(0,C),G=m.slice(C);return[...Y,"",...w,...G].join(`
`).trimEnd()+`
`}function rl(d,u,m,f){var et;const w=d.split(/\r?\n/),C=bs(w);if(!C)return d;const Y=ws(w);if(u<0||u>=Y.length)return d;const G=Y[u]-1,he=u+1<Y.length?Y[u+1]-1:C.end,Me=w.slice(G,he),ke=(et=Me[0])==null?void 0:et.match(/^(\s*)-/),nt=ke?ke[1]:"  ",de=`${nt}  `;if(m==="name"&&(Me[0]=`${nt}- name: ${f}`),m==="action"){const Oe=Me.findIndex(ht=>new RegExp(`^${de}actions*:`).test(ht));Oe>=0?Me[Oe]=`${de}action: ${f}`:Me.splice(1,0,`${de}action: ${f}`)}if(m==="targets"){const Oe=Me.findIndex(Rt=>new RegExp(`^${de}targetss*:`).test(Rt)),ht=Wn(f);if(Oe>=0){let Rt=0;for(let De=Oe+1;De<Me.length;De+=1){const ut=Me[De];if(ut.trim()===""){Rt+=1;continue}if(ut.match(/^(\s*)/)[1].length<=de.length)break;Rt+=1}Rt&&Me.splice(Oe+1,Rt)}if(!ht)Oe>=0&&Me.splice(Oe,1);else{const Rt=`${de}targets: [${ht}]`;Oe>=0?Me[Oe]=Rt:Me.splice(1,0,Rt)}}return[...w.slice(0,G),...Me,...w.slice(he)].join(`
`)}function qn(d,u,m,f,w,C=!1){var Pn;const Y=_s(d);if(!Y||u<0||u>=Y.blocks.length)return d;const G=[...Y.blocks[u]],he=(Pn=G[0])==null?void 0:Pn.match(/^(\s*)-/),ke=`${he?he[1]:"  "}  `,nt=G.findIndex(ct=>new RegExp(`^${ke}with\\s*:$`).test(ct)),de=f.trim(),me=Qr(m,de,ke,w,C);if(nt===-1){if(!me.length)return d;G.push(`${ke}with:`),G.push(...me);const ct=[...Y.blocks];return ct[u]=G,On(Y.lines,ct,Y.sectionStart,Y.sectionEnd)}const et=ke.length;let Oe=nt+1;for(;Oe<G.length;){const ct=G[Oe];if(ct.trim()===""){Oe+=1;continue}if(ct.match(/^(\s*)/)[1].length<=et)break;Oe+=1}const ht=`${ke}  `,Rt=new RegExp(`^${ht}${vo(m)}\\s*:`),De=G.findIndex((ct,kn)=>kn>nt&&kn<Oe&&Rt.test(ct));if(De===-1)me.length&&G.splice(Oe,0,...me);else{let ct=De+1;for(;ct<Oe;){const kn=G[ct];if(kn.trim()===""){ct+=1;continue}if(kn.match(/^(\s*)/)[1].length<=ht.length)break;ct+=1}me.length?G.splice(De,ct-De,...me):G.splice(De,ct-De)}const ut=[...Y.blocks];return ut[u]=G,On(Y.lines,ut,Y.sectionStart,Y.sectionEnd)}function tu(d,u,m,f,w=on){var De;const C=d.split(/\r?\n/),Y=bs(C);if(!Y)return d;const G=ws(C);if(u<0||u>=G.length)return d;const he=G[u]-1,Me=u+1<G.length?G[u+1]-1:Y.end,ke=C.slice(he,Me),nt=(De=ke[0])==null?void 0:De.match(/^(\s*)-/),me=`${nt?nt[1]:"  "}  `,et=new RegExp(`^${me}${m}\\s*:`),Oe=ke.findIndex(ut=>et.test(ut)),ht=f.trim();if(!ht)Oe>=0&&ke.splice(Oe,1);else{const ut=w(ht);if(ut){const Pn=`${me}${m}: ${ut}`;if(Oe>=0)ke[Oe]=Pn;else{const ct=ke.findIndex(xi=>new RegExp(`^${me}with\\s*:`).test(xi)),kn=ct>=0?ct:ke.length;ke.splice(kn,0,Pn)}}}return[...C.slice(0,he),...ke,...C.slice(Me)].join(`
`)}function nu(d,u,m){var Rt;const f=_s(d);if(!f||u<0||u>=f.blocks.length)return d;const w=[...f.blocks[u]],C=(Rt=w[0])==null?void 0:Rt.match(/^(\s*)-/),G=`${C?C[1]:"  "}  `,he=G.length,Me=w.findIndex(De=>new RegExp(`^${G}with\\s*:$`).test(De)),ke=Object.entries(m).filter(([De])=>De.trim()!==""),nt=ke.map(([De,ut])=>`${G}    ${De}: ${on(ut)}`),de=ke.length?[`${G}  env:`,...nt]:[];if(Me===-1){if(!de.length)return d;w.push(`${G}with:`),w.push(...de);const De=[...f.blocks];return De[u]=w,On(f.lines,De,f.sectionStart,f.sectionEnd)}let me=Me+1;for(;me<w.length;){const De=w[me];if(De.trim()===""){me+=1;continue}if(De.match(/^(\s*)/)[1].length<=he)break;me+=1}const et=`${G}  `,Oe=w.findIndex((De,ut)=>ut>Me&&ut<me&&new RegExp(`^${et}env\\s*:$`).test(De));if(Oe===-1)de.length&&w.splice(me,0,...de);else{let De=Oe+1;for(;De<me;){const ut=w[De];if(ut.trim()===""){De+=1;continue}if(ut.match(/^(\s*)/)[1].length<=et.length)break;De+=1}de.length?w.splice(Oe,De-Oe,...de):w.splice(Oe,De-Oe)}const ht=[...f.blocks];return ht[u]=w,On(f.lines,ht,f.sectionStart,f.sectionEnd)}function su(d,u){const m=d.split(/\r?\n/),f=bs(m);if(!f)return"";const w=ws(m);if(u<0||u>=w.length)return"";const C=w[u]-1,Y=u+1<w.length?w[u+1]-1:f.end;return m.slice(C,Y).join(`
`).trimEnd()}function lu(d,u){const m=d.split(/\r?\n/),f=new RegExp(`^\\s*-\\s*name\\s*:\\s*${vo(u)}\\s*$`);let w=-1;for(let G=0;G<m.length;G+=1)if(f.test(m[G])){w=G;break}if(w<0)return"";const C=m[w].match(/^(\s*)/)[1].length;let Y=w+1;for(;Y<m.length;){const G=m[Y];if(G.trim()===""){Y+=1;continue}if(G.match(/^(\s*)/)[1].length<=C&&/^\s*-\s*name\s*:/i.test(G))break;Y+=1}return m.slice(w,Y).join(`
`).trimEnd()}function ou(d,u){const m=_s(d);if(!m||u<0||u>=m.blocks.length)return d;const f=[...m.blocks],w=[...f[u]];return f.splice(u+1,0,w),On(m.lines,f,m.sectionStart,m.sectionEnd)}function iu(d,u){const m=_s(d);if(!m||u<0||u>=m.blocks.length)return d;const f=[...m.blocks];return f.splice(u,1),On(m.lines,f,m.sectionStart,m.sectionEnd)}function au(d,u,m){const f=_s(d);if(!f||u<0||u>=f.blocks.length||m<0||m>=f.blocks.length)return d;const w=[...f.blocks],[C]=w.splice(u,1);return w.splice(m,0,C),On(f.lines,w,f.sectionStart,f.sectionEnd)}function _s(d){const u=d.split(/\r?\n/),m=bs(u);if(!m)return null;const f=ws(u),w=f.map((C,Y)=>{const G=C-1,he=Y+1<f.length?f[Y+1]-1:m.end;return u.slice(G,he)});return{lines:u,blocks:w,sectionStart:m.start,sectionEnd:m.end}}function On(d,u,m,f){const w=u.map(G=>ru(G));if(w.length===0)return[...d.slice(0,m+1),...d.slice(f)].join(`
`).trimEnd()+`
`;const C=[];return w.forEach((G,he)=>{he>0&&C.push(""),C.push(...G)}),[...d.slice(0,m+1),...C,...d.slice(f)].join(`
`).trimEnd()+`
`}function ru(d){const u=[...d];for(;u.length&&u[0].trim()==="";)u.shift();for(;u.length&&u[u.length-1].trim()==="";)u.pop();return u}function bs(d){const u=d.findIndex(w=>/^\s*steps\s*:\s*$/.test(w));if(u===-1)return null;const m=d[u].match(/^(\s*)/)[1].length;let f=u+1;for(;f<d.length;){const w=d[f];if(w.trim()===""){f+=1;continue}if(w.match(/^(\s*)/)[1].length<=m&&/^\s*[a-zA-Z0-9_-]+\s*:/i.test(w))break;f+=1}return{start:u,end:f}}function gi(d,u,m){const f=d.split(/\r?\n/),w=f.findIndex(Y=>new RegExp(`^${u}s*:`).test(Y)),C=`${u}: ${on(m)}`;if(w===-1){const Y=an(f,"version")??0;return[...f.slice(0,Y+1),C,...f.slice(Y+1)].join(`
`).trimEnd()+`
`}return f[w]=C,f.join(`
`)}function yi(d,u){const m=d.match(new RegExp(`^${u}s*:s*(.*)$`,"m"));return m?m[1].replace(/^"|"$/g,"").trim():""}function on(d){return d===""?'""':/[:#]/.test(d)||d.includes('"')?JSON.stringify(d):d}function uu(d){const u=d.trim();if(!u)return"";if(u.startsWith("[")||u.startsWith("{"))return u;if(u.includes(",")){const m=u.split(",").map(f=>f.trim()).filter(Boolean).map(f=>on(f));return m.length?`[${m.join(", ")}]`:""}return on(u)}function _i(){return{name:"",action:"cmd.run",targets:"",cmd:"",scriptSource:"inline",script:"",scriptRef:""}}function bi(d,u){const m=u.split(/\r?\n/),f=new Set,w=ws(m),C=Y=>{Y&&Y>0&&Y<=m.length&&f.add(Y)};for(const Y of d){const G=Y.match(/line\s+(\d+)/i);if(G){C(Number(G[1]));continue}if(/version is required/i.test(Y)){C(wn(m,"version")||1);continue}if(/name is required/i.test(Y)){C(wn(m,"name")||1);continue}if(/steps must not be empty/i.test(Y)){C(wn(m,"steps")||m.length);continue}if(/plan\.mode/i.test(Y)){C(wi(m,"plan","mode")||wn(m,"plan"));continue}if(/plan\.strategy/i.test(Y)){C(wi(m,"plan","strategy")||wn(m,"plan"));continue}const he=Y.match(/steps\[(\d+)\]/i);if(he){const ke=Number(he[1]);C(w[ke]||wn(m,"steps")||1);continue}const Me=Y.match(/step name \"([^\"]+)\"/i);if(Me){const ke=Me[1],nt=cu(m,ke);nt.length&&nt.forEach(de=>C(de));continue}/handler/i.test(Y)&&C(wn(m,"handlers")||wn(m,"steps")||1)}return Array.from(f).sort((Y,G)=>Y-G)}function wn(d,u){const m=new RegExp(`^${u}\\s*:\\s*`);for(let f=0;f<d.length;f+=1)if(m.test(d[f]))return f+1;return null}function wi(d,u,m){const f=new RegExp(`^(\\s*)${u}\\s*:\\s*$`),w=new RegExp(`^\\s*${m}\\s*:\\s*`);let C=!1,Y=0;for(let G=0;G<d.length;G+=1){const he=d[G],Me=he.match(f);if(Me){C=!0,Y=Me[1].length;continue}if(C){if(he.match(/^(\\s*)/)[1].length<=Y&&he.trim()!==""){C=!1;continue}if(w.test(he))return G+1}}return null}function ws(d){const u=[];let m=!1,f=0;for(let w=0;w<d.length;w+=1){const C=d[w],Y=C.match(/^(\\s*)steps\\s*:\\s*$/);if(Y){m=!0,f=Y[1].length;continue}if(m){if(C.match(/^(\\s*)/)[1].length<=f&&C.trim()!==""){m=!1;continue}/^\\s*-\\s*name\\s*:/i.test(C)&&u.push(w+1)}}return u}function cu(d,u){const m=[],f=new RegExp(`^\\s*-\\s*name\\s*:\\s*${vo(u)}\\s*$`);for(let w=0;w<d.length;w+=1)f.test(d[w])&&m.push(w+1);return m}function vo(d){return d.replace(/[.*+?^${}()|[\\]\\]/g,"\\$&")}function du(d){return ki(d).map((m,f)=>({name:m.name,index:f,hosts:m.hosts.map((w,C)=>({name:w,index:C}))}))}function ki(d){const u=d.split(/\r?\n/),m=[];let f=!1,w=0,C=!1,Y=0,G=null,he=!1,Me=0;for(const ke of u){const nt=ke.match(/^(\s*)inventory\s*:\s*$/);if(nt){f=!0,w=nt[1].length,C=!1,G=null;continue}if(f&&ke.match(/^(\s*)/)[1].length<=w&&ke.trim()!==""){f=!1,C=!1,G=null,he=!1;continue}if(!f)continue;const de=ke.match(/^(\s*)groups\s*:\s*$/);if(de){C=!0,Y=de[1].length,G=null,he=!1;continue}if(C){const me=ke.match(/^(\s*)/)[1].length;if(me<=Y&&ke.trim()!==""){C=!1,G=null,he=!1;continue}const et=ke.match(/^\s*([a-zA-Z0-9_-]+)\s*:\s*$/);if(et&&me===Y+2){G={name:et[1],hosts:[]},m.push(G),he=!1;continue}if(G){if(ke.match(/^\s*hosts\s*:\s*$/)){he=!0,Me=me;continue}if(he){if(ke.trim()==="")continue;if(me<=Me){he=!1;continue}const ht=ke.match(/^\s*-\s*([a-zA-Z0-9_.-]+)\s*$/);ht&&G.hosts.push(ht[1])}}}}return m}function Gn(d,u){const m=ki(d),f=u([...m]);return fu(d,f)}function fu(d,u){const m=d.split(/\r?\n/),f=m.findIndex(de=>/^inventory\s*:\s*$/.test(de)),w=de=>{const me=" ".repeat(de);if(!u.length)return[`${me}groups: {}`];const et=[`${me}groups:`];for(const Oe of u)if(et.push(`${me}  ${Oe.name}:`),Oe.hosts.length){et.push(`${me}    hosts:`);for(const ht of Oe.hosts)et.push(`${me}      - ${ht}`)}else et.push(`${me}    hosts: []`);return et};if(f===-1){const de=["inventory:",...w(2)],me=an(m,"vars")??an(m,"plan")??an(m,"steps")??m.length;return[...m.slice(0,me),...de,"",...m.slice(me)].join(`
`).trimEnd()+`
`}const C=m[f].match(/^(\s*)/)[1].length;let Y=f+1;for(;Y<m.length;){const de=m[Y];if(de.trim()===""){Y+=1;continue}if(de.match(/^(\s*)/)[1].length<=C&&/^[a-zA-Z0-9_-]+\s*:/i.test(de))break;Y+=1}const G=m.findIndex((de,me)=>me>f&&me<Y&&new RegExp("^\\s*groups\\s*:\\s*$").test(de)),he=C+2,Me=w(he);if(G===-1){const de=f+1;return[...m.slice(0,de),...Me,"",...m.slice(de)].join(`
`).trimEnd()+`
`}let ke=G+1;for(;ke<Y;){const de=m[ke];if(de.trim()===""){ke+=1;continue}if(de.match(/^(\s*)/)[1].length<=he&&de.trim()!=="")break;ke+=1}return[...m.slice(0,G),...Me,...m.slice(ke)].join(`
`).trimEnd()+`
`}function vu(d){return $i(d).map((m,f)=>({name:m.name,address:m.address,index:f}))}function $i(d){const u=d.split(/\r?\n/),m=[];let f=!1,w=0,C=!1,Y=0,G=null;for(const he of u){const Me=he.match(/^(\s*)inventory\s*:\s*$/);if(Me){f=!0,w=Me[1].length,C=!1,G=null;continue}if(f&&he.match(/^(\s*)/)[1].length<=w&&he.trim()!==""){f=!1,C=!1,G=null;continue}if(!f)continue;const ke=he.match(/^(\s*)hosts\s*:\s*$/);if(ke&&ke[1].length===w+2){C=!0,Y=ke[1].length,G=null;continue}if(C){const nt=he.match(/^(\s*)/)[1].length;if(nt<=Y&&he.trim()!==""){C=!1,G=null;continue}const de=he.match(/^\s*([a-zA-Z0-9_-]+)\s*:\s*$/);if(de&&nt===Y+2){G={name:de[1],address:""},m.push(G);continue}if(G){const me=he.match(/^\s*address\s*:\s*(.+)$/);me&&(G.address=Lt(me[1].trim()))}}}return m}function ul(d,u){const m=$i(d),f=u([...m]);return pu(d,f)}function pu(d,u){const m=d.split(/\r?\n/),f=m.findIndex(de=>/^inventory\s*:\s*$/.test(de)),w=de=>{const me=" ".repeat(de);if(!u.length)return[`${me}hosts: {}`];const et=[`${me}hosts:`];for(const Oe of u)et.push(`${me}  ${Oe.name}:`),Oe.address?et.push(`${me}    address: ${on(Oe.address)}`):et.push(`${me}    address: ""`);return et};if(f===-1){const de=["inventory:",...w(2)],me=an(m,"vars")??an(m,"plan")??an(m,"steps")??m.length;return[...m.slice(0,me),...de,"",...m.slice(me)].join(`
`).trimEnd()+`
`}const C=m[f].match(/^(\s*)/)[1].length;let Y=f+1;for(;Y<m.length;){const de=m[Y];if(de.trim()===""){Y+=1;continue}if(de.match(/^(\s*)/)[1].length<=C&&/^[a-zA-Z0-9_-]+\s*:/i.test(de))break;Y+=1}const G=m.findIndex((de,me)=>me>f&&me<Y&&new RegExp("^\\s*hosts\\s*:\\s*$").test(de)),he=C+2,Me=w(he);if(G===-1){const de=f+1;return[...m.slice(0,de),...Me,"",...m.slice(de)].join(`
`).trimEnd()+`
`}let ke=G+1;for(;ke<Y;){const de=m[ke];if(de.trim()===""){ke+=1;continue}if(de.match(/^(\s*)/)[1].length<=he&&de.trim()!=="")break;ke+=1}return[...m.slice(0,G),...Me,...m.slice(ke)].join(`
`).trimEnd()+`
`}function hu(d){const u=d.split(/\r?\n/),m=[];let f=!1,w=0;for(const C of u){const Y=C.match(/^(\s*)hosts\s*:\s*$/);if(Y){f=!0,w=Y[1].length;continue}if(f){if(C.match(/^(\s*)/)[1].length<=w){f=!1;continue}const he=C.match(/^\s*([a-zA-Z0-9_-]+)\s*:\s*$/);he&&m.push(he[1])}}return Array.from(new Set(m))}function mu(d){const u=d.split(/\r?\n/),m=[];let f=!1,w=0;for(const C of u){const Y=C.match(/^(\s*)vars\s*:\s*$/);if(Y){f=!0,w=Y[1].length;continue}if(f){if(C.match(/^(\s*)/)[1].length<=w){f=!1;continue}const he=C.match(/^\s*([a-zA-Z0-9_-]+)\s*:/);he&&m.push(he[1])}}return Array.from(new Set(m))}function gu(d){const u=d.split(/\r?\n/),m=[];let f=!1,w=0;for(const C of u){const Y=C.match(/^(\s*)env_packages\s*:\s*$/);if(Y){f=!0,w=Y[1].length;continue}if(f){if(C.match(/^(\s*)/)[1].length<=w&&C.trim()!==""){f=!1;continue}const he=C.match(/^\s*-\s*([a-zA-Z0-9_-]+)\s*$/);he&&m.push(he[1])}}return Array.from(new Set(m))}function Si(d,u){const m=d.split(/\r?\n/),f=u.length?["env_packages:",...u.map(G=>`  - ${G}`)]:[],w=m.findIndex(G=>/^env_packages\s*:\s*$/.test(G));if(w===-1){if(!f.length)return d;const G=an(m,"plan")??an(m,"steps")??m.length;return[...m.slice(0,G),...f,"",...m.slice(G)].join(`
`).trimEnd()+`
`}let C=w+1;for(;C<m.length;){const G=m[C];if(G.trim()===""){C+=1;continue}if(/^[a-zA-Z0-9_-]+\s*:/i.test(G)&&!/^\s/.test(G))break;C+=1}return f.length?[...m.slice(0,w),...f,...m.slice(C)].join(`
`).trimEnd()+`
`:[...m.slice(0,w),...m.slice(C)].join(`
`).trimEnd()+`
`}function an(d,u){const m=new RegExp(`^${u}\\s*:\\s*$`);for(let f=0;f<d.length;f+=1)if(m.test(d[f]))return f;return null}function yu(d){return d.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function po(d){return`version: v0.1
name: ${d}
description: install and config nginx

inventory:
  groups:
    web:
      hosts:
        - web1
        - web2
  vars:
    ssh_user: ops

vars:
  conf_src: nginx.conf.j2

plan:
  mode: manual-approve
  strategy: sequential

steps:
  - name: install package
    targets: [web]
    action: pkg.install
    with:
      name: nginx

  - name: render config
    targets: [web]
    action: template.render
    with:
      src: nginx.conf.j2
      dest: /etc/nginx/nginx.conf

  - name: ensure service
    targets: [web]
    action: service.ensure
    with:
      name: nginx
      state: started
`}return(d,u)=>{const m=ls("RouterLink");return h(),g("section",Xm,[l("header",eg,[l("div",tg,[l("div",ng,[l("input",{class:"title-input",value:r.value,placeholder:"",onFocus:u[0]||(u[0]=f=>a.value=!0),onBlur:Et,onInput:pt},null,40,sg),l("button",{class:"btn ghost",type:"button",onClick:yn}," / "),Ue(m,{class:"btn ghost",to:o.value},{default:bt(()=>[...u[19]||(u[19]=[tt("",-1)])]),_:1},8,["to"])]),l("textarea",{class:"desc-input",value:c.value,placeholder:"",rows:"2",onFocus:u[1]||(u[1]=f=>a.value=!0),onBlur:Et,onInput:Nt},null,40,lg),u[20]||(u[20]=l("div",{class:"meta-hint"}," / ",-1))]),l("div",og,[l("div",ig,[u[22]||(u[22]=l("div",{class:"label"}," ()",-1)),l("div",ag,[ae(l("select",{"onUpdate:modelValue":u[2]||(u[2]=f=>q.value=f)},[u[21]||(u[21]=l("option",{value:""},"",-1)),(h(!0),g(fe,null,Te(A.value,f=>(h(),g("option",{key:f.name,value:f.name},T(f.name),9,rg))),128))],512),[[Wt,q.value]]),l("button",{class:"btn",type:"button",onClick:O},""),l("button",{class:"btn ghost",type:"button",disabled:!q.value,onClick:we},"  ",8,ug)]),ve.value.length?(h(),g("div",cg,[(h(!0),g(fe,null,Te(ve.value,f=>(h(),g("span",{class:"chip",key:f},[tt(T(f)+" ",1),l("button",{class:"chip-remove",type:"button",onClick:w=>ce(f)},"  ",8,dg)]))),128))])):(h(),g("div",fg,""))]),l("div",vg,[l("button",{class:"btn",type:"button",disabled:_e.value,onClick:il},"  ",8,pg),l("button",{class:"btn primary",type:"button",disabled:_e.value,onClick:al},"  ",8,hg),Ce.value?(h(),g("div",mg,T(Ce.value),1)):J("",!0),l("div",gg,T(vt.value),1)])])]),l("div",yg,[l("section",_g,[l("div",{class:"steps-header"},[u[23]||(u[23]=l("div",null,[l("h2",null,""),l("p",null,"")],-1)),l("div",{class:"steps-actions"},[l("button",{class:"btn",type:"button",onClick:zl},""),l("button",{class:"btn primary",type:"button",onClick:Yl},"  ")])]),ye.value.length?(h(),g("div",bg," : "+T(ye.value.join(""))+" ",1)):J("",!0),ee.value.length===0?(h(),g("div",wg,"  ")):(h(),g("div",kg,[(h(!0),g(fe,null,Te(ee.value,(f,w)=>(h(),g("div",{class:Ie(["step-card",{dragging:Z.value===w,over:K.value===w,highlight:j.value===w}]),key:`${f.name}-${w}`,"data-step-index":w,onDragover:mt(C=>io(w),["prevent"]),onDragleave:nl,onDrop:C=>sl(w,C)},[l("div",Sg,[l("span",null,T(w+1),1),l("button",{class:"drag-handle",type:"button",title:"",draggable:"true",onDragstart:C=>tl(w,C),onDragend:ot},"  ",40,xg)]),l("div",Eg,[l("div",Cg,[l("div",Rg,[u[24]||(u[24]=l("span",null,"",-1)),l("input",{value:f.name,type:"text",placeholder:"",class:Ie({error:_t(w,"step.name")}),onBlur:C=>Jl(w,C.target.value)},null,42,Ig)]),l("div",Ag,[u[26]||(u[26]=l("span",null,"",-1)),l("select",{value:f.action,class:Ie({error:_t(w,"step.action")}),onChange:C=>Ql(w,C.target.value)},[f.action&&!Kn(f.action)?(h(),g("option",{key:0,value:f.action},T(f.action)+" () ",9,Mg)):J("",!0),u[25]||(u[25]=is('<option value="cmd.run" data-v-593c778a>cmd.run</option><option value="script.shell" data-v-593c778a>script.shell</option><option value="script.python" data-v-593c778a>script.python</option><option value="pkg.install" data-v-593c778a>pkg.install</option><option value="template.render" data-v-593c778a>template.render</option><option value="service.ensure" data-v-593c778a>service.ensure</option><option value="service.restart" data-v-593c778a>service.restart</option><option value="env.set" data-v-593c778a>env.set</option>',8))],42,Tg)]),l("div",Ng,[u[27]||(u[27]=l("span",null,"/",-1)),l("div",Og,[(h(),g("input",{value:hs(w,f.targets),type:"text",placeholder:"web, db",class:Ie({error:_t(w,"step.targets")}),key:`targets-${f.targets}-${w}`,onBlur:C=>ps(w,C.target.value)},null,42,Pg)),l("button",{class:"btn ghost",type:"button",onClick:C=>eo(w)},"  ",8,Lg)])])]),f.action==="cmd.run"?(h(),g("div",Vg,[l("label",Dg,[u[28]||(u[28]=l("span",null,"",-1)),l("textarea",{value:f.cmd||"",rows:"3",placeholder:"df -h",class:Ie({error:_t(w,"with.cmd")}),onBlur:C=>Mn(w,"cmd",C.target.value)},null,42,Bg)]),l("label",Ug,[u[29]||(u[29]=l("span",null,"",-1)),l("input",{value:f.dir||"",type:"text",placeholder:"/var/log",onBlur:C=>qt(w,"dir",C.target.value)},null,40,jg)])])):f.action.startsWith("script.")?(h(),g("div",Hg,[l("div",Fg,[l("label",null,[l("input",{type:"radio",name:`script-source-${w}`,checked:ln(f)==="inline",onChange:C=>ms(w,"inline")},null,40,Wg),u[30]||(u[30]=tt("  ",-1))]),l("label",null,[l("input",{type:"radio",name:`script-source-${w}`,checked:ln(f)==="library",onChange:C=>ms(w,"library")},null,40,Kg),u[31]||(u[31]=tt("  ",-1))])]),ln(f)==="inline"?(h(),g("textarea",{key:0,value:f.script||"",rows:"4",placeholder:"echo 'hello'",class:Ie({error:_t(w,"with.script")}),onBlur:C=>Mn(w,"script",C.target.value)},null,42,qg)):(h(),g("div",Gg,[l("label",Yg,[u[33]||(u[33]=l("span",null,"",-1)),l("select",{value:f.scriptRef||"",class:Ie({error:_t(w,"with.script_ref")}),onChange:C=>Xl(w,"script_ref",C.target.value)},[u[32]||(u[32]=l("option",{value:""},"",-1)),(h(!0),g(fe,null,Te(y(f.action,f.scriptRef),C=>(h(),g("option",{key:C.name,value:C.name},T(C.name),9,Zg))),128))],42,zg)]),l("div",Jg,[l("button",{class:"btn ghost",type:"button",onClick:x},""),l("button",{class:"btn",type:"button",disabled:!f.scriptRef,onClick:C=>at(f.scriptRef||"")},"  ",8,Qg)]),ze.value?(h(),g("div",Xg,"...")):qe.value?(h(),g("div",e1,T(qe.value),1)):y(f.action,f.scriptRef).length===0?(h(),g("div",t1,"  ")):J("",!0)]))])):J("",!0),f.action==="env.set"?(h(),g("div",{key:2,class:Ie(["env-set-panel",{error:_t(w,"with.env")}])},[l("div",n1,[u[34]||(u[34]=l("span",{class:"muted"},"",-1)),l("button",{class:"btn ghost",type:"button",onClick:C=>Js(w)},T(ge.value===w?"":""),9,s1)]),f.env&&Object.keys(f.env).length?(h(),g("div",l1,[(h(!0),g(fe,null,Te(f.env,(C,Y)=>(h(),g("span",{class:"chip",key:Y},T(Y)+"="+T(C),1))),128))])):(h(),g("div",o1,"")),ge.value===w?(h(),g("div",i1,[l("div",a1,[u[35]||(u[35]=l("div",{class:"env-header"},[l("span",null,""),l("span",null,""),l("span")],-1)),(h(!0),g(fe,null,Te(_.value,(C,Y)=>(h(),g("div",{class:"env-row",key:Y},[ae(l("input",{"onUpdate:modelValue":G=>C.key=G,type:"text",placeholder:"KEY"},null,8,r1),[[$e,C.key]]),ae(l("input",{"onUpdate:modelValue":G=>C.value=G,type:"text",placeholder:"VALUE"},null,8,u1),[[$e,C.value]]),l("button",{class:"btn ghost danger",type:"button",onClick:G=>Xs(Y)},"  ",8,c1)]))),128))]),l("div",d1,[l("button",{class:"btn ghost",type:"button",onClick:Qs},""),l("button",{class:"btn primary",type:"button",onClick:C=>el(w)},"  ",8,f1),F.value[w]?(h(),g("span",v1,T(F.value[w]),1)):J("",!0)])])):J("",!0)],2)):J("",!0),l("div",p1,[f.required?(h(),g("span",h1,T(f.required),1)):J("",!0),f.action&&!Kn(f.action)?(h(),g("span",m1,"  ")):J("",!0),l("button",{class:"btn ghost",type:"button",onClick:C=>lo(w)},"",8,g1),l("button",{class:"btn ghost danger",type:"button",onClick:C=>oo(w)},"",8,y1),l("button",{class:"btn ghost",type:"button",onClick:C=>Ct(w)},"  ",8,_1)]),ll(w).length?(h(),g("div",b1,T(ll(w).join("")),1)):J("",!0),l("div",w1,[l("button",{class:"btn ghost",type:"button",onClick:C=>gs(w)},T(Zs(w)?"":""),9,k1)]),Zs(w)?(h(),g("div",$1,[ao(f.action)?(h(),g("div",S1,[u[42]||(u[42]=l("div",{class:"advanced-title"},"",-1)),l("div",x1,[f.action==="pkg.install"?(h(),g("label",E1,[u[36]||(u[36]=l("span",null,"",-1)),l("input",{value:f.withName||"",type:"text",placeholder:"nginx",class:Ie({error:_t(w,"with.name")}),onBlur:C=>qt(w,"name",C.target.value)},null,42,C1)])):f.action==="template.render"?(h(),g(fe,{key:1},[l("label",R1,[u[37]||(u[37]=l("span",null,"",-1)),l("input",{value:f.src||"",type:"text",placeholder:"nginx.conf.j2",class:Ie({error:_t(w,"with.src")}),onBlur:C=>qt(w,"src",C.target.value)},null,42,I1)]),l("label",A1,[u[38]||(u[38]=l("span",null,"",-1)),l("input",{value:f.dest||"",type:"text",placeholder:"/etc/nginx/nginx.conf",class:Ie({error:_t(w,"with.dest")}),onBlur:C=>qt(w,"dest",C.target.value)},null,42,T1)])],64)):f.action==="service.ensure"?(h(),g(fe,{key:2},[l("label",M1,[u[39]||(u[39]=l("span",null,"",-1)),l("input",{value:f.withName||"",type:"text",placeholder:"nginx",class:Ie({error:_t(w,"with.name")}),onBlur:C=>qt(w,"name",C.target.value)},null,42,N1)]),l("label",O1,[u[40]||(u[40]=l("span",null,"",-1)),l("input",{value:f.state||"",type:"text",placeholder:"started",class:Ie({error:_t(w,"with.state")}),onBlur:C=>qt(w,"state",C.target.value)},null,42,P1)])],64)):f.action==="service.restart"?(h(),g("label",L1,[u[41]||(u[41]=l("span",null,"",-1)),l("input",{value:f.withName||"",type:"text",placeholder:"nginx",class:Ie({error:_t(w,"with.name")}),onBlur:C=>qt(w,"name",C.target.value)},null,42,V1)])):J("",!0)])])):J("",!0),l("div",D1,[l("label",B1,[u[43]||(u[43]=l("span",null,"when",-1)),l("input",{value:f.when||"",type:"text",placeholder:": inventory.hostname == 'web1'",onBlur:C=>Nn(w,"when",C.target.value)},null,40,U1)]),l("label",j1,[u[44]||(u[44]=l("span",null,"retries",-1)),l("input",{value:f.retries||"",type:"text",placeholder:": 3",onBlur:C=>Nn(w,"retries",C.target.value)},null,40,H1)]),l("label",F1,[u[45]||(u[45]=l("span",null,"timeout",-1)),l("input",{value:f.timeout||"",type:"text",placeholder:": 60s",onBlur:C=>Nn(w,"timeout",C.target.value)},null,40,W1)]),l("label",K1,[u[46]||(u[46]=l("span",null,"loop",-1)),l("input",{value:f.loop||"",type:"text",placeholder:": a,b,c",onBlur:C=>Nn(w,"loop",C.target.value)},null,40,q1)]),l("label",G1,[u[47]||(u[47]=l("span",null,"notify",-1)),l("input",{value:f.notify||"",type:"text",placeholder:": handler-a, handler-b",onBlur:C=>Nn(w,"notify",C.target.value)},null,40,Y1)])]),f.action!=="env.set"?(h(),g("div",z1,[l("div",Z1,[u[48]||(u[48]=l("span",{class:"muted"},"",-1)),Object.keys(f.env||{}).length?(h(),g("span",J1,"  "+T(Object.keys(f.env||{}).length)+"  ",1)):(h(),g("span",Q1,""))]),l("button",{class:"btn ghost",type:"button",onClick:C=>Js(w)},T(ge.value===w?"":"/"),9,X1)])):J("",!0),ge.value===w?(h(),g("div",ey,[l("div",ty,[u[49]||(u[49]=l("div",{class:"env-header"},[l("span",null,""),l("span",null,""),l("span")],-1)),(h(!0),g(fe,null,Te(_.value,(C,Y)=>(h(),g("div",{class:"env-row",key:Y},[ae(l("input",{"onUpdate:modelValue":G=>C.key=G,type:"text",placeholder:"KEY"},null,8,ny),[[$e,C.key]]),ae(l("input",{"onUpdate:modelValue":G=>C.value=G,type:"text",placeholder:"VALUE"},null,8,sy),[[$e,C.value]]),l("button",{class:"btn ghost danger",type:"button",onClick:G=>Xs(Y)},"  ",8,ly)]))),128))]),l("div",oy,[l("button",{class:"btn ghost",type:"button",onClick:Qs},""),l("button",{class:"btn primary",type:"button",onClick:C=>el(w)},"  ",8,iy),F.value[w]?(h(),g("span",ay,T(F.value[w]),1)):J("",!0)])])):J("",!0)])):J("",!0)])],42,$g))),128))]))]),l("aside",ry,[l("details",uy,[u[50]||(u[50]=l("summary",null,"",-1)),l("div",cy,[(h(!0),g(fe,null,Te(ee.value,f=>(h(),g("div",{class:"flow-node",key:f.name},[l("div",dy,T(f.name),1),l("div",fy,T(f.action||""),1),f.targets?(h(),g("div",vy,": "+T(f.targets),1)):J("",!0)]))),128)),ee.value.length===0?(h(),g("div",py,"")):J("",!0)])])])]),je.value?(h(),g("div",{key:0,class:"modal",onClick:mt(zs,["self"])},[l("div",hy,[u[59]||(u[59]=l("h3",null,"",-1)),l("label",my,[u[51]||(u[51]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":u[3]||(u[3]=f=>be.value.name=f),type:"text",placeholder:""},null,512),[[$e,be.value.name]])]),l("label",gy,[u[53]||(u[53]=l("span",null,"",-1)),ae(l("select",{"onUpdate:modelValue":u[4]||(u[4]=f=>be.value.action=f)},[...u[52]||(u[52]=[is('<option value="cmd.run" data-v-593c778a>cmd.run</option><option value="script.shell" data-v-593c778a>script.shell</option><option value="script.python" data-v-593c778a>script.python</option><option value="pkg.install" data-v-593c778a>pkg.install</option><option value="template.render" data-v-593c778a>template.render</option><option value="service.ensure" data-v-593c778a>service.ensure</option><option value="service.restart" data-v-593c778a>service.restart</option><option value="env.set" data-v-593c778a>env.set</option>',8)])],512),[[Wt,be.value.action]])]),l("label",yy,[u[54]||(u[54]=l("span",null,"/",-1)),ae(l("input",{"onUpdate:modelValue":u[5]||(u[5]=f=>be.value.targets=f),type:"text",placeholder:"web, db"},null,512),[[$e,be.value.targets]])]),be.value.action==="cmd.run"?(h(),g("div",_y,[u[55]||(u[55]=l("span",null,"",-1)),ae(l("textarea",{"onUpdate:modelValue":u[6]||(u[6]=f=>be.value.cmd=f),rows:"4",placeholder:"df -h"},null,512),[[$e,be.value.cmd]])])):be.value.action.startsWith("script.")?(h(),g("div",by,[u[58]||(u[58]=l("span",null,"",-1)),l("div",wy,[l("label",null,[ae(l("input",{type:"radio",value:"inline","onUpdate:modelValue":u[7]||(u[7]=f=>be.value.scriptSource=f)},null,512),[[na,be.value.scriptSource]]),u[56]||(u[56]=tt("  ",-1))]),l("label",null,[ae(l("input",{type:"radio",value:"library","onUpdate:modelValue":u[8]||(u[8]=f=>be.value.scriptSource=f)},null,512),[[na,be.value.scriptSource]]),u[57]||(u[57]=tt("  ",-1))])]),be.value.scriptSource==="inline"?ae((h(),g("textarea",{key:0,"onUpdate:modelValue":u[9]||(u[9]=f=>be.value.script=f),rows:"4",placeholder:"echo 'hello'"},null,512)),[[$e,be.value.script]]):ae((h(),g("input",{key:1,"onUpdate:modelValue":u[10]||(u[10]=f=>be.value.scriptRef=f),type:"text",placeholder:""},null,512)),[[$e,be.value.scriptRef]])])):J("",!0),l("div",{class:"modal-actions"},[l("button",{class:"btn ghost",type:"button",onClick:zs},""),l("button",{class:"btn primary",type:"button",onClick:Zl},"")])])])):J("",!0),st.value?(h(),g("div",{key:1,class:"modal",onClick:mt(vs,["self"])},[l("div",ky,[l("div",$y,[u[60]||(u[60]=l("h3",null,"YAML ",-1)),l("div",Sy,[l("button",{class:"btn",type:"button",onClick:qr},""),l("button",{class:"btn",type:"button",onClick:co},""),l("div",xy,[l("button",{class:"btn",type:"button",onClick:Gl},""),v.value?(h(),g("div",Ey,[(h(),g(fe,null,Te(W,f=>l("button",{class:"menu-item",type:"button",key:f.label,onClick:w=>Ys(f.value)},T(f.label),9,Cy)),64))])):J("",!0)])])]),l("div",Ry,[l("div",Iy,[l("div",Ay,[l("div",{class:"editor-highlight-inner",ref_key:"highlightInnerRef",ref:L},[(h(!0),g(fe,null,Te(He.value,(f,w)=>(h(),g("span",{key:w,class:Ie(["line",{error:Be.value.has(w+1)}])},T(f.length?f:" "),3))),128))],512)]),ae(l("textarea",{ref_key:"editorRef",ref:N,class:"editor","onUpdate:modelValue":u[11]||(u[11]=f=>i.value=f),spellcheck:"false",wrap:"off",onScroll:hi,onInput:hi},null,544),[[$e,i.value]])]),l("div",Ty,[l("div",{class:Ie(["validation",M.value.ok?"ok":"warn"])},T(Ne.value),3),l("ul",My,[(h(!0),g(fe,null,Te(M.value.issues,f=>(h(),g("li",{key:f},T(f),1))),128))])])]),l("div",{class:"modal-actions"},[l("button",{class:"btn primary",type:"button",onClick:vs},"")])])])):J("",!0),Ze.value?(h(),g("div",{key:2,class:"modal",onClick:mt(yn,["self"])},[l("div",Ny,[u[63]||(u[63]=l("h3",null,"/",-1)),l("div",Oy,[ae(l("input",{"onUpdate:modelValue":u[12]||(u[12]=f=>Xe.value=f),type:"text",placeholder:"",class:"inventory-search"},null,512),[[$e,Xe.value]]),l("div",Py,[ae(l("input",{"onUpdate:modelValue":u[13]||(u[13]=f=>ue.value=f),type:"text",placeholder:"",class:"inventory-input"},null,512),[[$e,ue.value]]),l("button",{class:"btn",type:"button",onClick:gt},"")])]),l("div",Ly,[u[61]||(u[61]=l("div",{class:"section-title"},"",-1)),Se.value.length===0?(h(),g("div",Vy,"  ")):(h(),g("div",Dy,[(h(!0),g(fe,null,Te(Se.value,f=>(h(),g("div",{class:"host-row",key:f.index},[l("input",{value:f.name,type:"text",class:"inventory-input",placeholder:"",onBlur:w=>fs(f.index,w.target.value)},null,40,By),l("input",{value:f.address,type:"text",class:"inventory-input",placeholder:"",onBlur:w=>Kl(f.index,w.target.value)},null,40,Uy),l("button",{class:"btn ghost danger",type:"button",onClick:w=>ql(f.index)},"  ",8,jy)]))),128))])),l("div",Hy,[ae(l("input",{"onUpdate:modelValue":u[14]||(u[14]=f=>Q.value=f),type:"text",class:"inventory-input",placeholder:""},null,512),[[$e,Q.value]]),ae(l("input",{"onUpdate:modelValue":u[15]||(u[15]=f=>oe.value=f),type:"text",class:"inventory-input",placeholder:"/"},null,512),[[$e,oe.value]]),l("button",{class:"btn ghost",type:"button",onClick:Wl},"  ")])]),l("div",Fy,[u[62]||(u[62]=l("div",{class:"section-title"},"",-1)),pe.value.length===0?(h(),g("div",Wy,"  ")):(h(),g("div",Ky,[(h(!0),g(fe,null,Te(pe.value,f=>(h(),g("div",{class:"inventory-group",key:f.name},[l("div",qy,[l("input",{value:f.name,type:"text",class:"inventory-input",onBlur:w=>Ot(f.index,w.target.value)},null,40,Gy),l("button",{class:"btn ghost danger",type:"button",onClick:w=>Fn(f.index)},"  ",8,Yy)]),l("div",zy,[(h(!0),g(fe,null,Te(f.hosts,w=>(h(),g("div",{class:"host-row",key:w.index},[l("input",{value:w.name,type:"text",class:"inventory-input",onBlur:C=>Fl(f.index,w.index,C.target.value)},null,40,Zy),l("button",{class:"btn ghost danger",type:"button",onClick:C=>ds(f.index,w.index)},"  ",8,Jy)]))),128)),l("div",Qy,[ae(l("input",{"onUpdate:modelValue":w=>X.value[f.index]=w,type:"text",class:"inventory-input",placeholder:""},null,8,Xy),[[$e,X.value[f.index]]]),l("button",{class:"btn ghost",type:"button",onClick:w=>_n(f.index)},"  ",8,e_)])])]))),128))]))]),l("div",{class:"modal-actions"},[l("button",{class:"btn primary",type:"button",onClick:yn},"")])])])):J("",!0),Re.value?(h(),g("div",{key:3,class:"modal",onClick:mt(Ve,["self"])},[l("div",t_,[l("h3",null,": "+T(Re.value.name),1),Pe.value?(h(),g("div",n_,"...")):(h(),g("div",s_,[Re.value.description?(h(),g("div",l_,T(Re.value.description),1)):J("",!0),Object.keys(Re.value.env).length===0?(h(),g("div",o_,"  ")):(h(),g("div",i_,[u[64]||(u[64]=l("div",{class:"env-header"},[l("span",null,""),l("span",null,"")],-1)),(h(!0),g(fe,null,Te(Re.value.env,(f,w)=>(h(),g("div",{class:"env-row",key:w},[l("span",null,T(w),1),l("span",a_,T(f),1)]))),128))]))])),l("div",{class:"modal-actions"},[l("button",{class:"btn primary",type:"button",onClick:Ve},"")])])])):J("",!0),ne.value?(h(),g("div",{key:4,class:"modal",onClick:mt(Je,["self"])},[l("div",r_,[l("h3",null,": "+T(ne.value.name||""),1),l("div",u_,[l("span",c_,T(ne.value.action||""),1),l("span",d_,": "+T(Wn(ne.value.targets)||""),1)]),l("div",f_,[u[65]||(u[65]=l("div",{class:"detail-title"},"",-1)),l("pre",v_,T(ne.value.yaml),1)]),S.value?(h(),g("div",p_,"...")):ne.value.scriptContent?(h(),g("div",h_,[u[66]||(u[66]=l("div",{class:"detail-title"},"",-1)),l("pre",m_,T(ne.value.scriptContent),1)])):ne.value.scriptRef?(h(),g("div",g_,[u[67]||(u[67]=l("div",{class:"detail-title"},"",-1)),l("div",y_,": "+T(ne.value.scriptRef),1)])):J("",!0),l("div",{class:"modal-actions"},[l("button",{class:"btn primary",type:"button",onClick:Je},"")])])])):J("",!0),D.value?(h(),g("div",{key:5,class:"modal",onClick:mt(rt,["self"])},[l("div",__,[l("h3",null,": "+T(D.value.name),1),B.value?(h(),g("div",b_,"...")):(h(),g("div",w_,[l("div",k_,[l("span",$_,T(D.value.language||""),1),D.value.tags&&D.value.tags.length?(h(),g("span",S_,T(D.value.tags.join("  ")),1)):J("",!0)]),D.value.description?(h(),g("div",x_,T(D.value.description),1)):J("",!0),l("pre",E_,T(D.value.content),1)])),l("div",{class:"modal-actions"},[l("button",{class:"btn primary",type:"button",onClick:rt},"")])])])):J("",!0),k.value!==null?(h(),g("div",{key:6,class:"modal",onClick:mt(bn,["self"])},[l("div",C_,[u[72]||(u[72]=l("h3",null,"",-1)),te.value.length||z.value.length?(h(),g("div",R_,[(h(!0),g(fe,null,Te(te.value,f=>(h(),g("div",{class:"target-group",key:f.name},[l("label",I_,[ae(l("input",{type:"checkbox",value:f.name,"onUpdate:modelValue":u[16]||(u[16]=w=>I.value=w)},null,8,A_),[[xo,I.value]]),u[68]||(u[68]=l("span",{class:"target-tag"},"",-1)),l("span",null,T(f.name),1)]),l("div",T_,[(h(!0),g(fe,null,Te(f.hosts,w=>(h(),g("label",{class:"target-option",key:w.name},[ae(l("input",{type:"checkbox",value:w.name,"onUpdate:modelValue":u[17]||(u[17]=C=>I.value=C)},null,8,M_),[[xo,I.value]]),u[69]||(u[69]=l("span",{class:"target-tag ghost"},"",-1)),l("span",null,T(w.name),1)]))),128))])]))),128)),z.value.length?(h(),g("div",N_,[u[71]||(u[71]=l("div",{class:"target-section-title"},"",-1)),l("div",O_,[(h(!0),g(fe,null,Te(z.value,f=>(h(),g("label",{class:"target-option",key:f.name},[ae(l("input",{type:"checkbox",value:f.name,"onUpdate:modelValue":u[18]||(u[18]=w=>I.value=w)},null,8,P_),[[xo,I.value]]),u[70]||(u[70]=l("span",{class:"target-tag ghost"},"",-1)),l("span",null,T(f.name),1)]))),128))])])):J("",!0)])):(h(),g("div",L_,"/")),l("div",{class:"modal-actions"},[l("button",{class:"btn ghost",type:"button",onClick:bn},""),l("button",{class:"btn primary",type:"button",onClick:to},"")])])])):J("",!0)])}}}),D_=Kt(V_,[["__scopeId","data-v-593c778a"]]),B_={class:"flow"},U_={class:"flow-header"},j_={class:"actions"},H_={class:"sync"},F_={class:"flow-body"},W_={class:"panel canvas"},K_={class:"canvas-area"},q_=["onClick"],G_={class:"node-title"},Y_={class:"node-meta"},z_={key:0,class:"node-targets"},Z_={key:0,class:"empty"},J_={class:"panel config"},Q_={key:0,class:"config-body"},X_={class:"field"},eb={class:"field"},tb={class:"field"},nb={class:"field-group"},sb=["onUpdate:modelValue"],lb=["onUpdate:modelValue"],ob=["onClick"],ib={class:"field-group"},ab={class:"bind-row"},rb=["value"],ub={key:1,class:"empty"},cb=xt({__name:"FlowView",setup(e){const t=Gs();Hl();const n=re(()=>String(t.params.name||"workflow")),s=P(Xe(n.value)),o=P(je(s.value)),i=Fs(ze(s.value)),r=P(0),c=P(""),a=P(!0),v=P(!1),p=P(!1),b=P("");P(!1),P("");let R=!1;const E=re(()=>i[r.value]),H=P(E.value?E.value.targets.join(", "):"");ft(()=>i,()=>{if(R){R=!1;return}L()},{deep:!0}),ft(()=>E.value,ue=>{ue&&(H.value=ue.targets.join(", "))});function M(ue){r.value=ue;const Q=i[ue];Q&&(H.value=Q.targets.join(", "))}function V(){E.value&&E.value.params.push({key:"",value:""})}function U(ue){E.value&&E.value.params.splice(ue,1)}function $(){if(!E.value||!c.value)return;E.value.params.length||E.value.params.push({key:"",value:""});const ue=E.value.params[E.value.params.length-1],Q="${"+c.value+"}";ue.value=`${ue.value||""}${ue.value?" ":""}${Q}`}function N(){if(!E.value)return;const ue=H.value.split(/,\s*/).map(Q=>Q.trim()).filter(Boolean);E.value.targets=ue}async function L(){a.value=!1;const ue=Ze(s.value||Xe(n.value),i);s.value=ue,o.value=je(ue),await ve(ue),a.value=!0}function A(){}async function q(){v.value=!0;try{const ue=await Le(`/workflows/${n.value}`);Ee(ue.yaml||Xe(n.value))}catch(ue){if(ue.status===404){const Q=Xe(n.value);Ee(Q);try{await ve(Q),b.value=""}catch{b.value=""}}else b.value=""}finally{v.value=!1}}async function ve(ue){if(!p.value){p.value=!0;try{await Le(`/workflows/${n.value}`,{method:"PUT",body:{yaml:ue}})}catch{b.value=""}finally{p.value=!1}}}function Ee(ue){R=!0,s.value=ue,o.value=je(ue);const Q=ze(ue);i.splice(0,i.length,...Q),r.value=0,c.value="",H.value=Q[0]?Q[0].targets.join(", "):""}function ze(ue){const Q=ue.split(/\r?\n/),oe=[];let X=null,_e=!1,Ce=0;for(const be of Q){const Re=be.match(/^\s*-\s*name\s*:\s*(.+)$/);if(Re){X={id:`node-${oe.length}`,name:Re[1].trim(),action:"",targets:[],params:[]},oe.push(X),_e=!1;continue}if(!X)continue;const Pe=be.match(/^\s*action\s*:\s*(.+)$/);if(Pe){X.action=Pe[1].trim();continue}const D=be.match(/^\s*targets\s*:\s*(.+)$/);if(D){X.targets=qe(D[1].trim());continue}const B=be.match(/^(\s*)with\s*:\s*$/);if(B){_e=!0,Ce=B[1].length;continue}if(_e){if(be.match(/^(\s*)/)[1].length<=Ce){_e=!1;continue}const S=be.match(/^\s*([a-zA-Z0-9_-]+)\s*:\s*(.+)$/);S&&X.params.push({key:S[1],value:S[2].trim()})}}return oe}function qe(ue){return ue.replace(/[\[\]]/g,"").split(/,\s*/).map(oe=>oe.trim()).filter(Boolean)}function je(ue){const Q=ue.split(/\r?\n/),oe=[];let X=!1,_e=0;for(const Ce of Q){const be=Ce.match(/^(\s*)vars\s*:\s*$/);if(be){X=!0,_e=be[1].length;continue}if(X){if(Ce.match(/^(\s*)/)[1].length<=_e){X=!1;continue}const Pe=Ce.match(/^\s*([a-zA-Z0-9_-]+)\s*:/);Pe&&oe.push(Pe[1])}}return Array.from(new Set(oe))}function st(ue){const Q=["steps:"];for(const oe of ue){if(Q.push(`  - name: ${oe.name||"step"}`),oe.targets.length&&Q.push(`    targets: [${oe.targets.join(", ")}]`),oe.action&&Q.push(`    action: ${oe.action}`),oe.params.length){Q.push("    with:");for(const X of oe.params)X.key&&Q.push(`      ${X.key}: ${X.value||""}`)}Q.push("")}return Q.join(`
`).trimEnd()}function Ze(ue,Q){const oe=ue.split(/\r?\n/),X=oe.findIndex(Re=>/^steps\s*:\s*$/.test(Re)),_e=st(Q).split(`
`);if(X===-1)return`${ue.trim()}

${_e.join(`
`)}`;let Ce=X+1;for(;Ce<oe.length;){const Re=oe[Ce];if(Re.trim()===""){Ce+=1;continue}if(/^[a-zA-Z0-9_-]+\s*:/i.test(Re)&&!/^\s/.test(Re))break;Ce+=1}return[...oe.slice(0,X),..._e,...oe.slice(Ce)].join(`
`)}ft(n,()=>{q()}),Zt(()=>{q()});function Xe(ue){return`version: v0.1
name: ${ue}
description: new workflow

inventory:
  hosts:
    local:
      address: 127.0.0.1

plan:
  mode: manual-approve
  strategy: sequential

steps:
  - name: run command
    targets: [local]
    action: cmd.run
    with:
      cmd: "echo hello"
`}return(ue,Q)=>{const oe=ls("RouterLink");return h(),g("section",B_,[l("div",U_,[l("div",null,[Q[4]||(Q[4]=l("h1",null,"",-1)),l("p",null,""+T(n.value)+"   YAML",1)]),l("div",j_,[Ue(oe,{class:"btn",to:`/workflows/${n.value}`},{default:bt(()=>[...Q[5]||(Q[5]=[tt("",-1)])]),_:1},8,["to"]),l("div",H_,[l("span",{class:Ie(["dot",a.value?"ok":"warn"])},null,2),tt(" "+T(a.value?"":"..."),1)])])]),l("div",F_,[l("div",W_,[l("div",{class:"panel-title"},[Q[6]||(Q[6]=l("div",null,"",-1)),l("button",{class:"ghost",type:"button",onClick:A},"")]),l("div",K_,[(h(!0),g(fe,null,Te(i,(X,_e)=>(h(),g("div",{class:Ie(["flow-node",{active:_e===r.value}]),key:X.id,onClick:Ce=>M(_e)},[l("div",G_,T(X.name),1),l("div",Y_,T(X.action||""),1),X.targets.length?(h(),g("div",z_," : "+T(X.targets.join(", ")),1)):J("",!0)],10,q_))),128)),i.length===0?(h(),g("div",Z_,"  ")):J("",!0)])]),l("aside",J_,[Q[15]||(Q[15]=l("div",{class:"panel-title"},"",-1)),E.value?(h(),g("div",Q_,[l("label",X_,[Q[7]||(Q[7]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":Q[0]||(Q[0]=X=>E.value.name=X),type:"text"},null,512),[[$e,E.value.name]])]),l("label",eb,[Q[9]||(Q[9]=l("span",null,"",-1)),ae(l("select",{"onUpdate:modelValue":Q[1]||(Q[1]=X=>E.value.action=X)},[...Q[8]||(Q[8]=[is('<option value="cmd.run" data-v-4f6a0bf7>cmd.run</option><option value="env.set" data-v-4f6a0bf7>env.set</option><option value="pkg.install" data-v-4f6a0bf7>pkg.install</option><option value="script.shell" data-v-4f6a0bf7>script.shell</option><option value="script.python" data-v-4f6a0bf7>script.python</option><option value="template.render" data-v-4f6a0bf7>template.render</option><option value="service.ensure" data-v-4f6a0bf7>service.ensure</option><option value="service.restart" data-v-4f6a0bf7>service.restart</option>',8)])],512),[[Wt,E.value.action]])]),l("label",tb,[Q[10]||(Q[10]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":Q[2]||(Q[2]=X=>H.value=X),type:"text",placeholder:"web1, web2",onBlur:N},null,544),[[$e,H.value]])]),l("div",nb,[Q[11]||(Q[11]=l("div",{class:"field-title"},"",-1)),(h(!0),g(fe,null,Te(E.value.params,(X,_e)=>(h(),g("div",{key:X.key,class:"param-row"},[ae(l("input",{"onUpdate:modelValue":Ce=>X.key=Ce,type:"text",placeholder:"key"},null,8,sb),[[$e,X.key]]),ae(l("input",{"onUpdate:modelValue":Ce=>X.value=Ce,type:"text",placeholder:"value"},null,8,lb),[[$e,X.value]]),l("button",{class:"ghost",type:"button",onClick:Ce=>U(_e)},"-",8,ob)]))),128)),l("button",{class:"btn",type:"button",onClick:V},"  ")]),l("div",ib,[Q[13]||(Q[13]=l("div",{class:"field-title"},"",-1)),l("div",ab,[ae(l("select",{"onUpdate:modelValue":Q[3]||(Q[3]=X=>c.value=X)},[Q[12]||(Q[12]=l("option",{value:""},"",-1)),(h(!0),g(fe,null,Te(o.value,X=>(h(),g("option",{key:X,value:X},T(X),9,rb))),128))],512),[[Wt,c.value]]),l("button",{class:"btn",type:"button",onClick:$},"  ")]),Q[14]||(Q[14]=l("div",{class:"hint"},"",-1))])])):(h(),g("div",ub,""))])])])}}}),db=Kt(cb,[["__scopeId","data-v-4f6a0bf7"]]),fb={class:"run"},vb={class:"run-header"},pb={class:"run-meta"},hb={key:0},mb={key:1,class:"mono"},gb={key:2,class:"message"},yb={key:3,class:"message warn"},_b={class:"actions"},bb={class:"filter"},wb=["disabled"],kb=["value"],$b={key:0,class:"empty"},Sb={key:1,class:"empty"},xb={key:2,class:"run-body"},Eb={class:"panel steps"},Cb={key:0,class:"empty"},Rb={key:0,class:"hint"},Ib=["onClick"],Ab={class:"step-name"},Tb={class:"step-meta"},Mb={key:1,class:"progress"},Nb={class:"main"},Ob={class:"panel terminal"},Pb={class:"terminal-window"},Lb={class:"terminal-head"},Vb={class:"title"},Db={class:"terminal-body"},Bb={key:0,class:"line muted"},Ub={key:1,class:"line err"},jb={key:0,class:"line muted"},Hb={class:"line muted"},Fb={key:0,class:"line"},Wb={key:1,class:"line err"},Kb={key:2,class:"line"},qb={key:3,class:"line err"},Gb={class:"panel details"},Yb={key:0,class:"empty"},zb={key:1,class:"detail-grid"},Zb={class:"kv"},Jb={class:"kv"},Qb={class:"kv"},Xb={key:0,class:"empty"},ew=xt({__name:"RunConsoleView",setup(e){const t=Gs(),n=re(()=>String(t.params.id||"")),s=P(null),o=P([]),i=P(0),r=P("all"),c=P(!1),a=P(""),v=P("");let p=null;const b=re(()=>{var D;return(D=s.value)!=null&&D.workflow_name?s.value.workflow_name:typeof t.query.workflow=="string"?t.query.workflow:""}),R=re(()=>{const D=o.value.find(B=>B.status==="failed");return(D==null?void 0:D.name)||""}),E=re(()=>{if(!b.value)return"/workflows";const D=R.value?`?step=${encodeURIComponent(R.value)}`:"";return`/workflows/${b.value}${D}`}),H=re(()=>{var D;return((D=s.value)==null?void 0:D.status)||"queued"}),M=re(()=>{var D;return((D=s.value)==null?void 0:D.message)||""}),V=re(()=>{const D=new Set;for(const B of o.value){const ne=B.hosts||{};Object.keys(ne).forEach(S=>D.add(S))}return Array.from(D)}),U=re(()=>o.value[i.value]),$=re(()=>{const D=U.value;if(!D||!D.hosts)return[];const B=Object.values(D.hosts);return r.value==="all"?B:B.filter(ne=>ne.host===r.value)}),N=re(()=>$.value.map(D=>{const{stdout:B,stderr:ne,extra:S}=qe(D.output);return{host:D.host,stdout:B,stderr:ne,extra:S,message:D.message||""}})),L=re(()=>{if(!o.value.length)return 0;const D=o.value.filter(B=>["success","failed","skipped","stopped"].includes(B.status)).length;return Math.round(D/o.value.length*100)});function A(D){i.value=D}function q(D){return{success:"",running:"",failed:"",queued:"",pending:"",stopped:"",skipped:""}[D]||D}function ve(D){if(!D)return"-";const B=Date.parse(D);return Number.isNaN(B)?"-":new Date(B).toLocaleString()}function Ee(D,B){const ne=D?Date.parse(D):NaN,S=B?Date.parse(B):NaN;if(Number.isNaN(ne)||Number.isNaN(S)||S<=ne)return"-";const Z=Math.floor((S-ne)/1e3),K=Math.floor(Z/60),se=Z%60;return K>0?`${K}m ${se}s`:`${se}s`}function ze(D){return D==null?"":typeof D=="string"?D.trimEnd():String(D)}function qe(D){if(!D)return{stdout:"",stderr:"",extra:""};const B=ze(D.stdout),ne=ze(D.stderr),S=Object.entries(D).filter(([K])=>K!=="stdout"&&K!=="stderr"),Z=S.length?JSON.stringify(Object.fromEntries(S),null,2):"";return{stdout:B,stderr:ne,extra:Z}}function je(D){return D.map(B=>({...B,hosts:B.hosts||{}}))}async function st(){var D,B;if(!n.value){a.value=" ID";return}c.value=!0,a.value="";try{const ne=await Le(`/runs/${n.value}`);s.value=ne.run;const S=ne.run.steps&&ne.run.steps.length?ne.run.steps:ne.steps||[],Z=je(S),K=await Ze(((D=s.value)==null?void 0:D.workflow_name)||b.value),se=ue(K,Z);o.value=Q(se,((B=s.value)==null?void 0:B.status)||""),oe(!0)}catch{a.value=""}finally{c.value=!1}}async function Ze(D){if(!D)return[];try{const B=await Le(`/workflows/${D}`);return Xe(B.yaml||"").map(S=>({name:S,status:"queued",hosts:{}}))}catch{return[]}}function Xe(D){const B=D.split(/\r?\n/),ne=[];let S=!1,Z=0;for(const K of B){const se=K.match(/^(\s*)steps\s*:\s*$/);if(se){S=!0,Z=se[1].length;continue}if(S){if(K.match(/^(\s*)/)[1].length<=Z&&K.trim()!==""){S=!1;continue}const _=K.match(/^\s*-\s*name\s*:\s*(.+)$/);_&&ne.push(_[1].trim())}}return ne}function ue(D,B){if(!D.length)return B;const ne=new Map(B.map(K=>[K.name,K])),S=new Set(D.map(K=>K.name)),Z=D.map(K=>{const se=ne.get(K.name);return se?{...K,...se,hosts:se.hosts||{}}:K});for(const K of B)S.has(K.name)||Z.push(K);return Z}function Q(D,B){const ne=D.map(S=>{if(S.status&&S.status!=="queued"&&S.status!=="pending")return S;const Z=S.hosts?Object.values(S.hosts).map(_=>_.status):[],K=Z.includes("failed"),se=Z.includes("running"),ge=Z.includes("success");return K?{...S,status:"failed"}:se?{...S,status:"running"}:ge?{...S,status:"success"}:S});if(B==="failed"&&!ne.some(S=>S.status==="failed")){const S=ne.find(Z=>["running","queued","pending"].includes(Z.status));S&&(S.status="failed")}return ne}function oe(D=!1){if(!o.value.length){i.value=0;return}if(!D&&o.value[i.value])return;const B=o.value.findIndex(ne=>ne.status==="running");if(B>=0){i.value=B;return}i.value=Math.min(i.value,o.value.length-1)}function X(D){let B=o.value.find(ne=>ne.name===D);return B||(B={name:D,status:"queued",hosts:{}},o.value.push(B)),B.hosts||(B.hosts={}),B}function _e(D,B,ne){D.hosts||(D.hosts={});const S=D.hosts[B]||{host:B,status:"queued"};D.hosts[B]={...S,...ne,host:B}}function Ce(D){var B,ne,S,Z,K,se,ge,_,k,I;if(!(!D||D.run_id!==n.value))switch(s.value||(s.value={run_id:D.run_id,workflow_name:b.value,status:"running"}),D.type){case"workflow_start":s.value.status=String(((B=D.data)==null?void 0:B.status)||"running"),s.value.started_at=D.time;break;case"workflow_end":s.value.status=String(((ne=D.data)==null?void 0:ne.status)||"success"),s.value.message=String(((S=D.data)==null?void 0:S.message)||""),s.value.finished_at=D.time,p&&(p.close(),p=null);break;case"step_start":{if(!D.step)break;const j=X(D.step);j.status="running",j.started_at=D.time;const F=Array.isArray((Z=D.data)==null?void 0:Z.targets)?(K=D.data)==null?void 0:K.targets:[];for(const W of F)W&&W.name&&_e(j,W.name,{status:"running",started_at:D.time});break}case"step_end":case"step_failed":{if(!D.step)break;const j=X(D.step);j.status=String(((se=D.data)==null?void 0:se.status)||(D.type==="step_failed"?"failed":"success")),j.finished_at=D.time;break}case"agent_output":{if(!D.step||!D.host)break;const j=X(D.step);_e(j,D.host,{status:String(((ge=D.data)==null?void 0:ge.status)||"success"),output:(_=D.data)==null?void 0:_.output,message:(k=D.data)!=null&&k.error?String((I=D.data)==null?void 0:I.error):"",finished_at:D.time});break}}}function be(){if(Re(),!n.value)return;v.value="";const D=`${Wr()}/runs/${n.value}/stream`;p=new EventSource(D),p.onopen=()=>{v.value=""},p.onerror=()=>{v.value="..."};const B=ne=>{try{const S=JSON.parse(ne.data);Ce(S)}catch{}};["workflow_start","workflow_end","step_start","step_end","step_failed","agent_output"].forEach(ne=>{p&&p.addEventListener(ne,B)})}function Re(){p&&(p.close(),p=null)}ft(()=>o.value.length,()=>{if(!o.value.length){i.value=0;return}i.value>=o.value.length&&(i.value=o.value.length-1)}),ft(V,D=>{r.value!=="all"&&!D.includes(r.value)&&(r.value="all")});async function Pe(){await st(),be()}return ft(n,()=>{Pe()}),Zt(()=>{Pe()}),or(()=>{Re()}),(D,B)=>{const ne=ls("RouterLink");return h(),g("section",fb,[l("div",vb,[l("div",null,[B[1]||(B[1]=l("h1",null,"",-1)),l("div",pb,[b.value?(h(),g("span",hb,""+T(b.value),1)):J("",!0),n.value?(h(),g("span",mb,T(n.value),1)):J("",!0),l("span",{class:Ie(["badge",H.value])},T(q(H.value)),3),M.value?(h(),g("span",gb,T(M.value),1)):J("",!0),v.value?(h(),g("span",yb,T(v.value),1)):J("",!0)])]),l("div",_b,[l("div",bb,[B[3]||(B[3]=l("span",{class:"filter-label"},"",-1)),ae(l("select",{"onUpdate:modelValue":B[0]||(B[0]=S=>r.value=S),disabled:V.value.length===0},[B[2]||(B[2]=l("option",{value:"all"},"",-1)),(h(!0),g(fe,null,Te(V.value,S=>(h(),g("option",{key:S,value:S},T(S),9,kb))),128))],8,wb),[[Wt,r.value]])]),Ue(ne,{class:"btn",to:E.value},{default:bt(()=>[...B[4]||(B[4]=[tt("  ",-1)])]),_:1},8,["to"])])]),c.value?(h(),g("div",$b,"...")):a.value?(h(),g("div",Sb,T(a.value),1)):(h(),g("div",xb,[l("aside",Eb,[B[6]||(B[6]=l("div",{class:"panel-title"},"",-1)),o.value.length===0?(h(),g("div",Cb,[B[5]||(B[5]=tt("  ",-1)),M.value?(h(),g("div",Rb,": "+T(M.value),1)):J("",!0)])):J("",!0),(h(!0),g(fe,null,Te(o.value,(S,Z)=>(h(),g("div",{key:S.name,class:Ie(["step",S.status]),onClick:K=>A(Z)},[l("div",null,[l("div",Ab,T(S.name),1),l("div",Tb,T(Ee(S.started_at,S.finished_at))+"  "+T(ve(S.started_at)),1)]),l("span",{class:Ie(["badge",S.status])},T(q(S.status)),3)],10,Ib))),128)),o.value.length?(h(),g("div",Mb,[l("div",{class:"bar",style:Hs({width:L.value+"%"})},null,4)])):J("",!0)]),l("div",Nb,[l("section",Ob,[B[10]||(B[10]=l("div",{class:"panel-title"},"",-1)),l("div",Pb,[l("div",Lb,[B[7]||(B[7]=l("span",{class:"dot red"},null,-1)),B[8]||(B[8]=l("span",{class:"dot yellow"},null,-1)),B[9]||(B[9]=l("span",{class:"dot green"},null,-1)),l("span",Vb,T(U.value?U.value.name:""),1)]),l("div",Db,[U.value?J("",!0):(h(),g("div",Bb,"")),!U.value&&M.value?(h(),g("div",Ub,T(M.value),1)):(h(),g(fe,{key:2},[N.value.length===0?(h(),g("div",jb,"")):J("",!0),(h(!0),g(fe,null,Te(N.value,S=>(h(),g("div",{key:S.host,class:"output-block"},[l("div",Hb,"# "+T(S.host),1),S.stdout?(h(),g("div",Fb,T(S.stdout),1)):J("",!0),S.stderr?(h(),g("div",Wb,T(S.stderr),1)):J("",!0),S.extra?(h(),g("div",Kb,T(S.extra),1)):J("",!0),S.message?(h(),g("div",qb,T(S.message),1)):J("",!0)]))),128))],64))])])]),l("section",Gb,[B[16]||(B[16]=l("div",{class:"panel-title"},"",-1)),U.value?(h(),g("div",zb,[l("div",null,[B[14]||(B[14]=l("div",{class:"label"},"",-1)),l("div",Zb,[B[11]||(B[11]=l("span",null,"",-1)),l("strong",null,T(q(U.value.status)),1)]),l("div",Jb,[B[12]||(B[12]=l("span",null,"",-1)),l("strong",null,T(ve(U.value.started_at)),1)]),l("div",Qb,[B[13]||(B[13]=l("span",null,"",-1)),l("strong",null,T(ve(U.value.finished_at)),1)])]),l("div",null,[B[15]||(B[15]=l("div",{class:"label"},"",-1)),(h(!0),g(fe,null,Te($.value,S=>(h(),g("div",{key:S.host,class:Ie(["host",S.status])},[l("div",null,T(S.host),1),l("span",{class:Ie(S.status)},T(q(S.status)),3)],2))),128)),$.value.length===0?(h(),g("div",Xb,"")):J("",!0)])])):(h(),g("div",Yb,""))])])]))])}}}),tw=Kt(ew,[["__scopeId","data-v-85d0f36a"]]),nw={class:"envs"},sw={class:"envs-header"},lw={class:"actions"},ow={class:"envs-body"},iw={class:"panel list"},aw={key:0,class:"empty"},rw={key:1,class:"empty"},uw={key:2,class:"list-body"},cw=["onClick"],dw={class:"item-title"},fw={class:"item-desc"},vw={class:"item-meta"},pw={key:0,class:"empty"},hw={class:"panel editor"},mw={key:0,class:"empty"},gw={key:1,class:"editor-body"},yw={class:"field"},_w=["disabled"],bw={class:"field"},ww=["disabled"],kw={class:"env-grid"},$w=["onUpdate:modelValue"],Sw=["onUpdate:modelValue"],xw=["onClick"],Ew={class:"editor-actions"},Cw=["disabled"],Rw={class:"status"},Iw=xt({__name:"EnvPackagesView",setup(e){const t=P(""),n=P([]),s=P(""),o=P(!1),i=P(!1),r=P(""),c=P(""),a=P({name:"",description:"",env:{}}),v=P([]),p=re(()=>{const $=t.value.trim().toLowerCase();return $?n.value.filter(N=>`${N.name} ${N.description}`.toLowerCase().includes($)):n.value});async function b(){o.value=!0,r.value="";try{const $=await Le("/envs");n.value=$.items||[]}catch{r.value=""}finally{o.value=!1}}async function R($){s.value=$,c.value="";try{const N=await Le(`/envs/${$}`);a.value={name:N.name,description:N.description||"",env:N.env||{}},v.value=Object.entries(a.value.env).map(([L,A])=>({key:L,value:A}))}catch{c.value=""}}function E(){v.value.push({key:"",value:""})}function H($){v.value.splice($,1)}async function M(){if(!a.value.name.trim()){c.value="";return}i.value=!0,c.value="...";const $={};for(const N of v.value)N.key.trim()&&($[N.key.trim()]=N.value);try{const N={name:a.value.name.trim(),description:a.value.description.trim(),env:$},L=await Le(`/envs/${N.name}`,{method:"PUT",body:N});a.value={name:L.name,description:L.description||"",env:L.env||{}},v.value=Object.entries(a.value.env).map(([A,q])=>({key:A,value:q})),s.value=L.name,c.value="",await b()}catch(N){const L=N;c.value=L.message?`: ${L.message}`:""}finally{i.value=!1}}async function V(){const $=window.prompt("///");if(!$)return;const N=$.trim();if(!/^[a-zA-Z0-9_-]+$/.test(N)){window.alert("");return}s.value=N,a.value={name:N,description:"",env:{}},v.value=[],await M()}function U($){const N=Date.parse($);if(Number.isNaN(N))return $||"";const L=Math.max(0,Date.now()-N),A=Math.floor(L/6e4);if(A<1)return"";if(A<60)return`${A} `;const q=Math.floor(A/60);return q<24?`${q} `:`${Math.floor(q/24)} `}return Zt(()=>{b()}),($,N)=>(h(),g("section",nw,[l("div",sw,[N[3]||(N[3]=l("div",null,[l("h1",null,""),l("p",null,"")],-1)),l("div",lw,[ae(l("input",{"onUpdate:modelValue":N[0]||(N[0]=L=>t.value=L),type:"text",placeholder:""},null,512),[[$e,t.value]]),l("button",{class:"btn primary",type:"button",onClick:V},"")])]),l("div",ow,[l("aside",iw,[N[4]||(N[4]=l("div",{class:"panel-title"},"",-1)),o.value?(h(),g("div",aw,"...")):r.value?(h(),g("div",rw,T(r.value),1)):(h(),g("div",uw,[(h(!0),g(fe,null,Te(p.value,L=>(h(),g("button",{key:L.name,class:Ie(["list-item",{active:L.name===s.value}]),type:"button",onClick:A=>R(L.name)},[l("div",dw,T(L.name),1),l("div",fw,T(L.description||""),1),l("div",vw," "+T(U(L.updated_at)),1)],10,cw))),128)),p.value.length===0?(h(),g("div",pw,"")):J("",!0)]))]),l("section",hw,[N[8]||(N[8]=l("div",{class:"panel-title"},"",-1)),s.value?(h(),g("div",gw,[l("label",yw,[N[5]||(N[5]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":N[1]||(N[1]=L=>a.value.name=L),type:"text",disabled:i.value},null,8,_w),[[$e,a.value.name]])]),l("label",bw,[N[6]||(N[6]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":N[2]||(N[2]=L=>a.value.description=L),type:"text",disabled:i.value},null,8,ww),[[$e,a.value.description]])]),l("div",kw,[N[7]||(N[7]=l("div",{class:"env-header"},[l("span",null,""),l("span",null,""),l("span")],-1)),(h(!0),g(fe,null,Te(v.value,(L,A)=>(h(),g("div",{key:A,class:"env-row"},[ae(l("input",{"onUpdate:modelValue":q=>L.key=q,type:"text",placeholder:"TOKEN"},null,8,$w),[[$e,L.key]]),ae(l("input",{"onUpdate:modelValue":q=>L.value=q,type:"text",placeholder:"value"},null,8,Sw),[[$e,L.value]]),l("button",{class:"ghost",type:"button",onClick:q=>H(A)},"",8,xw)]))),128)),l("button",{class:"btn",type:"button",onClick:E},"")]),l("div",Ew,[l("button",{class:"btn primary",type:"button",disabled:i.value,onClick:M},"  ",8,Cw),l("span",Rw,T(c.value),1)])])):(h(),g("div",mw,""))])])]))}}),Aw=Kt(Iw,[["__scopeId","data-v-619c3088"]]),Tw={class:"envs"},Mw={class:"envs-header"},Nw={class:"actions"},Ow={class:"envs-body"},Pw={class:"panel list"},Lw={key:0,class:"empty"},Vw={key:1,class:"empty"},Dw={key:2,class:"list-body"},Bw=["onClick"],Uw={class:"item-title"},jw={class:"item-desc"},Hw={class:"item-meta"},Fw={key:0,class:"empty"},Ww={class:"panel editor"},Kw={key:0,class:"empty"},qw={key:1,class:"editor-body"},Gw={class:"field"},Yw=["disabled"],zw={class:"field"},Zw=["disabled"],Jw={class:"field"},Qw=["disabled"],Xw={key:0,class:"field"},ek=["disabled"],tk={key:1,class:"field"},nk=["disabled"],sk={key:2,class:"field"},lk=["disabled"],ok={key:3,class:"field"},ik=["disabled"],ak={key:4,class:"field"},rk=["disabled"],uk={key:5,class:"field"},ck=["disabled"],dk={key:6,class:"field"},fk=["disabled"],vk={class:"env-grid"},pk=["onUpdate:modelValue"],hk=["onUpdate:modelValue"],mk=["onClick"],gk={class:"editor-actions"},yk=["disabled"],_k=["disabled"],bk={class:"status"},wk=xt({__name:"ValidationEnvsView",setup(e){const t=P(""),n=P([]),s=P(""),o=P(!1),i=P(!1),r=P(""),c=P(""),a=P({name:"",type:"container",description:"",labels:{},image:"",host:"",user:"",ssh_key:"",agent_address:""}),v=P([]),p=re(()=>{const L=t.value.trim().toLowerCase();return L?n.value.filter(A=>`${A.name} ${A.description}`.toLowerCase().includes(L)):n.value});async function b(){o.value=!0,r.value="";try{const L=await Le("/validation-envs");n.value=L.items||[]}catch{r.value=""}finally{o.value=!1}}async function R(L){s.value=L,c.value="";try{const A=await Le(`/validation-envs/${L}`);a.value={name:A.name,type:A.type||"container",description:A.description||"",labels:A.labels||{},image:A.image||"",host:A.host||"",user:A.user||"",ssh_key:A.ssh_key||"",agent_address:A.agent_address||""},v.value=Object.entries(a.value.labels).map(([q,ve])=>({key:q,value:ve}))}catch{c.value=""}}function E(){v.value.push({key:"",value:""})}function H(L){v.value.splice(L,1)}async function M(){if(!a.value.name.trim()){c.value="";return}if(!a.value.type.trim()){c.value="";return}i.value=!0,c.value="...";const L={};for(const A of v.value)A.key.trim()&&(L[A.key.trim()]=A.value.trim());try{const A={name:a.value.name.trim(),type:a.value.type,description:a.value.description.trim(),labels:L,image:a.value.image.trim(),host:a.value.host.trim(),user:a.value.user.trim(),ssh_key:a.value.ssh_key.trim(),agent_address:a.value.agent_address.trim()},q=await Le(`/validation-envs/${A.name}`,{method:"PUT",body:A});a.value={name:q.name,type:q.type||"container",description:q.description||"",labels:q.labels||{},image:q.image||"",host:q.host||"",user:q.user||"",ssh_key:q.ssh_key||"",agent_address:q.agent_address||""},v.value=Object.entries(a.value.labels).map(([ve,Ee])=>({key:ve,value:Ee})),s.value=q.name,c.value="",await b()}catch(A){const q=A;c.value=q.message?`: ${q.message}`:""}finally{i.value=!1}}async function V(){if(s.value&&window.confirm(` ${s.value} `)){i.value=!0,c.value="...";try{await Le(`/validation-envs/${s.value}`,{method:"DELETE"}),s.value="",a.value={name:"",type:"container",description:"",labels:{},image:"",host:"",user:"",ssh_key:"",agent_address:""},v.value=[],c.value="",await b()}catch{c.value=""}finally{i.value=!1}}}async function U(){const L=window.prompt("///");if(!L)return;const A=L.trim();if(!/^[a-zA-Z0-9_-]+$/.test(A)){window.alert("");return}s.value=A,a.value={name:A,type:"container",description:"",labels:{},image:"",host:"",user:"",ssh_key:"",agent_address:""},v.value=[],await M()}function $(L){switch(L){case"container":return"";case"ssh":return"SSH";case"agent":return"Agent";default:return L||""}}function N(L){const A=Date.parse(L);if(Number.isNaN(A))return L||"";const q=Math.max(0,Date.now()-A),ve=Math.floor(q/6e4);if(ve<1)return"";if(ve<60)return`${ve} `;const Ee=Math.floor(ve/60);return Ee<24?`${Ee} `:`${Math.floor(Ee/24)} `}return Zt(()=>{b()}),(L,A)=>(h(),g("section",Tw,[l("div",Mw,[A[11]||(A[11]=l("div",null,[l("h1",null,""),l("p",null,"/SSH/Agent ")],-1)),l("div",Nw,[ae(l("input",{"onUpdate:modelValue":A[0]||(A[0]=q=>t.value=q),type:"text",placeholder:""},null,512),[[$e,t.value]]),l("button",{class:"btn primary",type:"button",onClick:U},"")])]),l("div",Ow,[l("aside",Pw,[A[12]||(A[12]=l("div",{class:"panel-title"},"",-1)),o.value?(h(),g("div",Lw,"...")):r.value?(h(),g("div",Vw,T(r.value),1)):(h(),g("div",Dw,[(h(!0),g(fe,null,Te(p.value,q=>(h(),g("button",{key:q.name,class:Ie(["list-item",{active:q.name===s.value}]),type:"button",onClick:ve=>R(q.name)},[l("div",Uw,T(q.name),1),l("div",jw,T(q.description||""),1),l("div",Hw,T($(q.type))+"   "+T(N(q.updated_at)),1)],10,Bw))),128)),p.value.length===0?(h(),g("div",Fw,"")):J("",!0)]))]),l("section",Ww,[A[25]||(A[25]=l("div",{class:"panel-title"},"",-1)),s.value?(h(),g("div",qw,[l("label",Gw,[A[13]||(A[13]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[1]||(A[1]=q=>a.value.name=q),type:"text",disabled:i.value},null,8,Yw),[[$e,a.value.name]])]),l("label",zw,[A[15]||(A[15]=l("span",null,"",-1)),ae(l("select",{"onUpdate:modelValue":A[2]||(A[2]=q=>a.value.type=q),disabled:i.value},[...A[14]||(A[14]=[l("option",{value:"container"},"",-1),l("option",{value:"ssh"},"SSH",-1),l("option",{value:"agent"},"Agent",-1)])],8,Zw),[[Wt,a.value.type]])]),l("label",Jw,[A[16]||(A[16]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[3]||(A[3]=q=>a.value.description=q),type:"text",disabled:i.value},null,8,Qw),[[$e,a.value.description]])]),a.value.type==="container"?(h(),g("div",Xw,[A[17]||(A[17]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[4]||(A[4]=q=>a.value.image=q),type:"text",placeholder:"bops-agent:latest",disabled:i.value},null,8,ek),[[$e,a.value.image]])])):J("",!0),a.value.type==="ssh"?(h(),g("div",tk,[A[18]||(A[18]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[5]||(A[5]=q=>a.value.host=q),type:"text",placeholder:"10.0.0.10  10.0.0.10:22",disabled:i.value},null,8,nk),[[$e,a.value.host]])])):J("",!0),a.value.type==="ssh"?(h(),g("div",sk,[A[19]||(A[19]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[6]||(A[6]=q=>a.value.user=q),type:"text",placeholder:"root",disabled:i.value},null,8,lk),[[$e,a.value.user]])])):J("",!0),a.value.type==="ssh"?(h(),g("div",ok,[A[20]||(A[20]=l("span",null,"SSH ",-1)),ae(l("input",{"onUpdate:modelValue":A[7]||(A[7]=q=>a.value.ssh_key=q),type:"text",placeholder:"~/.ssh/id_rsa",disabled:i.value},null,8,ik),[[$e,a.value.ssh_key]])])):J("",!0),a.value.type==="agent"?(h(),g("div",ak,[A[21]||(A[21]=l("span",null,"Agent ",-1)),ae(l("input",{"onUpdate:modelValue":A[8]||(A[8]=q=>a.value.agent_address=q),type:"text",placeholder:"10.0.0.10:7071",disabled:i.value},null,8,rk),[[$e,a.value.agent_address]])])):J("",!0),a.value.type==="agent"?(h(),g("div",uk,[A[22]||(A[22]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":A[9]||(A[9]=q=>a.value.user=q),type:"text",placeholder:"root",disabled:i.value},null,8,ck),[[$e,a.value.user]])])):J("",!0),a.value.type==="agent"?(h(),g("div",dk,[A[23]||(A[23]=l("span",null,"SSH ",-1)),ae(l("input",{"onUpdate:modelValue":A[10]||(A[10]=q=>a.value.ssh_key=q),type:"text",placeholder:"~/.ssh/id_rsa",disabled:i.value},null,8,fk),[[$e,a.value.ssh_key]])])):J("",!0),l("div",vk,[A[24]||(A[24]=l("div",{class:"env-header"},[l("span",null,""),l("span",null,""),l("span")],-1)),(h(!0),g(fe,null,Te(v.value,(q,ve)=>(h(),g("div",{key:ve,class:"env-row"},[ae(l("input",{"onUpdate:modelValue":Ee=>q.key=Ee,type:"text",placeholder:"team"},null,8,pk),[[$e,q.key]]),ae(l("input",{"onUpdate:modelValue":Ee=>q.value=Ee,type:"text",placeholder:"ops"},null,8,hk),[[$e,q.value]]),l("button",{class:"ghost",type:"button",onClick:Ee=>H(ve)},"",8,mk)]))),128)),l("button",{class:"btn",type:"button",onClick:E},"")]),l("div",gk,[l("button",{class:"btn primary",type:"button",disabled:i.value,onClick:M},"  ",8,yk),l("button",{class:"btn ghost",type:"button",disabled:i.value,onClick:V},"  ",8,_k),l("span",bk,T(c.value),1)])])):(h(),g("div",Kw,""))])])]))}}),kk=Kt(wk,[["__scopeId","data-v-789a825e"]]),$k={class:"scripts"},Sk={class:"scripts-header"},xk={class:"actions"},Ek={class:"scripts-body"},Ck={class:"panel list"},Rk={key:0,class:"empty"},Ik={key:1,class:"empty"},Ak={key:2,class:"list-body"},Tk=["onClick"],Mk={class:"item-title"},Nk={class:"item-desc"},Ok={key:0,class:"item-tags"},Pk={class:"item-meta"},Lk={key:0,class:"empty"},Vk={class:"panel editor"},Dk={key:0,class:"empty"},Bk={key:1,class:"editor-body"},Uk={class:"field"},jk=["disabled"],Hk={class:"field"},Fk=["disabled"],Wk={class:"field"},Kk=["disabled"],qk={class:"field"},Gk=["disabled"],Yk={class:"field"},zk={class:"editor-actions"},Zk=["disabled"],Jk=["disabled"],Qk={class:"status"},Xk=xt({__name:"ScriptsView",setup(e){const t=P(""),n=P([]),s=P(""),o=P(!1),i=P(!1),r=P(""),c=P(""),a=P({name:"",language:"shell",description:"",tags:[],content:""}),v=P(""),p=re(()=>{const U=t.value.trim().toLowerCase();return U?n.value.filter($=>{const N=($.tags||[]).join(" ");return`${$.name} ${$.description} ${N}`.toLowerCase().includes(U)}):n.value});async function b(){o.value=!0,r.value="";try{const U=await Le("/scripts");n.value=U.items||[]}catch{r.value=""}finally{o.value=!1}}async function R(U){s.value=U,c.value="";try{const $=await Le(`/scripts/${U}`);a.value={name:$.name,language:$.language||"shell",description:$.description||"",tags:$.tags||[],content:$.content||""},v.value=a.value.tags.join(", ")}catch{c.value=""}}async function E(){if(!a.value.name.trim()){c.value="";return}if(!a.value.language.trim()){c.value="";return}i.value=!0,c.value="...";const U=v.value.split(",").map($=>$.trim()).filter(Boolean);try{const $={name:a.value.name.trim(),language:a.value.language.trim(),description:a.value.description.trim(),tags:U,content:a.value.content},N=await Le(`/scripts/${$.name}`,{method:"PUT",body:$});a.value={name:N.name,language:N.language||"shell",description:N.description||"",tags:N.tags||[],content:N.content||""},v.value=a.value.tags.join(", "),s.value=N.name,c.value="",await b()}catch($){const N=$;c.value=N.message?`: ${N.message}`:""}finally{i.value=!1}}async function H(){if(s.value&&window.confirm(` ${s.value} `)){i.value=!0,c.value="...";try{await Le(`/scripts/${s.value}`,{method:"DELETE"}),s.value="",a.value={name:"",language:"shell",description:"",tags:[],content:""},v.value="",c.value="",await b()}catch{c.value=""}finally{i.value=!1}}}async function M(){const U=window.prompt("///");if(!U)return;const $=U.trim();if(!/^[a-zA-Z0-9_-]+$/.test($)){window.alert("");return}s.value=$,a.value={name:$,language:"shell",description:"",tags:[],content:""},v.value="",await E()}function V(U){const $=Date.parse(U);if(Number.isNaN($))return U||"";const N=Math.max(0,Date.now()-$),L=Math.floor(N/6e4);if(L<1)return"";if(L<60)return`${L} `;const A=Math.floor(L/60);return A<24?`${A} `:`${Math.floor(A/24)} `}return Zt(()=>{b()}),(U,$)=>(h(),g("section",$k,[l("div",Sk,[$[6]||($[6]=l("div",null,[l("h1",null,""),l("p",null," shell / python ")],-1)),l("div",xk,[ae(l("input",{"onUpdate:modelValue":$[0]||($[0]=N=>t.value=N),type:"text",placeholder:""},null,512),[[$e,t.value]]),l("button",{class:"btn primary",type:"button",onClick:M},"")])]),l("div",Ek,[l("aside",Ck,[$[7]||($[7]=l("div",{class:"panel-title"},"",-1)),o.value?(h(),g("div",Rk,"...")):r.value?(h(),g("div",Ik,T(r.value),1)):(h(),g("div",Ak,[(h(!0),g(fe,null,Te(p.value,N=>(h(),g("button",{key:N.name,class:Ie(["list-item",{active:N.name===s.value}]),type:"button",onClick:L=>R(N.name)},[l("div",Mk,T(N.name),1),l("div",Nk,T(N.description||""),1),N.tags&&N.tags.length?(h(),g("div",Ok,T(N.tags.join("  ")),1)):J("",!0),l("div",Pk,T(N.language||"")+"   "+T(V(N.updated_at)),1)],10,Tk))),128)),p.value.length===0?(h(),g("div",Lk,"")):J("",!0)]))]),l("section",Vk,[$[14]||($[14]=l("div",{class:"panel-title"},"",-1)),s.value?(h(),g("div",Bk,[l("label",Uk,[$[8]||($[8]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":$[1]||($[1]=N=>a.value.name=N),type:"text",disabled:i.value},null,8,jk),[[$e,a.value.name]])]),l("label",Hk,[$[10]||($[10]=l("span",null,"",-1)),ae(l("select",{"onUpdate:modelValue":$[2]||($[2]=N=>a.value.language=N),disabled:i.value},[...$[9]||($[9]=[l("option",{value:"shell"},"shell",-1),l("option",{value:"python"},"python",-1)])],8,Fk),[[Wt,a.value.language]])]),l("label",Wk,[$[11]||($[11]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":$[3]||($[3]=N=>a.value.description=N),type:"text",disabled:i.value},null,8,Kk),[[$e,a.value.description]])]),l("label",qk,[$[12]||($[12]=l("span",null,"",-1)),ae(l("input",{"onUpdate:modelValue":$[4]||($[4]=N=>v.value=N),type:"text",placeholder:"nginx, setup",disabled:i.value},null,8,Gk),[[$e,v.value]])]),l("div",Yk,[$[13]||($[13]=l("span",null,"",-1)),ae(l("textarea",{"onUpdate:modelValue":$[5]||($[5]=N=>a.value.content=N),rows:"12",spellcheck:"false"},null,512),[[$e,a.value.content]])]),l("div",zk,[l("button",{class:"btn primary",type:"button",disabled:i.value,onClick:E},"  ",8,Zk),l("button",{class:"btn ghost",type:"button",disabled:i.value,onClick:H},"  ",8,Jk),l("span",Qk,T(c.value),1)])])):(h(),g("div",Dk,""))])])]))}}),e$=Kt(Xk,[["__scopeId","data-v-56351363"]]),t$=qf({history:Sf(),routes:[{path:"/",name:"home",component:bm},{path:"/workflows",name:"workflows",component:Qm},{path:"/envs",name:"envs",component:Aw},{path:"/validation-envs",name:"validation-envs",component:kk},{path:"/scripts",name:"scripts",component:e$},{path:"/workflows/:name/runs",name:"workflow-runs",component:wa},{path:"/workflows/:name",name:"workflow",component:D_},{path:"/workflows/:name/flow",name:"workflow-flow",component:db},{path:"/runs/:id",name:"run-console",component:tw},{path:"/runs",name:"runs",component:wa}]});Ld(uv).use(t$).mount("#app");
